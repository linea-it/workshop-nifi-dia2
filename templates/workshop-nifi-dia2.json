{"flowContents":{"identifier":"6694ab51-dc3d-3850-80e6-48a52b28418d","instanceIdentifier":"ce64a691-0194-1000-55ed-aa172efff718","name":"workshop-nifi-dia2","comments":"","position":{"x":-414.0,"y":-176.0},"processGroups":[{"identifier":"dd2032b0-b8aa-3328-ae90-043288002532","instanceIdentifier":"e36c6c0f-9923-3e7e-c6fb-be99f9e53927","name":"Automatizando a coleta do Kaggle","comments":"","position":{"x":-584.0,"y":80.0},"processGroups":[],"remoteProcessGroups":[],"processors":[{"identifier":"887e9a6d-aca0-3c07-b998-ff979e6588f0","instanceIdentifier":"6a9553ed-e92a-3afc-ea18-f3dc73f26f66","name":"RouteOnContent","comments":"Faz rotas distintas para dinossauros do período Jurássico e Cretáceo","position":{"x":-48.0,"y":840.0},"type":"org.apache.nifi.processors.standard.RouteOnContent","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"2.0.0-M4"},"properties":{"Content Buffer Size":"1 MB","Jurassic":"\\bJurassic\\b","Match Requirement":"content must contain match","Cretaceous":"\\bCretaceous\\b","Character Set":"UTF-8"},"propertyDescriptors":{"Content Buffer Size":{"name":"Content Buffer Size","displayName":"Content Buffer Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Jurassic":{"name":"Jurassic","displayName":"Jurassic","identifiesControllerService":false,"sensitive":false,"dynamic":true},"Match Requirement":{"name":"Match Requirement","displayName":"Match Requirement","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Cretaceous":{"name":"Cretaceous","displayName":"Cretaceous","identifiesControllerService":false,"sensitive":false,"dynamic":true},"Character Set":{"name":"Character Set","displayName":"Character Set","identifiesControllerService":false,"sensitive":false,"dynamic":false}},"style":{},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["unmatched"],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"dd2032b0-b8aa-3328-ae90-043288002532"},{"identifier":"9ac31a80-f1e4-3e7b-8ac4-fc86fb1a4843","instanceIdentifier":"f3c11cf7-e96f-3364-cde0-e2fa7474e4c9","name":"PutFile","comments":"Salva o arquivo em disco","position":{"x":-48.0,"y":1736.0},"type":"org.apache.nifi.processors.standard.PutFile","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"2.0.0-M4"},"properties":{"Group":null,"Owner":null,"Create Missing Directories":"true","Permissions":null,"Maximum File Count":null,"Last Modified Time":null,"Directory":"/opt/nifi/nifi-current/files/","Conflict Resolution Strategy":"replace"},"propertyDescriptors":{"Group":{"name":"Group","displayName":"Group","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Owner":{"name":"Owner","displayName":"Owner","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Create Missing Directories":{"name":"Create Missing Directories","displayName":"Create Missing Directories","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Permissions":{"name":"Permissions","displayName":"Permissions","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Maximum File Count":{"name":"Maximum File Count","displayName":"Maximum File Count","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Last Modified Time":{"name":"Last Modified Time","displayName":"Last Modified Time","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Directory":{"name":"Directory","displayName":"Directory","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Conflict Resolution Strategy":{"name":"Conflict Resolution Strategy","displayName":"Conflict Resolution Strategy","identifiesControllerService":false,"sensitive":false,"dynamic":false}},"style":{},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["success","failure"],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"dd2032b0-b8aa-3328-ae90-043288002532"},{"identifier":"d2ab5dc8-4e15-3dd4-a76b-f459f960dd78","instanceIdentifier":"681a164a-ae7b-322e-4ece-6b74a81d78d1","name":"InvokeHTTP","comments":"Faz a baixa do arquivo CSV compactado.","position":{"x":-48.0,"y":-168.0},"type":"org.apache.nifi.processors.standard.InvokeHTTP","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"2.0.0-M4"},"properties":{"Request Content-Encoding":"DISABLED","proxy-configuration-service":null,"Request Multipart Form-Data Filename Enabled":"true","Request Chunked Transfer-Encoding Enabled":"false","HTTP/2 Disabled":"False","Connection Timeout":"5 secs","Response Cookie Strategy":"DISABLED","Socket Read Timeout":"15 secs","Socket Idle Connections":"5","Request Body Enabled":"true","HTTP URL":"https://www.kaggle.com/api/v1/datasets/download/kandebonfim/super-trunfo-dinossaurs-2","Request OAuth2 Access Token Provider":null,"Socket Idle Timeout":"5 mins","Response Redirects Enabled":"True","Socket Write Timeout":"15 secs","Request Header Attributes Pattern":null,"Response FlowFile Naming Strategy":"RANDOM","Response Cache Enabled":"false","Request Date Header Enabled":"True","Request Failure Penalization Enabled":"false","Response Body Attribute Size":"256","SSL Context Service":null,"Response Generation Required":"false","Request User-Agent":null,"Response Header Request Attributes Enabled":"false","HTTP Method":"GET","Request Username":null,"Request Content-Type":"${mime.type}","Response Body Attribute Name":null,"Request Digest Authentication Enabled":"false","Request Multipart Form-Data Name":null,"Response Cache Size":"10MB","Response Body Ignored":"false"},"propertyDescriptors":{"Request Content-Encoding":{"name":"Request Content-Encoding","displayName":"Request Content-Encoding","identifiesControllerService":false,"sensitive":false,"dynamic":false},"proxy-configuration-service":{"name":"proxy-configuration-service","displayName":"Proxy Configuration Service","identifiesControllerService":true,"sensitive":false,"dynamic":false},"Request Multipart Form-Data Filename Enabled":{"name":"Request Multipart Form-Data Filename Enabled","displayName":"Request Multipart Form-Data Filename Enabled","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request Chunked Transfer-Encoding Enabled":{"name":"Request Chunked Transfer-Encoding Enabled","displayName":"Request Chunked Transfer-Encoding Enabled","identifiesControllerService":false,"sensitive":false,"dynamic":false},"HTTP/2 Disabled":{"name":"HTTP/2 Disabled","displayName":"HTTP/2 Disabled","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Connection Timeout":{"name":"Connection Timeout","displayName":"Connection Timeout","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Response Cookie Strategy":{"name":"Response Cookie Strategy","displayName":"Response Cookie Strategy","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request Password":{"name":"Request Password","displayName":"Request Password","identifiesControllerService":false,"sensitive":true,"dynamic":false},"Socket Read Timeout":{"name":"Socket Read Timeout","displayName":"Socket Read Timeout","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Socket Idle Connections":{"name":"Socket Idle Connections","displayName":"Socket Idle Connections","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request Body Enabled":{"name":"Request Body Enabled","displayName":"Request Body Enabled","identifiesControllerService":false,"sensitive":false,"dynamic":false},"HTTP URL":{"name":"HTTP URL","displayName":"HTTP URL","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request OAuth2 Access Token Provider":{"name":"Request OAuth2 Access Token Provider","displayName":"Request OAuth2 Access Token Provider","identifiesControllerService":true,"sensitive":false,"dynamic":false},"Socket Idle Timeout":{"name":"Socket Idle Timeout","displayName":"Socket Idle Timeout","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Response Redirects Enabled":{"name":"Response Redirects Enabled","displayName":"Response Redirects Enabled","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Socket Write Timeout":{"name":"Socket Write Timeout","displayName":"Socket Write Timeout","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request Header Attributes Pattern":{"name":"Request Header Attributes Pattern","displayName":"Request Header Attributes Pattern","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Response FlowFile Naming Strategy":{"name":"Response FlowFile Naming Strategy","displayName":"Response FlowFile Naming Strategy","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Response Cache Enabled":{"name":"Response Cache Enabled","displayName":"Response Cache Enabled","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request Date Header Enabled":{"name":"Request Date Header Enabled","displayName":"Request Date Header Enabled","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request Failure Penalization Enabled":{"name":"Request Failure Penalization Enabled","displayName":"Request Failure Penalization Enabled","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Response Body Attribute Size":{"name":"Response Body Attribute Size","displayName":"Response Body Attribute Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"SSL Context Service":{"name":"SSL Context Service","displayName":"SSL Context Service","identifiesControllerService":true,"sensitive":false,"dynamic":false},"Response Generation Required":{"name":"Response Generation Required","displayName":"Response Generation Required","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request User-Agent":{"name":"Request User-Agent","displayName":"Request User-Agent","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Response Header Request Attributes Enabled":{"name":"Response Header Request Attributes Enabled","displayName":"Response Header Request Attributes Enabled","identifiesControllerService":false,"sensitive":false,"dynamic":false},"HTTP Method":{"name":"HTTP Method","displayName":"HTTP Method","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request Username":{"name":"Request Username","displayName":"Request Username","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request Content-Type":{"name":"Request Content-Type","displayName":"Request Content-Type","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Response Body Attribute Name":{"name":"Response Body Attribute Name","displayName":"Response Body Attribute Name","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request Digest Authentication Enabled":{"name":"Request Digest Authentication Enabled","displayName":"Request Digest Authentication Enabled","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request Multipart Form-Data Name":{"name":"Request Multipart Form-Data Name","displayName":"Request Multipart Form-Data Name","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Response Cache Size":{"name":"Response Cache Size","displayName":"Response Cache Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Response Body Ignored":{"name":"Response Body Ignored","displayName":"Response Body Ignored","identifiesControllerService":false,"sensitive":false,"dynamic":false}},"style":{"background-color":"#ff0000"},"schedulingPeriod":"1 hour","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["No Retry","Retry","Original","Failure"],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"dd2032b0-b8aa-3328-ae90-043288002532"},{"identifier":"a7e9af1f-c91b-3f28-b410-35fbb171a020","instanceIdentifier":"a14cf07e-0377-3449-dbf8-b98fde04f733","name":"SplitText","comments":"Divide o arquivo linha por linha mantendo o cabeçalho","position":{"x":-48.0,"y":640.0},"type":"org.apache.nifi.processors.standard.SplitText","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"2.0.0-M4"},"properties":{"Remove Trailing Newlines":"true","Maximum Fragment Size":null,"Header Line Marker Characters":null,"Header Line Count":"1","Line Split Count":"1"},"propertyDescriptors":{"Remove Trailing Newlines":{"name":"Remove Trailing Newlines","displayName":"Remove Trailing Newlines","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Maximum Fragment Size":{"name":"Maximum Fragment Size","displayName":"Maximum Fragment Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Header Line Marker Characters":{"name":"Header Line Marker Characters","displayName":"Header Line Marker Characters","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Header Line Count":{"name":"Header Line Count","displayName":"Header Line Count","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Line Split Count":{"name":"Line Split Count","displayName":"Line Split Count","identifiesControllerService":false,"sensitive":false,"dynamic":false}},"style":{},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["original","failure"],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"dd2032b0-b8aa-3328-ae90-043288002532"},{"identifier":"b6a784d3-73b3-370b-b0d7-5d2b9c271066","instanceIdentifier":"2d510082-f5fc-3bfd-2f83-f3050aa18aae","name":"UpdateAttribute","comments":"Renomear o nome do filename","position":{"x":-48.0,"y":1536.0},"type":"org.apache.nifi.processors.attributes.UpdateAttribute","bundle":{"group":"org.apache.nifi","artifact":"nifi-update-attribute-nar","version":"2.0.0-M4"},"properties":{"Delete Attributes Expression":null,"filename":"super-trunfo-dinossaurs-2.json","Store State":"Do not store state","canonical-value-lookup-cache-size":"100","Stateful Variables Initial Value":null},"propertyDescriptors":{"Delete Attributes Expression":{"name":"Delete Attributes Expression","displayName":"Delete Attributes Expression","identifiesControllerService":false,"sensitive":false,"dynamic":false},"filename":{"name":"filename","displayName":"filename","identifiesControllerService":false,"sensitive":false,"dynamic":true},"Store State":{"name":"Store State","displayName":"Store State","identifiesControllerService":false,"sensitive":false,"dynamic":false},"canonical-value-lookup-cache-size":{"name":"canonical-value-lookup-cache-size","displayName":"Cache Value Lookup Cache Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Stateful Variables Initial Value":{"name":"Stateful Variables Initial Value","displayName":"Stateful Variables Initial Value","identifiesControllerService":false,"sensitive":false,"dynamic":false}},"style":{},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":25,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":[],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"dd2032b0-b8aa-3328-ae90-043288002532"},{"identifier":"17761c7f-891c-3de1-9643-f8c4784b0013","instanceIdentifier":"46504f49-b983-3ca2-faa2-5c9c29f33a92","name":"ReplaceText","comments":"Processor para adicionar um emojipedia de \"carne com osso\" para os dinossauros carnívoros","position":{"x":-48.0,"y":440.0},"type":"org.apache.nifi.processors.standard.ReplaceText","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"2.0.0-M4"},"properties":{"Regular Expression":"\\bCarnivorous\\b","Replacement Value":"\uD83C\uDF56Carnivorous","Evaluation Mode":"Line-by-Line","Text to Prepend":null,"Line-by-Line Evaluation Mode":"All","Character Set":"UTF-8","Maximum Buffer Size":"1 MB","Replacement Strategy":"Regex Replace","Text to Append":null},"propertyDescriptors":{"Regular Expression":{"name":"Regular Expression","displayName":"Search Value","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Replacement Value":{"name":"Replacement Value","displayName":"Replacement Value","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Evaluation Mode":{"name":"Evaluation Mode","displayName":"Evaluation Mode","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Text to Prepend":{"name":"Text to Prepend","displayName":"Text to Prepend","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Line-by-Line Evaluation Mode":{"name":"Line-by-Line Evaluation Mode","displayName":"Line-by-Line Evaluation Mode","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Character Set":{"name":"Character Set","displayName":"Character Set","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Maximum Buffer Size":{"name":"Maximum Buffer Size","displayName":"Maximum Buffer Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Replacement Strategy":{"name":"Replacement Strategy","displayName":"Replacement Strategy","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Text to Append":{"name":"Text to Append","displayName":"Text to Append","identifiesControllerService":false,"sensitive":false,"dynamic":false}},"style":{},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":25,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["failure"],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"dd2032b0-b8aa-3328-ae90-043288002532"},{"identifier":"b92f87d6-adbb-3843-a128-55cc1ba26531","instanceIdentifier":"8b335817-e9b5-392e-5b64-22fe82bcc533","name":"UpdateAttribute","comments":"Renomear o nome do filename","position":{"x":-48.0,"y":240.0},"type":"org.apache.nifi.processors.attributes.UpdateAttribute","bundle":{"group":"org.apache.nifi","artifact":"nifi-update-attribute-nar","version":"2.0.0-M4"},"properties":{"Delete Attributes Expression":null,"filename":"super-trunfo-dinossaurs-2.csv","Store State":"Do not store state","canonical-value-lookup-cache-size":"100","Stateful Variables Initial Value":null},"propertyDescriptors":{"Delete Attributes Expression":{"name":"Delete Attributes Expression","displayName":"Delete Attributes Expression","identifiesControllerService":false,"sensitive":false,"dynamic":false},"filename":{"name":"filename","displayName":"filename","identifiesControllerService":false,"sensitive":false,"dynamic":true},"Store State":{"name":"Store State","displayName":"Store State","identifiesControllerService":false,"sensitive":false,"dynamic":false},"canonical-value-lookup-cache-size":{"name":"canonical-value-lookup-cache-size","displayName":"Cache Value Lookup Cache Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Stateful Variables Initial Value":{"name":"Stateful Variables Initial Value","displayName":"Stateful Variables Initial Value","identifiesControllerService":false,"sensitive":false,"dynamic":false}},"style":{},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":25,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":[],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"dd2032b0-b8aa-3328-ae90-043288002532"},{"identifier":"2641f0af-344a-3a78-9ce7-ce88f8f2d241","instanceIdentifier":"2b0b3914-2e25-3206-8d2d-cd09c0e77fb9","name":"UnpackContent","comments":"Descompacta o arquivo que está no flowfile","position":{"x":-48.0,"y":40.0},"type":"org.apache.nifi.processors.standard.UnpackContent","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"2.0.0-M4"},"properties":{"Packaging Format":"use mime.type attribute","allow-stored-entries-wdd":"false","Filename Character Set":"UTF-8","File Filter":".*"},"propertyDescriptors":{"Packaging Format":{"name":"Packaging Format","displayName":"Packaging Format","identifiesControllerService":false,"sensitive":false,"dynamic":false},"allow-stored-entries-wdd":{"name":"allow-stored-entries-wdd","displayName":"Allow Stored Entries With Data Descriptor","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Filename Character Set":{"name":"Filename Character Set","displayName":"Filename Character Set","identifiesControllerService":false,"sensitive":false,"dynamic":false},"File Filter":{"name":"File Filter","displayName":"File Filter","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Password":{"name":"Password","displayName":"Password","identifiesControllerService":false,"sensitive":true,"dynamic":false}},"style":{"background-color":"#ff0000"},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["original","failure"],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"dd2032b0-b8aa-3328-ae90-043288002532"},{"identifier":"673476e4-3e48-322b-b470-2ef85a88fe2b","instanceIdentifier":"a1aeef23-7f86-3d39-815f-68c417d6decb","name":"ConvertRecord","comments":"Converte o conteúdo CSV em JSON","position":{"x":-352.0,"y":1080.0},"type":"org.apache.nifi.processors.standard.ConvertRecord","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"2.0.0-M4"},"properties":{"Include Zero Record FlowFiles":"true","Record Writer":"07ed5f60-09e0-33fe-a57a-b0271d06530a","Record Reader":"6ba03b8e-9b54-376f-9ae6-011cb5d264e7"},"propertyDescriptors":{"Include Zero Record FlowFiles":{"name":"Include Zero Record FlowFiles","displayName":"Include Zero Record FlowFiles","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Record Writer":{"name":"Record Writer","displayName":"Record Writer","identifiesControllerService":true,"sensitive":false,"dynamic":false},"Record Reader":{"name":"Record Reader","displayName":"Record Reader","identifiesControllerService":true,"sensitive":false,"dynamic":false}},"style":{},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["failure"],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"dd2032b0-b8aa-3328-ae90-043288002532"},{"identifier":"53dea2c4-90a2-344d-abcc-8397c66c4301","instanceIdentifier":"685511f2-6bf0-3dbd-2036-32c8513a9980","name":"ConvertRecord","comments":"Converte o conteúdo CSV em JSON","position":{"x":256.0,"y":1080.0},"type":"org.apache.nifi.processors.standard.ConvertRecord","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"2.0.0-M4"},"properties":{"Include Zero Record FlowFiles":"true","Record Writer":"07ed5f60-09e0-33fe-a57a-b0271d06530a","Record Reader":"6ba03b8e-9b54-376f-9ae6-011cb5d264e7"},"propertyDescriptors":{"Include Zero Record FlowFiles":{"name":"Include Zero Record FlowFiles","displayName":"Include Zero Record FlowFiles","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Record Writer":{"name":"Record Writer","displayName":"Record Writer","identifiesControllerService":true,"sensitive":false,"dynamic":false},"Record Reader":{"name":"Record Reader","displayName":"Record Reader","identifiesControllerService":true,"sensitive":false,"dynamic":false}},"style":{},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["failure"],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"dd2032b0-b8aa-3328-ae90-043288002532"},{"identifier":"8a758917-c899-35e9-918d-69a913bb700e","instanceIdentifier":"9ea38f5f-45c6-3f9f-75a2-09d72147d5b8","name":"MergeContent","comments":"Faz a concatenação dos arquivos JSONs em um único array JSON","position":{"x":-48.0,"y":1336.0},"type":"org.apache.nifi.processors.standard.MergeContent","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"2.0.0-M4"},"properties":{"Keep Path":"true","Maximum Group Size":null,"Merge Strategy":"Bin-Packing Algorithm","Attribute Strategy":"Keep Only Common Attributes","Compression Level":"1","Maximum Number of Entries":"1000","Minimum Group Size":"0 B","Maximum number of Bins":"50","Tar Modified Time":"${file.lastModifiedTime}","Delimiter Strategy":"Text","Merge Format":"Binary Concatenation","Footer File":"]","Max Bin Age":null,"Demarcator File":",","Correlation Attribute Name":null,"Header File":"[","mergecontent-metadata-strategy":"Do Not Merge Uncommon Metadata","Minimum Number of Entries":"1"},"propertyDescriptors":{"Keep Path":{"name":"Keep Path","displayName":"Keep Path","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Maximum Group Size":{"name":"Maximum Group Size","displayName":"Maximum Group Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Merge Strategy":{"name":"Merge Strategy","displayName":"Merge Strategy","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Attribute Strategy":{"name":"Attribute Strategy","displayName":"Attribute Strategy","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Compression Level":{"name":"Compression Level","displayName":"Compression Level","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Maximum Number of Entries":{"name":"Maximum Number of Entries","displayName":"Maximum Number of Entries","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Minimum Group Size":{"name":"Minimum Group Size","displayName":"Minimum Group Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Maximum number of Bins":{"name":"Maximum number of Bins","displayName":"Maximum number of Bins","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Tar Modified Time":{"name":"Tar Modified Time","displayName":"Tar Modified Time","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Delimiter Strategy":{"name":"Delimiter Strategy","displayName":"Delimiter Strategy","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Merge Format":{"name":"Merge Format","displayName":"Merge Format","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Footer File":{"name":"Footer File","displayName":"Footer","identifiesControllerService":false,"sensitive":false,"dynamic":false,"resourceDefinition":{"cardinality":"SINGLE","resourceTypes":["TEXT","FILE"]}},"Max Bin Age":{"name":"Max Bin Age","displayName":"Max Bin Age","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Demarcator File":{"name":"Demarcator File","displayName":"Demarcator","identifiesControllerService":false,"sensitive":false,"dynamic":false,"resourceDefinition":{"cardinality":"SINGLE","resourceTypes":["TEXT","FILE"]}},"Correlation Attribute Name":{"name":"Correlation Attribute Name","displayName":"Correlation Attribute Name","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Header File":{"name":"Header File","displayName":"Header","identifiesControllerService":false,"sensitive":false,"dynamic":false,"resourceDefinition":{"cardinality":"SINGLE","resourceTypes":["TEXT","FILE"]}},"mergecontent-metadata-strategy":{"name":"mergecontent-metadata-strategy","displayName":"Metadata Strategy","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Minimum Number of Entries":{"name":"Minimum Number of Entries","displayName":"Minimum Number of Entries","identifiesControllerService":false,"sensitive":false,"dynamic":false}},"style":{},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["original","failure"],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"dd2032b0-b8aa-3328-ae90-043288002532"}],"inputPorts":[],"outputPorts":[],"connections":[{"identifier":"74585fde-eb7c-3e81-bde9-0a4522e18d38","instanceIdentifier":"1907f084-46b7-3829-a5a2-2ed30e686725","name":"","source":{"id":"887e9a6d-aca0-3c07-b998-ff979e6588f0","type":"PROCESSOR","groupId":"dd2032b0-b8aa-3328-ae90-043288002532","name":"RouteOnContent","comments":"Faz rotas distintas para dinossauros do período Jurássico e Cretáceo","instanceIdentifier":"6a9553ed-e92a-3afc-ea18-f3dc73f26f66"},"destination":{"id":"673476e4-3e48-322b-b470-2ef85a88fe2b","type":"PROCESSOR","groupId":"dd2032b0-b8aa-3328-ae90-043288002532","name":"ConvertRecord","comments":"Converte o conteúdo CSV em JSON","instanceIdentifier":"a1aeef23-7f86-3d39-815f-68c417d6decb"},"labelIndex":1,"zIndex":0,"selectedRelationships":["Jurassic"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":["org.apache.nifi.prioritizer.FirstInFirstOutPrioritizer"],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"dd2032b0-b8aa-3328-ae90-043288002532"},{"identifier":"0766dd81-2eb8-3ed0-a733-85149d903621","instanceIdentifier":"53538d05-fa26-35c4-7d60-6c36cd2409c5","name":"","source":{"id":"8a758917-c899-35e9-918d-69a913bb700e","type":"PROCESSOR","groupId":"dd2032b0-b8aa-3328-ae90-043288002532","name":"MergeContent","comments":"Faz a concatenação dos arquivos JSONs em um único array JSON","instanceIdentifier":"9ea38f5f-45c6-3f9f-75a2-09d72147d5b8"},"destination":{"id":"b6a784d3-73b3-370b-b0d7-5d2b9c271066","type":"PROCESSOR","groupId":"dd2032b0-b8aa-3328-ae90-043288002532","name":"UpdateAttribute","comments":"Renomear o nome do filename","instanceIdentifier":"2d510082-f5fc-3bfd-2f83-f3050aa18aae"},"labelIndex":1,"zIndex":0,"selectedRelationships":["merged"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"dd2032b0-b8aa-3328-ae90-043288002532"},{"identifier":"449391a8-0261-3805-9a26-0dbc487ad45b","instanceIdentifier":"9caa8d1e-2409-3265-bae0-267bdf572ed0","name":"","source":{"id":"887e9a6d-aca0-3c07-b998-ff979e6588f0","type":"PROCESSOR","groupId":"dd2032b0-b8aa-3328-ae90-043288002532","name":"RouteOnContent","comments":"Faz rotas distintas para dinossauros do período Jurássico e Cretáceo","instanceIdentifier":"6a9553ed-e92a-3afc-ea18-f3dc73f26f66"},"destination":{"id":"53dea2c4-90a2-344d-abcc-8397c66c4301","type":"PROCESSOR","groupId":"dd2032b0-b8aa-3328-ae90-043288002532","name":"ConvertRecord","comments":"Converte o conteúdo CSV em JSON","instanceIdentifier":"685511f2-6bf0-3dbd-2036-32c8513a9980"},"labelIndex":1,"zIndex":0,"selectedRelationships":["Cretaceous"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"dd2032b0-b8aa-3328-ae90-043288002532"},{"identifier":"23549383-5f59-3c8d-b4ed-4ed4a14a0d90","instanceIdentifier":"145c10ff-8fd1-37f3-c6ab-f0e91a936e3e","name":"","source":{"id":"17761c7f-891c-3de1-9643-f8c4784b0013","type":"PROCESSOR","groupId":"dd2032b0-b8aa-3328-ae90-043288002532","name":"ReplaceText","comments":"Processor para adicionar um emojipedia de \"carne com osso\" para os dinossauros carnívoros","instanceIdentifier":"46504f49-b983-3ca2-faa2-5c9c29f33a92"},"destination":{"id":"a7e9af1f-c91b-3f28-b410-35fbb171a020","type":"PROCESSOR","groupId":"dd2032b0-b8aa-3328-ae90-043288002532","name":"SplitText","comments":"Divide o arquivo linha por linha mantendo o cabeçalho","instanceIdentifier":"a14cf07e-0377-3449-dbf8-b98fde04f733"},"labelIndex":1,"zIndex":0,"selectedRelationships":["success"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"dd2032b0-b8aa-3328-ae90-043288002532"},{"identifier":"b11de9e2-be07-340c-9128-1932a16175d0","instanceIdentifier":"2b0e646a-c962-3b87-6083-047a99ea2699","name":"","source":{"id":"b92f87d6-adbb-3843-a128-55cc1ba26531","type":"PROCESSOR","groupId":"dd2032b0-b8aa-3328-ae90-043288002532","name":"UpdateAttribute","comments":"Renomear o nome do filename","instanceIdentifier":"8b335817-e9b5-392e-5b64-22fe82bcc533"},"destination":{"id":"17761c7f-891c-3de1-9643-f8c4784b0013","type":"PROCESSOR","groupId":"dd2032b0-b8aa-3328-ae90-043288002532","name":"ReplaceText","comments":"Processor para adicionar um emojipedia de \"carne com osso\" para os dinossauros carnívoros","instanceIdentifier":"46504f49-b983-3ca2-faa2-5c9c29f33a92"},"labelIndex":1,"zIndex":0,"selectedRelationships":["success"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"dd2032b0-b8aa-3328-ae90-043288002532"},{"identifier":"cf244ef3-a874-35cd-8d5a-048f3381a0ed","instanceIdentifier":"120c82c8-562f-30fb-892d-34089102292c","name":"","source":{"id":"a7e9af1f-c91b-3f28-b410-35fbb171a020","type":"PROCESSOR","groupId":"dd2032b0-b8aa-3328-ae90-043288002532","name":"SplitText","comments":"Divide o arquivo linha por linha mantendo o cabeçalho","instanceIdentifier":"a14cf07e-0377-3449-dbf8-b98fde04f733"},"destination":{"id":"887e9a6d-aca0-3c07-b998-ff979e6588f0","type":"PROCESSOR","groupId":"dd2032b0-b8aa-3328-ae90-043288002532","name":"RouteOnContent","comments":"Faz rotas distintas para dinossauros do período Jurássico e Cretáceo","instanceIdentifier":"6a9553ed-e92a-3afc-ea18-f3dc73f26f66"},"labelIndex":1,"zIndex":0,"selectedRelationships":["splits"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"dd2032b0-b8aa-3328-ae90-043288002532"},{"identifier":"27d89afb-e49a-39a2-a6d5-aaa7e114e2c5","instanceIdentifier":"8021fcbc-e4b3-3cf7-0a3a-21ef5bbd925b","name":"","source":{"id":"53dea2c4-90a2-344d-abcc-8397c66c4301","type":"PROCESSOR","groupId":"dd2032b0-b8aa-3328-ae90-043288002532","name":"ConvertRecord","comments":"Converte o conteúdo CSV em JSON","instanceIdentifier":"685511f2-6bf0-3dbd-2036-32c8513a9980"},"destination":{"id":"c60ddac7-1f52-34ff-9088-e2516a298db9","type":"FUNNEL","groupId":"dd2032b0-b8aa-3328-ae90-043288002532","name":"Funnel","comments":"","instanceIdentifier":"75532c59-eaa9-3a24-b965-1d15639a5bbc"},"labelIndex":1,"zIndex":0,"selectedRelationships":["success"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[{"x":432.0,"y":1248.0}],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"dd2032b0-b8aa-3328-ae90-043288002532"},{"identifier":"fad7a0d8-4ed3-3dfc-97df-5a9e21a804df","instanceIdentifier":"9765b1e9-7929-3e8a-29a4-76a624c4d841","name":"","source":{"id":"c60ddac7-1f52-34ff-9088-e2516a298db9","type":"FUNNEL","groupId":"dd2032b0-b8aa-3328-ae90-043288002532","name":"Funnel","comments":"","instanceIdentifier":"75532c59-eaa9-3a24-b965-1d15639a5bbc"},"destination":{"id":"8a758917-c899-35e9-918d-69a913bb700e","type":"PROCESSOR","groupId":"dd2032b0-b8aa-3328-ae90-043288002532","name":"MergeContent","comments":"Faz a concatenação dos arquivos JSONs em um único array JSON","instanceIdentifier":"9ea38f5f-45c6-3f9f-75a2-09d72147d5b8"},"labelIndex":1,"zIndex":0,"selectedRelationships":[""],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"dd2032b0-b8aa-3328-ae90-043288002532"},{"identifier":"6b97c4dc-3d4f-372f-92bb-61ebd80d978f","instanceIdentifier":"27fd595b-50b2-33d9-1d96-feac383efe3b","name":"","source":{"id":"b6a784d3-73b3-370b-b0d7-5d2b9c271066","type":"PROCESSOR","groupId":"dd2032b0-b8aa-3328-ae90-043288002532","name":"UpdateAttribute","comments":"Renomear o nome do filename","instanceIdentifier":"2d510082-f5fc-3bfd-2f83-f3050aa18aae"},"destination":{"id":"9ac31a80-f1e4-3e7b-8ac4-fc86fb1a4843","type":"PROCESSOR","groupId":"dd2032b0-b8aa-3328-ae90-043288002532","name":"PutFile","comments":"Salva o arquivo em disco","instanceIdentifier":"f3c11cf7-e96f-3364-cde0-e2fa7474e4c9"},"labelIndex":1,"zIndex":0,"selectedRelationships":["success"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"dd2032b0-b8aa-3328-ae90-043288002532"},{"identifier":"2a51a13e-9243-3f10-8165-a89d896016e3","instanceIdentifier":"4dbd510b-a400-3cdb-a733-6c268571e199","name":"","source":{"id":"d2ab5dc8-4e15-3dd4-a76b-f459f960dd78","type":"PROCESSOR","groupId":"dd2032b0-b8aa-3328-ae90-043288002532","name":"InvokeHTTP","comments":"Faz a baixa do arquivo CSV compactado.","instanceIdentifier":"681a164a-ae7b-322e-4ece-6b74a81d78d1"},"destination":{"id":"2641f0af-344a-3a78-9ce7-ce88f8f2d241","type":"PROCESSOR","groupId":"dd2032b0-b8aa-3328-ae90-043288002532","name":"UnpackContent","comments":"Descompacta o arquivo que está no flowfile","instanceIdentifier":"2b0b3914-2e25-3206-8d2d-cd09c0e77fb9"},"labelIndex":1,"zIndex":0,"selectedRelationships":["Response"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"dd2032b0-b8aa-3328-ae90-043288002532"},{"identifier":"01b3d490-56a9-3c25-bc08-8ebc051209da","instanceIdentifier":"9aaa591d-c8e0-38f3-d0a7-56e9432bdea4","name":"","source":{"id":"673476e4-3e48-322b-b470-2ef85a88fe2b","type":"PROCESSOR","groupId":"dd2032b0-b8aa-3328-ae90-043288002532","name":"ConvertRecord","comments":"Converte o conteúdo CSV em JSON","instanceIdentifier":"a1aeef23-7f86-3d39-815f-68c417d6decb"},"destination":{"id":"c60ddac7-1f52-34ff-9088-e2516a298db9","type":"FUNNEL","groupId":"dd2032b0-b8aa-3328-ae90-043288002532","name":"Funnel","comments":"","instanceIdentifier":"75532c59-eaa9-3a24-b965-1d15639a5bbc"},"labelIndex":1,"zIndex":0,"selectedRelationships":["success"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[{"x":-176.0,"y":1248.0}],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"dd2032b0-b8aa-3328-ae90-043288002532"},{"identifier":"9c48f6cf-aff7-323a-8fd7-6ba2886df416","instanceIdentifier":"4400a9e9-2605-3b28-efa2-17ad0a6b6af9","name":"","source":{"id":"2641f0af-344a-3a78-9ce7-ce88f8f2d241","type":"PROCESSOR","groupId":"dd2032b0-b8aa-3328-ae90-043288002532","name":"UnpackContent","comments":"Descompacta o arquivo que está no flowfile","instanceIdentifier":"2b0b3914-2e25-3206-8d2d-cd09c0e77fb9"},"destination":{"id":"b92f87d6-adbb-3843-a128-55cc1ba26531","type":"PROCESSOR","groupId":"dd2032b0-b8aa-3328-ae90-043288002532","name":"UpdateAttribute","comments":"Renomear o nome do filename","instanceIdentifier":"8b335817-e9b5-392e-5b64-22fe82bcc533"},"labelIndex":0,"zIndex":0,"selectedRelationships":["success"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"dd2032b0-b8aa-3328-ae90-043288002532"}],"labels":[{"identifier":"c4414632-daee-3ad4-a063-a4651b6c830c","instanceIdentifier":"39edf4b9-1da4-3015-6c44-a665e48d318c","position":{"x":-48.0,"y":-216.0},"label":"Início Fluxo","zIndex":0,"width":352.0,"height":40.0,"style":{"background-color":"#052beb","font-size":"14px"},"componentType":"LABEL","groupIdentifier":"dd2032b0-b8aa-3328-ae90-043288002532"}],"funnels":[{"identifier":"c60ddac7-1f52-34ff-9088-e2516a298db9","instanceIdentifier":"75532c59-eaa9-3a24-b965-1d15639a5bbc","position":{"x":104.0,"y":1224.0},"componentType":"FUNNEL","groupIdentifier":"dd2032b0-b8aa-3328-ae90-043288002532"}],"controllerServices":[{"identifier":"07ed5f60-09e0-33fe-a57a-b0271d06530a","instanceIdentifier":"4f9538a2-a2ee-3f2b-0681-2abcff0b1951","name":"JsonRecordSetWriter","comments":"","type":"org.apache.nifi.json.JsonRecordSetWriter","bundle":{"group":"org.apache.nifi","artifact":"nifi-record-serialization-services-nar","version":"2.0.0-M4"},"properties":{"schema-reference-reader":null,"schema-branch":null,"Allow Scientific Notation":"false","compression-level":"1","schema-cache":null,"Timestamp Format":null,"Date Format":null,"Pretty Print JSON":"false","compression-format":"none","Schema Write Strategy":"no-schema","suppress-nulls":"never-suppress","output-grouping":"output-oneline","schema-name":"${schema.name}","schema-registry":null,"Time Format":null,"schema-access-strategy":"inherit-record-schema","schema-version":null,"schema-text":"${avro.schema}","Schema Reference Writer":null},"propertyDescriptors":{"schema-reference-reader":{"name":"schema-reference-reader","displayName":"Schema Reference Reader","identifiesControllerService":true,"sensitive":false,"dynamic":false},"schema-branch":{"name":"schema-branch","displayName":"Schema Branch","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Allow Scientific Notation":{"name":"Allow Scientific Notation","displayName":"Allow Scientific Notation","identifiesControllerService":false,"sensitive":false,"dynamic":false},"compression-level":{"name":"compression-level","displayName":"Compression Level","identifiesControllerService":false,"sensitive":false,"dynamic":false},"schema-cache":{"name":"schema-cache","displayName":"Schema Cache","identifiesControllerService":true,"sensitive":false,"dynamic":false},"Timestamp Format":{"name":"Timestamp Format","displayName":"Timestamp Format","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Date Format":{"name":"Date Format","displayName":"Date Format","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Pretty Print JSON":{"name":"Pretty Print JSON","displayName":"Pretty Print JSON","identifiesControllerService":false,"sensitive":false,"dynamic":false},"compression-format":{"name":"compression-format","displayName":"Compression Format","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Schema Write Strategy":{"name":"Schema Write Strategy","displayName":"Schema Write Strategy","identifiesControllerService":false,"sensitive":false,"dynamic":false},"suppress-nulls":{"name":"suppress-nulls","displayName":"Suppress Null Values","identifiesControllerService":false,"sensitive":false,"dynamic":false},"output-grouping":{"name":"output-grouping","displayName":"Output Grouping","identifiesControllerService":false,"sensitive":false,"dynamic":false},"schema-name":{"name":"schema-name","displayName":"Schema Name","identifiesControllerService":false,"sensitive":false,"dynamic":false},"schema-registry":{"name":"schema-registry","displayName":"Schema Registry","identifiesControllerService":true,"sensitive":false,"dynamic":false},"Time Format":{"name":"Time Format","displayName":"Time Format","identifiesControllerService":false,"sensitive":false,"dynamic":false},"schema-access-strategy":{"name":"schema-access-strategy","displayName":"Schema Access Strategy","identifiesControllerService":false,"sensitive":false,"dynamic":false},"schema-version":{"name":"schema-version","displayName":"Schema Version","identifiesControllerService":false,"sensitive":false,"dynamic":false},"schema-text":{"name":"schema-text","displayName":"Schema Text","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Schema Reference Writer":{"name":"Schema Reference Writer","displayName":"Schema Reference Writer","identifiesControllerService":true,"sensitive":false,"dynamic":false}},"controllerServiceApis":[{"type":"org.apache.nifi.serialization.RecordSetWriterFactory","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-services-api-nar","version":"2.0.0-M4"}}],"scheduledState":"DISABLED","bulletinLevel":"WARN","componentType":"CONTROLLER_SERVICE","groupIdentifier":"dd2032b0-b8aa-3328-ae90-043288002532"},{"identifier":"6ba03b8e-9b54-376f-9ae6-011cb5d264e7","instanceIdentifier":"86d81508-9812-38d0-a297-634e33300979","name":"CSVReader","comments":"","type":"org.apache.nifi.csv.CSVReader","bundle":{"group":"org.apache.nifi","artifact":"nifi-record-serialization-services-nar","version":"2.0.0-M4"},"properties":{"schema-reference-reader":null,"ignore-csv-header":"false","schema-branch":null,"Trim double quote":"true","CSV Format":"custom","Quote Character":"\"","csvutils-allow-duplicate-header-names":"true","Value Separator":",","Record Separator":"\\n","Timestamp Format":null,"Escape Character":"\\","Date Format":null,"Null String":null,"Skip Header Line":"false","Trim Fields":"true","schema-name":"${schema.name}","schema-registry":null,"csv-reader-csv-parser":"commons-csv","Time Format":null,"Comment Marker":null,"schema-access-strategy":"infer-schema","schema-version":null,"csvutils-character-set":"UTF-8","schema-text":"${avro.schema}"},"propertyDescriptors":{"schema-reference-reader":{"name":"schema-reference-reader","displayName":"Schema Reference Reader","identifiesControllerService":true,"sensitive":false,"dynamic":false},"ignore-csv-header":{"name":"ignore-csv-header","displayName":"Ignore CSV Header Column Names","identifiesControllerService":false,"sensitive":false,"dynamic":false},"schema-branch":{"name":"schema-branch","displayName":"Schema Branch","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Trim double quote":{"name":"Trim double quote","displayName":"Trim double quote","identifiesControllerService":false,"sensitive":false,"dynamic":false},"CSV Format":{"name":"CSV Format","displayName":"CSV Format","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Quote Character":{"name":"Quote Character","displayName":"Quote Character","identifiesControllerService":false,"sensitive":false,"dynamic":false},"csvutils-allow-duplicate-header-names":{"name":"csvutils-allow-duplicate-header-names","displayName":"Allow Duplicate Header Names","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Value Separator":{"name":"Value Separator","displayName":"Value Separator","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Record Separator":{"name":"Record Separator","displayName":"Record Separator","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Timestamp Format":{"name":"Timestamp Format","displayName":"Timestamp Format","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Escape Character":{"name":"Escape Character","displayName":"Escape Character","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Date Format":{"name":"Date Format","displayName":"Date Format","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Null String":{"name":"Null String","displayName":"Null String","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Skip Header Line":{"name":"Skip Header Line","displayName":"Treat First Line as Header","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Trim Fields":{"name":"Trim Fields","displayName":"Trim Fields","identifiesControllerService":false,"sensitive":false,"dynamic":false},"schema-name":{"name":"schema-name","displayName":"Schema Name","identifiesControllerService":false,"sensitive":false,"dynamic":false},"schema-registry":{"name":"schema-registry","displayName":"Schema Registry","identifiesControllerService":true,"sensitive":false,"dynamic":false},"csv-reader-csv-parser":{"name":"csv-reader-csv-parser","displayName":"CSV Parser","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Time Format":{"name":"Time Format","displayName":"Time Format","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Comment Marker":{"name":"Comment Marker","displayName":"Comment Marker","identifiesControllerService":false,"sensitive":false,"dynamic":false},"schema-access-strategy":{"name":"schema-access-strategy","displayName":"Schema Access Strategy","identifiesControllerService":false,"sensitive":false,"dynamic":false},"schema-version":{"name":"schema-version","displayName":"Schema Version","identifiesControllerService":false,"sensitive":false,"dynamic":false},"csvutils-character-set":{"name":"csvutils-character-set","displayName":"Character Set","identifiesControllerService":false,"sensitive":false,"dynamic":false},"schema-text":{"name":"schema-text","displayName":"Schema Text","identifiesControllerService":false,"sensitive":false,"dynamic":false}},"controllerServiceApis":[{"type":"org.apache.nifi.serialization.RecordReaderFactory","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-services-api-nar","version":"2.0.0-M4"}}],"scheduledState":"DISABLED","bulletinLevel":"WARN","componentType":"CONTROLLER_SERVICE","groupIdentifier":"dd2032b0-b8aa-3328-ae90-043288002532"}],"parameterContextName":"Workshop 2","defaultFlowFileExpiration":"0 sec","defaultBackPressureObjectThreshold":10000,"defaultBackPressureDataSizeThreshold":"1 GB","scheduledState":"ENABLED","executionEngine":"INHERITED","maxConcurrentTasks":1,"statelessFlowTimeout":"1 min","flowFileConcurrency":"UNBOUNDED","flowFileOutboundPolicy":"STREAM_WHEN_AVAILABLE","componentType":"PROCESS_GROUP","groupIdentifier":"6694ab51-dc3d-3850-80e6-48a52b28418d"},{"identifier":"3ae4c81f-77f1-3432-be36-5f85baf0e637","instanceIdentifier":"89f2c46f-506c-3edf-682d-1c7121cc02bc","name":"Script Python","comments":"","position":{"x":-584.0,"y":480.0},"processGroups":[],"remoteProcessGroups":[],"processors":[{"identifier":"13454cc3-fdea-3129-a542-0f1b62f71057","instanceIdentifier":"fc12d713-9e05-3467-a52e-84cb2e560326","name":"GenerateFlowFile","comments":"Inicia o processo.","position":{"x":-656.0,"y":176.0},"type":"org.apache.nifi.processors.standard.GenerateFlowFile","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"2.0.0-M4"},"properties":{"character-set":"UTF-8","File Size":"0B","mime-type":null,"generate-ff-custom-text":null,"Batch Size":"1","Unique FlowFiles":"false","Data Format":"Text"},"propertyDescriptors":{"character-set":{"name":"character-set","displayName":"Character Set","identifiesControllerService":false,"sensitive":false,"dynamic":false},"File Size":{"name":"File Size","displayName":"File Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"mime-type":{"name":"mime-type","displayName":"Mime Type","identifiesControllerService":false,"sensitive":false,"dynamic":false},"generate-ff-custom-text":{"name":"generate-ff-custom-text","displayName":"Custom Text","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Batch Size":{"name":"Batch Size","displayName":"Batch Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Unique FlowFiles":{"name":"Unique FlowFiles","displayName":"Unique FlowFiles","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Data Format":{"name":"Data Format","displayName":"Data Format","identifiesControllerService":false,"sensitive":false,"dynamic":false}},"style":{},"schedulingPeriod":"1 min","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":[],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"3ae4c81f-77f1-3432-be36-5f85baf0e637"},{"identifier":"dc7824ac-eac9-3267-838d-6c90c9e655ce","instanceIdentifier":"8d7feb0f-77cd-3619-3fea-4c75ec7a1ce3","name":"GetFile","comments":"Faz a coleta do arquivo super-trunfo-dinossaurs-2.csv na pasta files/input","position":{"x":-664.0,"y":648.0},"type":"org.apache.nifi.processors.standard.GetFile","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"2.0.0-M4"},"properties":{"Keep Source File":"true","Minimum File Age":"0 sec","Polling Interval":"0 sec","Input Directory":"/opt/nifi/nifi-current/files/input","Maximum File Age":null,"Batch Size":"10","Maximum File Size":null,"Minimum File Size":"0 B","Ignore Hidden Files":"true","Recurse Subdirectories":"false","File Filter":".*super-trunfo-dinossaurs-2.csv","Path Filter":null},"propertyDescriptors":{"Keep Source File":{"name":"Keep Source File","displayName":"Keep Source File","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Minimum File Age":{"name":"Minimum File Age","displayName":"Minimum File Age","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Polling Interval":{"name":"Polling Interval","displayName":"Polling Interval","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Input Directory":{"name":"Input Directory","displayName":"Input Directory","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Maximum File Age":{"name":"Maximum File Age","displayName":"Maximum File Age","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Batch Size":{"name":"Batch Size","displayName":"Batch Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Maximum File Size":{"name":"Maximum File Size","displayName":"Maximum File Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Minimum File Size":{"name":"Minimum File Size","displayName":"Minimum File Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Ignore Hidden Files":{"name":"Ignore Hidden Files","displayName":"Ignore Hidden Files","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Recurse Subdirectories":{"name":"Recurse Subdirectories","displayName":"Recurse Subdirectories","identifiesControllerService":false,"sensitive":false,"dynamic":false},"File Filter":{"name":"File Filter","displayName":"File Filter","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Path Filter":{"name":"Path Filter","displayName":"Path Filter","identifiesControllerService":false,"sensitive":false,"dynamic":false}},"style":{},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":[],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"3ae4c81f-77f1-3432-be36-5f85baf0e637"},{"identifier":"a3350467-11fc-3c53-9805-cd7435d99b83","instanceIdentifier":"a1ec0083-c327-3cbe-1b0d-f2859d09c2ed","name":"ExecuteStreamCommand","comments":"Executa o script python renameColumnsDuckdb.py para colocar todos as colunas em maiúsculo.\nPega o arquivo super-trunfo-dinossaurs-2-duckdb.parquet da pasta files/input e salva no pasta files/output.\nGERA RETORNO NO FLOWFILE, PORÉM VAZIO PORQUE O SCRIPT NÃO UTILIZA O \"STDIN/STDOUT\".\nApenas didático.","position":{"x":-40.0,"y":176.0},"type":"org.apache.nifi.processors.standard.ExecuteStreamCommand","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"2.0.0-M4"},"properties":{"argumentsStrategy":"Command Arguments Property","Max Attribute Length":"256","Output MIME Type":null,"Working Directory":null,"Command Path":"/usr/bin/python","Output Destination Attribute":null,"Argument Delimiter":";","Ignore STDIN":"false","Command Arguments":"/opt/nifi/nifi-current/python_scripts/renameColumnsDuckdb.py"},"propertyDescriptors":{"argumentsStrategy":{"name":"argumentsStrategy","displayName":"Command Arguments Strategy","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Max Attribute Length":{"name":"Max Attribute Length","displayName":"Max Attribute Length","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Output MIME Type":{"name":"Output MIME Type","displayName":"Output MIME Type","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Working Directory":{"name":"Working Directory","displayName":"Working Directory","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Command Path":{"name":"Command Path","displayName":"Command Path","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Output Destination Attribute":{"name":"Output Destination Attribute","displayName":"Output Destination Attribute","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Argument Delimiter":{"name":"Argument Delimiter","displayName":"Argument Delimiter","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Ignore STDIN":{"name":"Ignore STDIN","displayName":"Ignore STDIN","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Command Arguments":{"name":"Command Arguments","displayName":"Command Arguments","identifiesControllerService":false,"sensitive":false,"dynamic":false}},"style":{},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":[],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"3ae4c81f-77f1-3432-be36-5f85baf0e637"},{"identifier":"4ef5bd3d-c756-31ff-b5bd-e3c44661b91a","instanceIdentifier":"656fe282-34c3-3c55-223e-128b9c131e9c","name":"UpdateAttribute","comments":"Renomeia o nome do arquivo.","position":{"x":552.0,"y":648.0},"type":"org.apache.nifi.processors.attributes.UpdateAttribute","bundle":{"group":"org.apache.nifi","artifact":"nifi-update-attribute-nar","version":"2.0.0-M4"},"properties":{"Delete Attributes Expression":null,"filename":"super-trunfo-dinossaurs-2-python.parquet","Store State":"Do not store state","canonical-value-lookup-cache-size":"100","Stateful Variables Initial Value":null},"propertyDescriptors":{"Delete Attributes Expression":{"name":"Delete Attributes Expression","displayName":"Delete Attributes Expression","identifiesControllerService":false,"sensitive":false,"dynamic":false},"filename":{"name":"filename","displayName":"filename","identifiesControllerService":false,"sensitive":false,"dynamic":true},"Store State":{"name":"Store State","displayName":"Store State","identifiesControllerService":false,"sensitive":false,"dynamic":false},"canonical-value-lookup-cache-size":{"name":"canonical-value-lookup-cache-size","displayName":"Cache Value Lookup Cache Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Stateful Variables Initial Value":{"name":"Stateful Variables Initial Value","displayName":"Stateful Variables Initial Value","identifiesControllerService":false,"sensitive":false,"dynamic":false}},"style":{},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":25,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":[],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"3ae4c81f-77f1-3432-be36-5f85baf0e637"},{"identifier":"1d345344-7f51-33e8-93df-26b3d14cb6f5","instanceIdentifier":"1d70c3bf-6a62-34a0-19d9-b66528ce40ba","name":"ExecuteStreamCommand","comments":"Executa o script python CSVToParquetReturn.py com retorno de conteúdo no flowfile.","position":{"x":-56.0,"y":648.0},"type":"org.apache.nifi.processors.standard.ExecuteStreamCommand","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"2.0.0-M4"},"properties":{"argumentsStrategy":"Command Arguments Property","Max Attribute Length":"256","Output MIME Type":"application/vnd.apache.parquet","Working Directory":null,"Command Path":"/usr/bin/python","Output Destination Attribute":null,"Argument Delimiter":";","Ignore STDIN":"false","Command Arguments":"/opt/nifi/nifi-current/python_scripts/CSVToParquetReturn.py"},"propertyDescriptors":{"argumentsStrategy":{"name":"argumentsStrategy","displayName":"Command Arguments Strategy","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Max Attribute Length":{"name":"Max Attribute Length","displayName":"Max Attribute Length","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Output MIME Type":{"name":"Output MIME Type","displayName":"Output MIME Type","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Working Directory":{"name":"Working Directory","displayName":"Working Directory","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Command Path":{"name":"Command Path","displayName":"Command Path","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Output Destination Attribute":{"name":"Output Destination Attribute","displayName":"Output Destination Attribute","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Argument Delimiter":{"name":"Argument Delimiter","displayName":"Argument Delimiter","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Ignore STDIN":{"name":"Ignore STDIN","displayName":"Ignore STDIN","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Command Arguments":{"name":"Command Arguments","displayName":"Command Arguments","identifiesControllerService":false,"sensitive":false,"dynamic":false}},"style":{},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["original"],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"3ae4c81f-77f1-3432-be36-5f85baf0e637"},{"identifier":"93576292-8be6-3c70-a922-64e61a0618cd","instanceIdentifier":"5f40df4e-de4d-3aa0-83e2-ff92f27b43e7","name":"PutFile","comments":"Salva o arquivo na pasta files/output.","position":{"x":1160.0,"y":648.0},"type":"org.apache.nifi.processors.standard.PutFile","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"2.0.0-M4"},"properties":{"Group":null,"Owner":null,"Create Missing Directories":"true","Permissions":null,"Maximum File Count":null,"Last Modified Time":null,"Directory":"/opt/nifi/nifi-current/files/output","Conflict Resolution Strategy":"replace"},"propertyDescriptors":{"Group":{"name":"Group","displayName":"Group","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Owner":{"name":"Owner","displayName":"Owner","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Create Missing Directories":{"name":"Create Missing Directories","displayName":"Create Missing Directories","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Permissions":{"name":"Permissions","displayName":"Permissions","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Maximum File Count":{"name":"Maximum File Count","displayName":"Maximum File Count","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Last Modified Time":{"name":"Last Modified Time","displayName":"Last Modified Time","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Directory":{"name":"Directory","displayName":"Directory","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Conflict Resolution Strategy":{"name":"Conflict Resolution Strategy","displayName":"Conflict Resolution Strategy","identifiesControllerService":false,"sensitive":false,"dynamic":false}},"style":{},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["success","failure"],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"3ae4c81f-77f1-3432-be36-5f85baf0e637"},{"identifier":"f1e374e7-8185-3206-811b-50bb2825b455","instanceIdentifier":"d9b517d9-f0a3-33f9-b044-e505b2b28ac1","name":"ExecuteProcess","comments":"Executa o script python renameColumnsDuckdb.py para colocar todos as colunas em maiúsculo.\nPega o arquivo super-trunfo-dinossaurs-2-duckdb.parquet da pasta files/input e salva no pasta files/output.\nNÃO GERA RETORNO NO FLOWFILE.","position":{"x":-656.0,"y":-48.0},"type":"org.apache.nifi.processors.standard.ExecuteProcess","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"2.0.0-M4"},"properties":{"Command":"python3","Redirect Error Stream":"false","Working Directory":null,"Output MIME type":null,"Argument Delimiter":" ","Batch Duration":null,"Command Arguments":"/opt/nifi/nifi-current/python_scripts/renameColumnsDuckdb.py"},"propertyDescriptors":{"Command":{"name":"Command","displayName":"Command","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Redirect Error Stream":{"name":"Redirect Error Stream","displayName":"Redirect Error Stream","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Working Directory":{"name":"Working Directory","displayName":"Working Directory","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Output MIME type":{"name":"Output MIME type","displayName":"Output MIME Type","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Argument Delimiter":{"name":"Argument Delimiter","displayName":"Argument Delimiter","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Batch Duration":{"name":"Batch Duration","displayName":"Batch Duration","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Command Arguments":{"name":"Command Arguments","displayName":"Command Arguments","identifiesControllerService":false,"sensitive":false,"dynamic":false}},"style":{},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":[],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"3ae4c81f-77f1-3432-be36-5f85baf0e637"}],"inputPorts":[],"outputPorts":[],"connections":[{"identifier":"16a4c9e8-a349-3967-bdc0-1f642c3293d7","instanceIdentifier":"a51e13ee-e85c-3316-83d5-d4ebfe43aa7f","name":"","source":{"id":"dc7824ac-eac9-3267-838d-6c90c9e655ce","type":"PROCESSOR","groupId":"3ae4c81f-77f1-3432-be36-5f85baf0e637","name":"GetFile","comments":"Faz a coleta do arquivo super-trunfo-dinossaurs-2.csv na pasta files/input","instanceIdentifier":"8d7feb0f-77cd-3619-3fea-4c75ec7a1ce3"},"destination":{"id":"1d345344-7f51-33e8-93df-26b3d14cb6f5","type":"PROCESSOR","groupId":"3ae4c81f-77f1-3432-be36-5f85baf0e637","name":"ExecuteStreamCommand","comments":"Executa o script python CSVToParquetReturn.py com retorno de conteúdo no flowfile.","instanceIdentifier":"1d70c3bf-6a62-34a0-19d9-b66528ce40ba"},"labelIndex":0,"zIndex":0,"selectedRelationships":["success"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"3ae4c81f-77f1-3432-be36-5f85baf0e637"},{"identifier":"7a8c5470-ce45-3901-bf47-66c1fe6de8a4","instanceIdentifier":"c8b230b6-1886-3dee-ed2e-58906a04b309","name":"","source":{"id":"1d345344-7f51-33e8-93df-26b3d14cb6f5","type":"PROCESSOR","groupId":"3ae4c81f-77f1-3432-be36-5f85baf0e637","name":"ExecuteStreamCommand","comments":"Executa o script python CSVToParquetReturn.py com retorno de conteúdo no flowfile.","instanceIdentifier":"1d70c3bf-6a62-34a0-19d9-b66528ce40ba"},"destination":{"id":"4ef5bd3d-c756-31ff-b5bd-e3c44661b91a","type":"PROCESSOR","groupId":"3ae4c81f-77f1-3432-be36-5f85baf0e637","name":"UpdateAttribute","comments":"Renomeia o nome do arquivo.","instanceIdentifier":"656fe282-34c3-3c55-223e-128b9c131e9c"},"labelIndex":0,"zIndex":0,"selectedRelationships":["output stream","nonzero status"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"3ae4c81f-77f1-3432-be36-5f85baf0e637"},{"identifier":"145856c7-cc80-3abb-b960-c5f2c77ebef8","instanceIdentifier":"73810e9b-9224-34c9-0112-9f5180f25856","name":"","source":{"id":"a3350467-11fc-3c53-9805-cd7435d99b83","type":"PROCESSOR","groupId":"3ae4c81f-77f1-3432-be36-5f85baf0e637","name":"ExecuteStreamCommand","comments":"Executa o script python renameColumnsDuckdb.py para colocar todos as colunas em maiúsculo.\nPega o arquivo super-trunfo-dinossaurs-2-duckdb.parquet da pasta files/input e salva no pasta files/output.\nGERA RETORNO NO FLOWFILE, PORÉM VAZIO PORQUE O SCRIPT NÃO UTILIZA O \"STDIN/STDOUT\".\nApenas didático.","instanceIdentifier":"a1ec0083-c327-3cbe-1b0d-f2859d09c2ed"},"destination":{"id":"507d083a-732a-37df-bec0-d556be4953a6","type":"FUNNEL","groupId":"3ae4c81f-77f1-3432-be36-5f85baf0e637","name":"Funnel","comments":"","instanceIdentifier":"528e3df4-8d53-37fc-6b98-80287530dbe1"},"labelIndex":0,"zIndex":0,"selectedRelationships":["original"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"3ae4c81f-77f1-3432-be36-5f85baf0e637"},{"identifier":"3620a980-d8a0-3016-a0d7-267911602518","instanceIdentifier":"08ee1ef2-4c94-33d0-e5c4-ab8c6124e9f4","name":"","source":{"id":"4ef5bd3d-c756-31ff-b5bd-e3c44661b91a","type":"PROCESSOR","groupId":"3ae4c81f-77f1-3432-be36-5f85baf0e637","name":"UpdateAttribute","comments":"Renomeia o nome do arquivo.","instanceIdentifier":"656fe282-34c3-3c55-223e-128b9c131e9c"},"destination":{"id":"93576292-8be6-3c70-a922-64e61a0618cd","type":"PROCESSOR","groupId":"3ae4c81f-77f1-3432-be36-5f85baf0e637","name":"PutFile","comments":"Salva o arquivo na pasta files/output.","instanceIdentifier":"5f40df4e-de4d-3aa0-83e2-ff92f27b43e7"},"labelIndex":0,"zIndex":0,"selectedRelationships":["success"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"3ae4c81f-77f1-3432-be36-5f85baf0e637"},{"identifier":"cfcf9bfc-f320-3033-b0c9-6329297a5182","instanceIdentifier":"f1b25a58-60b6-31e1-3a86-73fa55a91569","name":"","source":{"id":"a3350467-11fc-3c53-9805-cd7435d99b83","type":"PROCESSOR","groupId":"3ae4c81f-77f1-3432-be36-5f85baf0e637","name":"ExecuteStreamCommand","comments":"Executa o script python renameColumnsDuckdb.py para colocar todos as colunas em maiúsculo.\nPega o arquivo super-trunfo-dinossaurs-2-duckdb.parquet da pasta files/input e salva no pasta files/output.\nGERA RETORNO NO FLOWFILE, PORÉM VAZIO PORQUE O SCRIPT NÃO UTILIZA O \"STDIN/STDOUT\".\nApenas didático.","instanceIdentifier":"a1ec0083-c327-3cbe-1b0d-f2859d09c2ed"},"destination":{"id":"507d083a-732a-37df-bec0-d556be4953a6","type":"FUNNEL","groupId":"3ae4c81f-77f1-3432-be36-5f85baf0e637","name":"Funnel","comments":"","instanceIdentifier":"528e3df4-8d53-37fc-6b98-80287530dbe1"},"labelIndex":0,"zIndex":0,"selectedRelationships":["output stream"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[{"x":473.0511169433594,"y":327.32579040527344}],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"3ae4c81f-77f1-3432-be36-5f85baf0e637"},{"identifier":"b03d0836-20bb-36bf-a21f-0b1f0a4b016a","instanceIdentifier":"26bb3a70-c4d1-3653-da64-985440353130","name":"","source":{"id":"13454cc3-fdea-3129-a542-0f1b62f71057","type":"PROCESSOR","groupId":"3ae4c81f-77f1-3432-be36-5f85baf0e637","name":"GenerateFlowFile","comments":"Inicia o processo.","instanceIdentifier":"fc12d713-9e05-3467-a52e-84cb2e560326"},"destination":{"id":"a3350467-11fc-3c53-9805-cd7435d99b83","type":"PROCESSOR","groupId":"3ae4c81f-77f1-3432-be36-5f85baf0e637","name":"ExecuteStreamCommand","comments":"Executa o script python renameColumnsDuckdb.py para colocar todos as colunas em maiúsculo.\nPega o arquivo super-trunfo-dinossaurs-2-duckdb.parquet da pasta files/input e salva no pasta files/output.\nGERA RETORNO NO FLOWFILE, PORÉM VAZIO PORQUE O SCRIPT NÃO UTILIZA O \"STDIN/STDOUT\".\nApenas didático.","instanceIdentifier":"a1ec0083-c327-3cbe-1b0d-f2859d09c2ed"},"labelIndex":0,"zIndex":0,"selectedRelationships":["success"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"3ae4c81f-77f1-3432-be36-5f85baf0e637"},{"identifier":"51870a31-3f56-357c-b475-6cd3af8b1205","instanceIdentifier":"8afae0d6-25ea-3531-42a4-7d0d3957770d","name":"","source":{"id":"f1e374e7-8185-3206-811b-50bb2825b455","type":"PROCESSOR","groupId":"3ae4c81f-77f1-3432-be36-5f85baf0e637","name":"ExecuteProcess","comments":"Executa o script python renameColumnsDuckdb.py para colocar todos as colunas em maiúsculo.\nPega o arquivo super-trunfo-dinossaurs-2-duckdb.parquet da pasta files/input e salva no pasta files/output.\nNÃO GERA RETORNO NO FLOWFILE.","instanceIdentifier":"d9b517d9-f0a3-33f9-b044-e505b2b28ac1"},"destination":{"id":"84ef2961-a629-3591-9d9f-fea7c6607bb6","type":"FUNNEL","groupId":"3ae4c81f-77f1-3432-be36-5f85baf0e637","name":"Funnel","comments":"","instanceIdentifier":"6ba13dd2-b533-38eb-f0cf-3a14ce9fa6e1"},"labelIndex":0,"zIndex":0,"selectedRelationships":["success"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"3ae4c81f-77f1-3432-be36-5f85baf0e637"},{"identifier":"e6d2119e-ae15-36ee-8ce2-a3e63d7e95fc","instanceIdentifier":"f0ab0336-4720-3600-f986-ba119e9072a7","name":"","source":{"id":"a3350467-11fc-3c53-9805-cd7435d99b83","type":"PROCESSOR","groupId":"3ae4c81f-77f1-3432-be36-5f85baf0e637","name":"ExecuteStreamCommand","comments":"Executa o script python renameColumnsDuckdb.py para colocar todos as colunas em maiúsculo.\nPega o arquivo super-trunfo-dinossaurs-2-duckdb.parquet da pasta files/input e salva no pasta files/output.\nGERA RETORNO NO FLOWFILE, PORÉM VAZIO PORQUE O SCRIPT NÃO UTILIZA O \"STDIN/STDOUT\".\nApenas didático.","instanceIdentifier":"a1ec0083-c327-3cbe-1b0d-f2859d09c2ed"},"destination":{"id":"507d083a-732a-37df-bec0-d556be4953a6","type":"FUNNEL","groupId":"3ae4c81f-77f1-3432-be36-5f85baf0e637","name":"Funnel","comments":"","instanceIdentifier":"528e3df4-8d53-37fc-6b98-80287530dbe1"},"labelIndex":0,"zIndex":0,"selectedRelationships":["nonzero status"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[{"x":465.0511169433594,"y":159.32579040527344}],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"3ae4c81f-77f1-3432-be36-5f85baf0e637"}],"labels":[{"identifier":"f35d14d2-0d4d-3976-a103-973067fbf2c7","instanceIdentifier":"0de98aa7-3e59-3b8c-3c73-2a07687d2d03","position":{"x":912.0,"y":144.0},"label":"https://parquetreader.com/","zIndex":0,"width":216.0,"height":32.0,"style":{"background-color":"#052beb","font-size":"16px"},"componentType":"LABEL","groupIdentifier":"3ae4c81f-77f1-3432-be36-5f85baf0e637"},{"identifier":"c15bb955-f2a4-32d1-96a7-ce42bec6eeb4","instanceIdentifier":"e7c2b3db-04d3-3ebb-10a4-277cc0af6384","position":{"x":-664.0,"y":576.0},"label":"Convert  csv -> parquet (com conteúdo processado pelo flowfile)","zIndex":0,"width":2176.0,"height":40.0,"style":{"background-color":"#052beb","font-size":"18px"},"componentType":"LABEL","groupIdentifier":"3ae4c81f-77f1-3432-be36-5f85baf0e637"},{"identifier":"24cae9cc-32e9-3737-b7be-21ebf27092df","instanceIdentifier":"1d8cbaee-2d7c-3870-4b1e-4ed05359221b","position":{"x":-664.0,"y":-152.0},"label":"Convert  csv -> parquet (sem conteúdo processado pelo flowfile)","zIndex":0,"width":1304.0,"height":48.0,"style":{"background-color":"#052beb","font-size":"18px"},"componentType":"LABEL","groupIdentifier":"3ae4c81f-77f1-3432-be36-5f85baf0e637"}],"funnels":[{"identifier":"507d083a-732a-37df-bec0-d556be4953a6","instanceIdentifier":"528e3df4-8d53-37fc-6b98-80287530dbe1","position":{"x":608.0,"y":224.0},"componentType":"FUNNEL","groupIdentifier":"3ae4c81f-77f1-3432-be36-5f85baf0e637"},{"identifier":"84ef2961-a629-3591-9d9f-fea7c6607bb6","instanceIdentifier":"6ba13dd2-b533-38eb-f0cf-3a14ce9fa6e1","position":{"x":-16.0,"y":-8.0},"componentType":"FUNNEL","groupIdentifier":"3ae4c81f-77f1-3432-be36-5f85baf0e637"}],"controllerServices":[],"parameterContextName":"Workshop 2","defaultFlowFileExpiration":"0 sec","defaultBackPressureObjectThreshold":10000,"defaultBackPressureDataSizeThreshold":"1 GB","scheduledState":"ENABLED","executionEngine":"INHERITED","maxConcurrentTasks":1,"statelessFlowTimeout":"1 min","flowFileConcurrency":"UNBOUNDED","flowFileOutboundPolicy":"STREAM_WHEN_AVAILABLE","componentType":"PROCESS_GROUP","groupIdentifier":"6694ab51-dc3d-3850-80e6-48a52b28418d"},{"identifier":"488888e0-bc56-3ab3-bb56-a7f650cad8cc","instanceIdentifier":"7442f0e3-d0d1-32b0-9740-accade922bc0","name":"Github","comments":"","position":{"x":-584.0,"y":280.0},"processGroups":[],"remoteProcessGroups":[],"processors":[{"identifier":"f8fb6dd1-2c05-3816-b5ea-bdec55ba1882","instanceIdentifier":"c650fb07-9d50-313d-72e2-adecd45fee7e","name":"GenerateFlowFile","comments":"","position":{"x":-137.0,"y":-86.5},"type":"org.apache.nifi.processors.standard.GenerateFlowFile","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"2.0.0-M4"},"properties":{"character-set":"UTF-8","File Size":"0B","mime-type":null,"generate-ff-custom-text":null,"Batch Size":"1","Unique FlowFiles":"false","Data Format":"Text"},"propertyDescriptors":{"character-set":{"name":"character-set","displayName":"Character Set","identifiesControllerService":false,"sensitive":false,"dynamic":false},"File Size":{"name":"File Size","displayName":"File Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"mime-type":{"name":"mime-type","displayName":"Mime Type","identifiesControllerService":false,"sensitive":false,"dynamic":false},"generate-ff-custom-text":{"name":"generate-ff-custom-text","displayName":"Custom Text","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Batch Size":{"name":"Batch Size","displayName":"Batch Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Unique FlowFiles":{"name":"Unique FlowFiles","displayName":"Unique FlowFiles","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Data Format":{"name":"Data Format","displayName":"Data Format","identifiesControllerService":false,"sensitive":false,"dynamic":false}},"style":{},"schedulingPeriod":"1 hour","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":[],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"488888e0-bc56-3ab3-bb56-a7f650cad8cc"},{"identifier":"d635ee09-193c-392a-b2ef-045f2320267c","instanceIdentifier":"f8f75a4b-9c46-3a22-76d2-78bc15a69cf5","name":"InvokeHTTP","comments":"Faz a baixa do arquivo CSV compactado.","position":{"x":-136.0,"y":104.0},"type":"org.apache.nifi.processors.standard.InvokeHTTP","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"2.0.0-M4"},"properties":{"Request Content-Encoding":"DISABLED","proxy-configuration-service":null,"Request Multipart Form-Data Filename Enabled":"true","Request Chunked Transfer-Encoding Enabled":"false","HTTP/2 Disabled":"False","Connection Timeout":"5 secs","Response Cookie Strategy":"DISABLED","Socket Read Timeout":"15 secs","Socket Idle Connections":"5","Request Body Enabled":"true","HTTP URL":"https://www.kaggle.com/api/v1/datasets/download/kandebonfim/super-trunfo-dinossaurs-2","Request OAuth2 Access Token Provider":null,"Socket Idle Timeout":"5 mins","Response Redirects Enabled":"True","Socket Write Timeout":"15 secs","Request Header Attributes Pattern":null,"Response FlowFile Naming Strategy":"RANDOM","Response Cache Enabled":"false","Request Date Header Enabled":"True","Request Failure Penalization Enabled":"false","Response Body Attribute Size":"256","SSL Context Service":null,"Response Generation Required":"false","Request User-Agent":null,"Response Header Request Attributes Enabled":"false","HTTP Method":"GET","Request Username":null,"Request Content-Type":"${mime.type}","Response Body Attribute Name":null,"Request Digest Authentication Enabled":"false","Request Multipart Form-Data Name":null,"Response Cache Size":"10MB","Response Body Ignored":"false"},"propertyDescriptors":{"Request Content-Encoding":{"name":"Request Content-Encoding","displayName":"Request Content-Encoding","identifiesControllerService":false,"sensitive":false,"dynamic":false},"proxy-configuration-service":{"name":"proxy-configuration-service","displayName":"Proxy Configuration Service","identifiesControllerService":true,"sensitive":false,"dynamic":false},"Request Multipart Form-Data Filename Enabled":{"name":"Request Multipart Form-Data Filename Enabled","displayName":"Request Multipart Form-Data Filename Enabled","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request Chunked Transfer-Encoding Enabled":{"name":"Request Chunked Transfer-Encoding Enabled","displayName":"Request Chunked Transfer-Encoding Enabled","identifiesControllerService":false,"sensitive":false,"dynamic":false},"HTTP/2 Disabled":{"name":"HTTP/2 Disabled","displayName":"HTTP/2 Disabled","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Connection Timeout":{"name":"Connection Timeout","displayName":"Connection Timeout","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Response Cookie Strategy":{"name":"Response Cookie Strategy","displayName":"Response Cookie Strategy","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request Password":{"name":"Request Password","displayName":"Request Password","identifiesControllerService":false,"sensitive":true,"dynamic":false},"Socket Read Timeout":{"name":"Socket Read Timeout","displayName":"Socket Read Timeout","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Socket Idle Connections":{"name":"Socket Idle Connections","displayName":"Socket Idle Connections","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request Body Enabled":{"name":"Request Body Enabled","displayName":"Request Body Enabled","identifiesControllerService":false,"sensitive":false,"dynamic":false},"HTTP URL":{"name":"HTTP URL","displayName":"HTTP URL","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request OAuth2 Access Token Provider":{"name":"Request OAuth2 Access Token Provider","displayName":"Request OAuth2 Access Token Provider","identifiesControllerService":true,"sensitive":false,"dynamic":false},"Socket Idle Timeout":{"name":"Socket Idle Timeout","displayName":"Socket Idle Timeout","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Response Redirects Enabled":{"name":"Response Redirects Enabled","displayName":"Response Redirects Enabled","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Socket Write Timeout":{"name":"Socket Write Timeout","displayName":"Socket Write Timeout","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request Header Attributes Pattern":{"name":"Request Header Attributes Pattern","displayName":"Request Header Attributes Pattern","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Response FlowFile Naming Strategy":{"name":"Response FlowFile Naming Strategy","displayName":"Response FlowFile Naming Strategy","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Response Cache Enabled":{"name":"Response Cache Enabled","displayName":"Response Cache Enabled","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request Date Header Enabled":{"name":"Request Date Header Enabled","displayName":"Request Date Header Enabled","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request Failure Penalization Enabled":{"name":"Request Failure Penalization Enabled","displayName":"Request Failure Penalization Enabled","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Response Body Attribute Size":{"name":"Response Body Attribute Size","displayName":"Response Body Attribute Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"SSL Context Service":{"name":"SSL Context Service","displayName":"SSL Context Service","identifiesControllerService":true,"sensitive":false,"dynamic":false},"Response Generation Required":{"name":"Response Generation Required","displayName":"Response Generation Required","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request User-Agent":{"name":"Request User-Agent","displayName":"Request User-Agent","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Response Header Request Attributes Enabled":{"name":"Response Header Request Attributes Enabled","displayName":"Response Header Request Attributes Enabled","identifiesControllerService":false,"sensitive":false,"dynamic":false},"HTTP Method":{"name":"HTTP Method","displayName":"HTTP Method","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request Username":{"name":"Request Username","displayName":"Request Username","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request Content-Type":{"name":"Request Content-Type","displayName":"Request Content-Type","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Response Body Attribute Name":{"name":"Response Body Attribute Name","displayName":"Response Body Attribute Name","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request Digest Authentication Enabled":{"name":"Request Digest Authentication Enabled","displayName":"Request Digest Authentication Enabled","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request Multipart Form-Data Name":{"name":"Request Multipart Form-Data Name","displayName":"Request Multipart Form-Data Name","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Response Cache Size":{"name":"Response Cache Size","displayName":"Response Cache Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Response Body Ignored":{"name":"Response Body Ignored","displayName":"Response Body Ignored","identifiesControllerService":false,"sensitive":false,"dynamic":false}},"style":{"background-color":"#ff0000"},"schedulingPeriod":"1 hour","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["No Retry","Retry","Original","Failure"],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"488888e0-bc56-3ab3-bb56-a7f650cad8cc"},{"identifier":"c643e6e8-0818-36c1-9ed2-f38e6645483f","instanceIdentifier":"5583b846-b234-3a36-926b-006435c5b089","name":"UnpackContent","comments":"Descompacta o arquivo que está no flowfile","position":{"x":-136.0,"y":304.0},"type":"org.apache.nifi.processors.standard.UnpackContent","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"2.0.0-M4"},"properties":{"Packaging Format":"use mime.type attribute","allow-stored-entries-wdd":"false","Filename Character Set":"UTF-8","File Filter":".*"},"propertyDescriptors":{"Packaging Format":{"name":"Packaging Format","displayName":"Packaging Format","identifiesControllerService":false,"sensitive":false,"dynamic":false},"allow-stored-entries-wdd":{"name":"allow-stored-entries-wdd","displayName":"Allow Stored Entries With Data Descriptor","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Filename Character Set":{"name":"Filename Character Set","displayName":"Filename Character Set","identifiesControllerService":false,"sensitive":false,"dynamic":false},"File Filter":{"name":"File Filter","displayName":"File Filter","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Password":{"name":"Password","displayName":"Password","identifiesControllerService":false,"sensitive":true,"dynamic":false}},"style":{"background-color":"#ff0000"},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":[],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"488888e0-bc56-3ab3-bb56-a7f650cad8cc"}],"inputPorts":[],"outputPorts":[],"connections":[{"identifier":"cc87303c-63f3-3f7c-98dc-ed886b8e5e5c","instanceIdentifier":"132c7d8f-5d2a-3c49-4a4b-525c9625883f","name":"","source":{"id":"f8fb6dd1-2c05-3816-b5ea-bdec55ba1882","type":"PROCESSOR","groupId":"488888e0-bc56-3ab3-bb56-a7f650cad8cc","name":"GenerateFlowFile","comments":"","instanceIdentifier":"c650fb07-9d50-313d-72e2-adecd45fee7e"},"destination":{"id":"d635ee09-193c-392a-b2ef-045f2320267c","type":"PROCESSOR","groupId":"488888e0-bc56-3ab3-bb56-a7f650cad8cc","name":"InvokeHTTP","comments":"Faz a baixa do arquivo CSV compactado.","instanceIdentifier":"f8f75a4b-9c46-3a22-76d2-78bc15a69cf5"},"labelIndex":0,"zIndex":0,"selectedRelationships":["success"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"488888e0-bc56-3ab3-bb56-a7f650cad8cc"},{"identifier":"628198a7-da37-3780-b8a6-4c10dd789d44","instanceIdentifier":"baa2fb53-c1dc-3138-4a92-ff4154c3c09d","name":"","source":{"id":"c643e6e8-0818-36c1-9ed2-f38e6645483f","type":"PROCESSOR","groupId":"488888e0-bc56-3ab3-bb56-a7f650cad8cc","name":"UnpackContent","comments":"Descompacta o arquivo que está no flowfile","instanceIdentifier":"5583b846-b234-3a36-926b-006435c5b089"},"destination":{"id":"dc57ff7c-1c58-3a31-9ff4-1d8562d50b36","type":"FUNNEL","groupId":"488888e0-bc56-3ab3-bb56-a7f650cad8cc","name":"Funnel","comments":"","instanceIdentifier":"d2fb1699-52e7-39ce-6cb9-2fec73957655"},"labelIndex":0,"zIndex":0,"selectedRelationships":["original","success","failure"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"488888e0-bc56-3ab3-bb56-a7f650cad8cc"},{"identifier":"cfe462ea-8fd0-34eb-ba55-76300580ef16","instanceIdentifier":"7c4c87bf-22f7-3b50-f884-30b22d091990","name":"","source":{"id":"d635ee09-193c-392a-b2ef-045f2320267c","type":"PROCESSOR","groupId":"488888e0-bc56-3ab3-bb56-a7f650cad8cc","name":"InvokeHTTP","comments":"Faz a baixa do arquivo CSV compactado.","instanceIdentifier":"f8f75a4b-9c46-3a22-76d2-78bc15a69cf5"},"destination":{"id":"c643e6e8-0818-36c1-9ed2-f38e6645483f","type":"PROCESSOR","groupId":"488888e0-bc56-3ab3-bb56-a7f650cad8cc","name":"UnpackContent","comments":"Descompacta o arquivo que está no flowfile","instanceIdentifier":"5583b846-b234-3a36-926b-006435c5b089"},"labelIndex":1,"zIndex":0,"selectedRelationships":["Response"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"488888e0-bc56-3ab3-bb56-a7f650cad8cc"}],"labels":[],"funnels":[{"identifier":"dc57ff7c-1c58-3a31-9ff4-1d8562d50b36","instanceIdentifier":"d2fb1699-52e7-39ce-6cb9-2fec73957655","position":{"x":16.0,"y":520.0},"componentType":"FUNNEL","groupIdentifier":"488888e0-bc56-3ab3-bb56-a7f650cad8cc"}],"controllerServices":[],"parameterContextName":"Workshop 2","defaultFlowFileExpiration":"0 sec","defaultBackPressureObjectThreshold":10000,"defaultBackPressureDataSizeThreshold":"1 GB","scheduledState":"ENABLED","executionEngine":"INHERITED","maxConcurrentTasks":1,"statelessFlowTimeout":"1 min","flowFileConcurrency":"UNBOUNDED","flowFileOutboundPolicy":"STREAM_WHEN_AVAILABLE","componentType":"PROCESS_GROUP","groupIdentifier":"6694ab51-dc3d-3850-80e6-48a52b28418d"},{"identifier":"db1cb9c5-30b2-3bc7-8721-96736e830954","instanceIdentifier":"b66946a6-53d2-3b92-b8d9-294760e0c086","name":"Processor Python","comments":"","position":{"x":-176.0,"y":480.0},"processGroups":[],"remoteProcessGroups":[],"processors":[{"identifier":"b80d4fb3-795d-35f4-9b27-ebdf92b42e12","instanceIdentifier":"2ebf1c3b-df30-3a2a-de45-9e7c539f81a6","name":"ConvertCSVToParquet","comments":"Converte o arquivo CSV para parquet","position":{"x":-320.0,"y":-40.0},"type":"python.ConvertCSVToParquet","bundle":{"group":"org.apache.nifi","artifact":"python-extensions","version":"0.0.1-Python"},"properties":{"Decodificação":"UTF-8"},"propertyDescriptors":{"Decodificação":{"name":"Decodificação","displayName":"Decodificação","identifiesControllerService":false,"sensitive":false,"dynamic":false}},"style":{},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":25,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["original","failure"],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"db1cb9c5-30b2-3bc7-8721-96736e830954"},{"identifier":"690bcc8c-7cc2-3afc-8d27-93c54e7a9e59","instanceIdentifier":"e68f221b-b512-3904-4f0b-f191083cda11","name":"GetFile","comments":"Faz a captura do arquivo super-trunfo-dinossaurs-2.csv","position":{"x":-320.0,"y":-240.0},"type":"org.apache.nifi.processors.standard.GetFile","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"2.0.0-M4"},"properties":{"Keep Source File":"true","Minimum File Age":"0 sec","Polling Interval":"0 sec","Input Directory":"/opt/nifi/nifi-current/files/input","Maximum File Age":null,"Batch Size":"10","Maximum File Size":null,"Minimum File Size":"0 B","Ignore Hidden Files":"true","Recurse Subdirectories":"false","File Filter":".*super-trunfo-dinossaurs-2.csv","Path Filter":null},"propertyDescriptors":{"Keep Source File":{"name":"Keep Source File","displayName":"Keep Source File","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Minimum File Age":{"name":"Minimum File Age","displayName":"Minimum File Age","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Polling Interval":{"name":"Polling Interval","displayName":"Polling Interval","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Input Directory":{"name":"Input Directory","displayName":"Input Directory","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Maximum File Age":{"name":"Maximum File Age","displayName":"Maximum File Age","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Batch Size":{"name":"Batch Size","displayName":"Batch Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Maximum File Size":{"name":"Maximum File Size","displayName":"Maximum File Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Minimum File Size":{"name":"Minimum File Size","displayName":"Minimum File Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Ignore Hidden Files":{"name":"Ignore Hidden Files","displayName":"Ignore Hidden Files","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Recurse Subdirectories":{"name":"Recurse Subdirectories","displayName":"Recurse Subdirectories","identifiesControllerService":false,"sensitive":false,"dynamic":false},"File Filter":{"name":"File Filter","displayName":"File Filter","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Path Filter":{"name":"Path Filter","displayName":"Path Filter","identifiesControllerService":false,"sensitive":false,"dynamic":false}},"style":{},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":[],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"db1cb9c5-30b2-3bc7-8721-96736e830954"},{"identifier":"7ce148e3-78a9-391a-a78d-7f2a0054a33a","instanceIdentifier":"3fa35ee0-1925-363d-d045-8c903d151470","name":"PutFile","comments":"Salva o arquivo na pasta files/output","position":{"x":-320.0,"y":168.0},"type":"org.apache.nifi.processors.standard.PutFile","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"2.0.0-M4"},"properties":{"Group":null,"Owner":null,"Create Missing Directories":"true","Permissions":null,"Maximum File Count":null,"Last Modified Time":null,"Directory":"/opt/nifi/nifi-current/files/output/","Conflict Resolution Strategy":"replace"},"propertyDescriptors":{"Group":{"name":"Group","displayName":"Group","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Owner":{"name":"Owner","displayName":"Owner","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Create Missing Directories":{"name":"Create Missing Directories","displayName":"Create Missing Directories","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Permissions":{"name":"Permissions","displayName":"Permissions","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Maximum File Count":{"name":"Maximum File Count","displayName":"Maximum File Count","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Last Modified Time":{"name":"Last Modified Time","displayName":"Last Modified Time","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Directory":{"name":"Directory","displayName":"Directory","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Conflict Resolution Strategy":{"name":"Conflict Resolution Strategy","displayName":"Conflict Resolution Strategy","identifiesControllerService":false,"sensitive":false,"dynamic":false}},"style":{},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["success","failure"],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"db1cb9c5-30b2-3bc7-8721-96736e830954"}],"inputPorts":[],"outputPorts":[],"connections":[{"identifier":"f6a098c3-9987-325a-bef2-8955113dfb22","instanceIdentifier":"0611b1f0-9ed3-3a44-51ad-21c544b1e593","name":"","source":{"id":"690bcc8c-7cc2-3afc-8d27-93c54e7a9e59","type":"PROCESSOR","groupId":"db1cb9c5-30b2-3bc7-8721-96736e830954","name":"GetFile","comments":"Faz a captura do arquivo super-trunfo-dinossaurs-2.csv","instanceIdentifier":"e68f221b-b512-3904-4f0b-f191083cda11"},"destination":{"id":"b80d4fb3-795d-35f4-9b27-ebdf92b42e12","type":"PROCESSOR","groupId":"db1cb9c5-30b2-3bc7-8721-96736e830954","name":"ConvertCSVToParquet","comments":"Converte o arquivo CSV para parquet","instanceIdentifier":"2ebf1c3b-df30-3a2a-de45-9e7c539f81a6"},"labelIndex":0,"zIndex":0,"selectedRelationships":["success"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"db1cb9c5-30b2-3bc7-8721-96736e830954"},{"identifier":"b4ede519-6069-340c-aedc-11f2ec4ab9b3","instanceIdentifier":"39d2ca1e-df45-3048-cec7-af2a74f94c10","name":"","source":{"id":"b80d4fb3-795d-35f4-9b27-ebdf92b42e12","type":"PROCESSOR","groupId":"db1cb9c5-30b2-3bc7-8721-96736e830954","name":"ConvertCSVToParquet","comments":"Converte o arquivo CSV para parquet","instanceIdentifier":"2ebf1c3b-df30-3a2a-de45-9e7c539f81a6"},"destination":{"id":"7ce148e3-78a9-391a-a78d-7f2a0054a33a","type":"PROCESSOR","groupId":"db1cb9c5-30b2-3bc7-8721-96736e830954","name":"PutFile","comments":"Salva o arquivo na pasta files/output","instanceIdentifier":"3fa35ee0-1925-363d-d045-8c903d151470"},"labelIndex":0,"zIndex":0,"selectedRelationships":["success"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"db1cb9c5-30b2-3bc7-8721-96736e830954"}],"labels":[{"identifier":"501a393e-978f-348d-9b9e-4f32562cb8e1","instanceIdentifier":"2f3be607-a83a-3bf9-6dfe-db0f54dacb17","position":{"x":56.0,"y":216.0},"label":"https://parquetreader.com/","zIndex":0,"width":216.0,"height":32.0,"style":{"background-color":"#052beb","font-size":"16px"},"componentType":"LABEL","groupIdentifier":"db1cb9c5-30b2-3bc7-8721-96736e830954"}],"funnels":[],"controllerServices":[],"parameterContextName":"Workshop 2","defaultFlowFileExpiration":"0 sec","defaultBackPressureObjectThreshold":10000,"defaultBackPressureDataSizeThreshold":"1 GB","scheduledState":"ENABLED","executionEngine":"INHERITED","maxConcurrentTasks":1,"statelessFlowTimeout":"1 min","flowFileConcurrency":"UNBOUNDED","flowFileOutboundPolicy":"STREAM_WHEN_AVAILABLE","componentType":"PROCESS_GROUP","groupIdentifier":"6694ab51-dc3d-3850-80e6-48a52b28418d"},{"identifier":"b9e37c97-75a3-3ac8-a086-475b7642302f","instanceIdentifier":"2a11026a-973e-3ecd-1846-169ba885aece","name":"2MASS","comments":"","position":{"x":-176.0,"y":280.0},"processGroups":[],"remoteProcessGroups":[],"processors":[{"identifier":"f7def34a-cee1-341c-98b8-6bd5054d867f","instanceIdentifier":"6d12f44c-44c1-3246-0bfd-48b38a2c9478","name":"ExecuteSQL","comments":"Faz o COPY do arquivo para o banco twomass_psc.","position":{"x":-744.0,"y":888.0},"type":"org.apache.nifi.processors.standard.ExecuteSQL","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"2.0.0-M4"},"properties":{"esql-max-rows":"0","dbf-default-precision":"10","Max Wait Time":"0 seconds","Database Connection Pooling Service":"b01f5adc-e105-38a6-b878-eef024a1d25c","sql-post-query":null,"esql-auto-commit":"true","dbf-user-logical-types":"false","dbf-default-scale":"0","sql-pre-query":null,"compression-format":"NONE","esql-output-batch-size":"0","esql-fetch-size":"0","SQL select query":"COPY mass.twomass_psc\nFROM PROGRAM 'zcat /var/lib/postgresql/files/input/${filename}'\nWITH CSV DELIMITER '|' NULL '\\N';","dbf-normalize":"false"},"propertyDescriptors":{"esql-max-rows":{"name":"esql-max-rows","displayName":"Max Rows Per Flow File","identifiesControllerService":false,"sensitive":false,"dynamic":false},"dbf-default-precision":{"name":"dbf-default-precision","displayName":"Default Decimal Precision","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Max Wait Time":{"name":"Max Wait Time","displayName":"Max Wait Time","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Database Connection Pooling Service":{"name":"Database Connection Pooling Service","displayName":"Database Connection Pooling Service","identifiesControllerService":true,"sensitive":false,"dynamic":false},"sql-post-query":{"name":"sql-post-query","displayName":"SQL Post-Query","identifiesControllerService":false,"sensitive":false,"dynamic":false},"esql-auto-commit":{"name":"esql-auto-commit","displayName":"Set Auto Commit","identifiesControllerService":false,"sensitive":false,"dynamic":false},"dbf-user-logical-types":{"name":"dbf-user-logical-types","displayName":"Use Avro Logical Types","identifiesControllerService":false,"sensitive":false,"dynamic":false},"dbf-default-scale":{"name":"dbf-default-scale","displayName":"Default Decimal Scale","identifiesControllerService":false,"sensitive":false,"dynamic":false},"sql-pre-query":{"name":"sql-pre-query","displayName":"SQL Pre-Query","identifiesControllerService":false,"sensitive":false,"dynamic":false},"compression-format":{"name":"compression-format","displayName":"Compression Format","identifiesControllerService":false,"sensitive":false,"dynamic":false},"esql-output-batch-size":{"name":"esql-output-batch-size","displayName":"Output Batch Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"esql-fetch-size":{"name":"esql-fetch-size","displayName":"Fetch Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"SQL select query":{"name":"SQL select query","displayName":"SQL select query","identifiesControllerService":false,"sensitive":false,"dynamic":false},"dbf-normalize":{"name":"dbf-normalize","displayName":"Normalize Table/Column Names","identifiesControllerService":false,"sensitive":false,"dynamic":false}},"style":{},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["failure"],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"b9e37c97-75a3-3ac8-a086-475b7642302f"},{"identifier":"ee62d94b-efd1-3e11-a4d1-aae7303c7d6e","instanceIdentifier":"d68acfd3-027f-37c1-805d-4054fda16b26","name":"PublishSlack","comments":"Dispara uma mensagem no SLACK com informações do fluxo.","position":{"x":-344.0,"y":1488.0},"type":"org.apache.nifi.processors.slack.PublishSlack","bundle":{"group":"org.apache.nifi","artifact":"nifi-slack-nar","version":"2.0.0-M4"},"properties":{"Max FlowFile Size":"1 MB","Thread Timestamp":null,"Publish Strategy":"Use 'Message Text' Property","Channel":"D07P2FDTSDS","Access Token":"#{slack_access_token}","Message Text":"---------------------------------\nIngestão - 2MASS\n\nArquivo: ${filename}\n\nTamanho: ${volumeMB} MB\n\nInício: ${start:format(\"yyyy-MM-dd'T'HH:mm:ss'Z'\", \"America/Sao_Paulo\")}\n\nFim: ${end}\n\nDuração Total: ${totalDuration}\n\nDuração após o download: ${durationAfterDownload}","Character Set":"UTF-8","Include FlowFile Content as Attachment":"false"},"propertyDescriptors":{"Max FlowFile Size":{"name":"Max FlowFile Size","displayName":"Max FlowFile Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Thread Timestamp":{"name":"Thread Timestamp","displayName":"Thread Timestamp","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Publish Strategy":{"name":"Publish Strategy","displayName":"Publish Strategy","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Channel":{"name":"Channel","displayName":"Channel","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Access Token":{"name":"Access Token","displayName":"Access Token","identifiesControllerService":false,"sensitive":true,"dynamic":false},"Message Text":{"name":"Message Text","displayName":"Message Text","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Character Set":{"name":"Character Set","displayName":"Character Set","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Include FlowFile Content as Attachment":{"name":"Include FlowFile Content as Attachment","displayName":"Include FlowFile Content as Attachment","identifiesControllerService":false,"sensitive":false,"dynamic":false}},"style":{},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"3 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["rate limited","success","failure"],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"b9e37c97-75a3-3ac8-a086-475b7642302f"},{"identifier":"a904f67b-c300-3d3c-b73c-281463568947","instanceIdentifier":"f72a80cf-9808-3009-02fc-2adc97b4c5c6","name":"UpdateAttribute","comments":"Cria variável para armazenar o início da coleta.","position":{"x":-344.0,"y":-424.0},"type":"org.apache.nifi.processors.attributes.UpdateAttribute","bundle":{"group":"org.apache.nifi","artifact":"nifi-update-attribute-nar","version":"2.0.0-M4"},"properties":{"Delete Attributes Expression":null,"Store State":"Do not store state","canonical-value-lookup-cache-size":"100","start":"${entryDate:toNumber()}","Stateful Variables Initial Value":null},"propertyDescriptors":{"Delete Attributes Expression":{"name":"Delete Attributes Expression","displayName":"Delete Attributes Expression","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Store State":{"name":"Store State","displayName":"Store State","identifiesControllerService":false,"sensitive":false,"dynamic":false},"canonical-value-lookup-cache-size":{"name":"canonical-value-lookup-cache-size","displayName":"Cache Value Lookup Cache Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"start":{"name":"start","displayName":"start","identifiesControllerService":false,"sensitive":false,"dynamic":true},"Stateful Variables Initial Value":{"name":"Stateful Variables Initial Value","displayName":"Stateful Variables Initial Value","identifiesControllerService":false,"sensitive":false,"dynamic":false}},"style":{},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":25,"concurrentlySchedulableTaskCount":5,"autoTerminatedRelationships":[],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"b9e37c97-75a3-3ac8-a086-475b7642302f"},{"identifier":"d571c70f-01af-377f-8c4c-aa60f75502d3","instanceIdentifier":"92d1e152-e6ea-374f-692f-7dff1bdf422e","name":"PutFile","comments":"Faz o Input do arquivo no diretório especificado.","position":{"x":56.0,"y":696.0},"type":"org.apache.nifi.processors.standard.PutFile","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"2.0.0-M4"},"properties":{"Group":null,"Owner":null,"Create Missing Directories":"true","Permissions":null,"Maximum File Count":null,"Last Modified Time":null,"Directory":"/opt/nifi/nifi-current/files/output/2MASS/","Conflict Resolution Strategy":"replace"},"propertyDescriptors":{"Group":{"name":"Group","displayName":"Group","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Owner":{"name":"Owner","displayName":"Owner","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Create Missing Directories":{"name":"Create Missing Directories","displayName":"Create Missing Directories","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Permissions":{"name":"Permissions","displayName":"Permissions","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Maximum File Count":{"name":"Maximum File Count","displayName":"Maximum File Count","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Last Modified Time":{"name":"Last Modified Time","displayName":"Last Modified Time","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Directory":{"name":"Directory","displayName":"Directory","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Conflict Resolution Strategy":{"name":"Conflict Resolution Strategy","displayName":"Conflict Resolution Strategy","identifiesControllerService":false,"sensitive":false,"dynamic":false}},"style":{},"schedulingPeriod":"10 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["failure"],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"b9e37c97-75a3-3ac8-a086-475b7642302f"},{"identifier":"3cbfb771-9c60-3c73-b123-1f0ee8456384","instanceIdentifier":"2b581dbc-324f-3076-1349-1879762a1a2b","name":"InvokeHTTP","comments":"Faz a requisição para baixar o arquivo, conforme conteúdo da variável file.","position":{"x":56.0,"y":312.0},"type":"org.apache.nifi.processors.standard.InvokeHTTP","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"2.0.0-M4"},"properties":{"Request Content-Encoding":"DISABLED","proxy-configuration-service":null,"Request Multipart Form-Data Filename Enabled":"true","Request Chunked Transfer-Encoding Enabled":"false","HTTP/2 Disabled":"False","Connection Timeout":"600 secs","Response Cookie Strategy":"DISABLED","Socket Read Timeout":"600 secs","Socket Idle Connections":"5","Request Body Enabled":"true","HTTP URL":"${url2MASS}${file.0}","Request OAuth2 Access Token Provider":null,"Socket Idle Timeout":"5 mins","Response Redirects Enabled":"True","Socket Write Timeout":"60 secs","Request Header Attributes Pattern":null,"Response FlowFile Naming Strategy":"RANDOM","Response Cache Enabled":"false","Request Date Header Enabled":"False","Request Failure Penalization Enabled":"false","Response Body Attribute Size":"256","SSL Context Service":null,"Response Generation Required":"false","Request User-Agent":null,"Response Header Request Attributes Enabled":"false","HTTP Method":"GET","Request Username":null,"Request Content-Type":"${mime.type}","Response Body Attribute Name":null,"Request Digest Authentication Enabled":"false","Request Multipart Form-Data Name":null,"Response Cache Size":"10MB","Response Body Ignored":"false"},"propertyDescriptors":{"Request Content-Encoding":{"name":"Request Content-Encoding","displayName":"Request Content-Encoding","identifiesControllerService":false,"sensitive":false,"dynamic":false},"proxy-configuration-service":{"name":"proxy-configuration-service","displayName":"Proxy Configuration Service","identifiesControllerService":true,"sensitive":false,"dynamic":false},"Request Multipart Form-Data Filename Enabled":{"name":"Request Multipart Form-Data Filename Enabled","displayName":"Request Multipart Form-Data Filename Enabled","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request Chunked Transfer-Encoding Enabled":{"name":"Request Chunked Transfer-Encoding Enabled","displayName":"Request Chunked Transfer-Encoding Enabled","identifiesControllerService":false,"sensitive":false,"dynamic":false},"HTTP/2 Disabled":{"name":"HTTP/2 Disabled","displayName":"HTTP/2 Disabled","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Connection Timeout":{"name":"Connection Timeout","displayName":"Connection Timeout","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Response Cookie Strategy":{"name":"Response Cookie Strategy","displayName":"Response Cookie Strategy","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request Password":{"name":"Request Password","displayName":"Request Password","identifiesControllerService":false,"sensitive":true,"dynamic":false},"Socket Read Timeout":{"name":"Socket Read Timeout","displayName":"Socket Read Timeout","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Socket Idle Connections":{"name":"Socket Idle Connections","displayName":"Socket Idle Connections","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request Body Enabled":{"name":"Request Body Enabled","displayName":"Request Body Enabled","identifiesControllerService":false,"sensitive":false,"dynamic":false},"HTTP URL":{"name":"HTTP URL","displayName":"HTTP URL","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request OAuth2 Access Token Provider":{"name":"Request OAuth2 Access Token Provider","displayName":"Request OAuth2 Access Token Provider","identifiesControllerService":true,"sensitive":false,"dynamic":false},"Socket Idle Timeout":{"name":"Socket Idle Timeout","displayName":"Socket Idle Timeout","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Response Redirects Enabled":{"name":"Response Redirects Enabled","displayName":"Response Redirects Enabled","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Socket Write Timeout":{"name":"Socket Write Timeout","displayName":"Socket Write Timeout","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request Header Attributes Pattern":{"name":"Request Header Attributes Pattern","displayName":"Request Header Attributes Pattern","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Response FlowFile Naming Strategy":{"name":"Response FlowFile Naming Strategy","displayName":"Response FlowFile Naming Strategy","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Response Cache Enabled":{"name":"Response Cache Enabled","displayName":"Response Cache Enabled","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request Date Header Enabled":{"name":"Request Date Header Enabled","displayName":"Request Date Header Enabled","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request Failure Penalization Enabled":{"name":"Request Failure Penalization Enabled","displayName":"Request Failure Penalization Enabled","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Response Body Attribute Size":{"name":"Response Body Attribute Size","displayName":"Response Body Attribute Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"SSL Context Service":{"name":"SSL Context Service","displayName":"SSL Context Service","identifiesControllerService":true,"sensitive":false,"dynamic":false},"Response Generation Required":{"name":"Response Generation Required","displayName":"Response Generation Required","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request User-Agent":{"name":"Request User-Agent","displayName":"Request User-Agent","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Response Header Request Attributes Enabled":{"name":"Response Header Request Attributes Enabled","displayName":"Response Header Request Attributes Enabled","identifiesControllerService":false,"sensitive":false,"dynamic":false},"HTTP Method":{"name":"HTTP Method","displayName":"HTTP Method","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request Username":{"name":"Request Username","displayName":"Request Username","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request Content-Type":{"name":"Request Content-Type","displayName":"Request Content-Type","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Response Body Attribute Name":{"name":"Response Body Attribute Name","displayName":"Response Body Attribute Name","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request Digest Authentication Enabled":{"name":"Request Digest Authentication Enabled","displayName":"Request Digest Authentication Enabled","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request Multipart Form-Data Name":{"name":"Request Multipart Form-Data Name","displayName":"Request Multipart Form-Data Name","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Response Cache Size":{"name":"Response Cache Size","displayName":"Response Cache Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Response Body Ignored":{"name":"Response Body Ignored","displayName":"Response Body Ignored","identifiesControllerService":false,"sensitive":false,"dynamic":false}},"style":{},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["No Retry","Retry","Original","Failure"],"scheduledState":"DISABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"b9e37c97-75a3-3ac8-a086-475b7642302f"},{"identifier":"5591c247-3cfc-3664-b36f-ba601bcd3167","instanceIdentifier":"222b0051-9832-3515-0256-92bb170be9df","name":"UpdateAttribute","comments":"Armazenada o nome do arquivo na variável \"filename\".","position":{"x":56.0,"y":504.0},"type":"org.apache.nifi.processors.attributes.UpdateAttribute","bundle":{"group":"org.apache.nifi","artifact":"nifi-update-attribute-nar","version":"2.0.0-M4"},"properties":{"startAfterDownload":"${now():toNumber()}","volumeMB":"${fileSize:divide(1024):divide(1024)}","Delete Attributes Expression":null,"filename":"${file.0}","Store State":"Do not store state","canonical-value-lookup-cache-size":"100","Stateful Variables Initial Value":null},"propertyDescriptors":{"startAfterDownload":{"name":"startAfterDownload","displayName":"startAfterDownload","identifiesControllerService":false,"sensitive":false,"dynamic":true},"volumeMB":{"name":"volumeMB","displayName":"volumeMB","identifiesControllerService":false,"sensitive":false,"dynamic":true},"Delete Attributes Expression":{"name":"Delete Attributes Expression","displayName":"Delete Attributes Expression","identifiesControllerService":false,"sensitive":false,"dynamic":false},"filename":{"name":"filename","displayName":"filename","identifiesControllerService":false,"sensitive":false,"dynamic":true},"Store State":{"name":"Store State","displayName":"Store State","identifiesControllerService":false,"sensitive":false,"dynamic":false},"canonical-value-lookup-cache-size":{"name":"canonical-value-lookup-cache-size","displayName":"Cache Value Lookup Cache Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Stateful Variables Initial Value":{"name":"Stateful Variables Initial Value","displayName":"Stateful Variables Initial Value","identifiesControllerService":false,"sensitive":false,"dynamic":false}},"style":{},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":25,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":[],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"b9e37c97-75a3-3ac8-a086-475b7642302f"},{"identifier":"383d2b30-58c4-3060-88cc-5e9ab9222019","instanceIdentifier":"4fdac891-b99b-3f22-90f9-458adc1a46bc","name":"UpdateAttribute","comments":"Cria variáveis para o controle de duração do pipeline.","position":{"x":-344.0,"y":1216.0},"type":"org.apache.nifi.processors.attributes.UpdateAttribute","bundle":{"group":"org.apache.nifi","artifact":"nifi-update-attribute-nar","version":"2.0.0-M4"},"properties":{"totalDuration":"${now():toNumber():minus(${start}):format(\"HH:mm:ss\", \"GMT\")}","Delete Attributes Expression":null,"Store State":"Do not store state","canonical-value-lookup-cache-size":"100","end":"${now():format(\"yyyy-MM-dd'T'HH:mm:ss'Z'\", \"America/Sao_Paulo\")}","Stateful Variables Initial Value":null,"durationAfterDownload":"${now():toNumber():minus(${startAfterDownload}):format(\"HH:mm:ss\", \"GMT\")}"},"propertyDescriptors":{"totalDuration":{"name":"totalDuration","displayName":"totalDuration","identifiesControllerService":false,"sensitive":false,"dynamic":true},"Delete Attributes Expression":{"name":"Delete Attributes Expression","displayName":"Delete Attributes Expression","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Store State":{"name":"Store State","displayName":"Store State","identifiesControllerService":false,"sensitive":false,"dynamic":false},"canonical-value-lookup-cache-size":{"name":"canonical-value-lookup-cache-size","displayName":"Cache Value Lookup Cache Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"end":{"name":"end","displayName":"end","identifiesControllerService":false,"sensitive":false,"dynamic":true},"Stateful Variables Initial Value":{"name":"Stateful Variables Initial Value","displayName":"Stateful Variables Initial Value","identifiesControllerService":false,"sensitive":false,"dynamic":false},"durationAfterDownload":{"name":"durationAfterDownload","displayName":"durationAfterDownload","identifiesControllerService":false,"sensitive":false,"dynamic":true}},"style":{},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":25,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":[],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"b9e37c97-75a3-3ac8-a086-475b7642302f"},{"identifier":"873a9be5-fbf3-3d22-9553-aded611b069c","instanceIdentifier":"2c5b53d5-5d62-3d17-f6fc-b64c7d4a355a","name":"InvokeHTTP","comments":"Acessa a URL do 2MASS e coleta o html da página.","position":{"x":-344.0,"y":-288.0},"type":"org.apache.nifi.processors.standard.InvokeHTTP","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"2.0.0-M4"},"properties":{"Request Content-Encoding":"DISABLED","proxy-configuration-service":null,"Request Multipart Form-Data Filename Enabled":"true","Request Chunked Transfer-Encoding Enabled":"false","HTTP/2 Disabled":"False","Connection Timeout":"600 secs","Response Cookie Strategy":"DISABLED","Socket Read Timeout":"600 secs","Socket Idle Connections":"5","Request Body Enabled":"true","HTTP URL":"${url2MASS}","Request OAuth2 Access Token Provider":null,"Socket Idle Timeout":"5 mins","Response Redirects Enabled":"True","Socket Write Timeout":"60 secs","Request Header Attributes Pattern":null,"Response FlowFile Naming Strategy":"RANDOM","Response Cache Enabled":"false","Request Date Header Enabled":"False","Request Failure Penalization Enabled":"false","Response Body Attribute Size":"256","SSL Context Service":null,"Response Generation Required":"false","Request User-Agent":null,"Response Header Request Attributes Enabled":"false","HTTP Method":"GET","Request Username":null,"Request Content-Type":"${mime.type}","Response Body Attribute Name":null,"Request Digest Authentication Enabled":"false","Request Multipart Form-Data Name":null,"Response Cache Size":"10MB","Response Body Ignored":"false"},"propertyDescriptors":{"Request Content-Encoding":{"name":"Request Content-Encoding","displayName":"Request Content-Encoding","identifiesControllerService":false,"sensitive":false,"dynamic":false},"proxy-configuration-service":{"name":"proxy-configuration-service","displayName":"Proxy Configuration Service","identifiesControllerService":true,"sensitive":false,"dynamic":false},"Request Multipart Form-Data Filename Enabled":{"name":"Request Multipart Form-Data Filename Enabled","displayName":"Request Multipart Form-Data Filename Enabled","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request Chunked Transfer-Encoding Enabled":{"name":"Request Chunked Transfer-Encoding Enabled","displayName":"Request Chunked Transfer-Encoding Enabled","identifiesControllerService":false,"sensitive":false,"dynamic":false},"HTTP/2 Disabled":{"name":"HTTP/2 Disabled","displayName":"HTTP/2 Disabled","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Connection Timeout":{"name":"Connection Timeout","displayName":"Connection Timeout","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Response Cookie Strategy":{"name":"Response Cookie Strategy","displayName":"Response Cookie Strategy","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request Password":{"name":"Request Password","displayName":"Request Password","identifiesControllerService":false,"sensitive":true,"dynamic":false},"Socket Read Timeout":{"name":"Socket Read Timeout","displayName":"Socket Read Timeout","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Socket Idle Connections":{"name":"Socket Idle Connections","displayName":"Socket Idle Connections","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request Body Enabled":{"name":"Request Body Enabled","displayName":"Request Body Enabled","identifiesControllerService":false,"sensitive":false,"dynamic":false},"HTTP URL":{"name":"HTTP URL","displayName":"HTTP URL","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request OAuth2 Access Token Provider":{"name":"Request OAuth2 Access Token Provider","displayName":"Request OAuth2 Access Token Provider","identifiesControllerService":true,"sensitive":false,"dynamic":false},"Socket Idle Timeout":{"name":"Socket Idle Timeout","displayName":"Socket Idle Timeout","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Response Redirects Enabled":{"name":"Response Redirects Enabled","displayName":"Response Redirects Enabled","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Socket Write Timeout":{"name":"Socket Write Timeout","displayName":"Socket Write Timeout","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request Header Attributes Pattern":{"name":"Request Header Attributes Pattern","displayName":"Request Header Attributes Pattern","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Response FlowFile Naming Strategy":{"name":"Response FlowFile Naming Strategy","displayName":"Response FlowFile Naming Strategy","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Response Cache Enabled":{"name":"Response Cache Enabled","displayName":"Response Cache Enabled","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request Date Header Enabled":{"name":"Request Date Header Enabled","displayName":"Request Date Header Enabled","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request Failure Penalization Enabled":{"name":"Request Failure Penalization Enabled","displayName":"Request Failure Penalization Enabled","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Response Body Attribute Size":{"name":"Response Body Attribute Size","displayName":"Response Body Attribute Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"SSL Context Service":{"name":"SSL Context Service","displayName":"SSL Context Service","identifiesControllerService":true,"sensitive":false,"dynamic":false},"Response Generation Required":{"name":"Response Generation Required","displayName":"Response Generation Required","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request User-Agent":{"name":"Request User-Agent","displayName":"Request User-Agent","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Response Header Request Attributes Enabled":{"name":"Response Header Request Attributes Enabled","displayName":"Response Header Request Attributes Enabled","identifiesControllerService":false,"sensitive":false,"dynamic":false},"HTTP Method":{"name":"HTTP Method","displayName":"HTTP Method","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request Username":{"name":"Request Username","displayName":"Request Username","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request Content-Type":{"name":"Request Content-Type","displayName":"Request Content-Type","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Response Body Attribute Name":{"name":"Response Body Attribute Name","displayName":"Response Body Attribute Name","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request Digest Authentication Enabled":{"name":"Request Digest Authentication Enabled","displayName":"Request Digest Authentication Enabled","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request Multipart Form-Data Name":{"name":"Request Multipart Form-Data Name","displayName":"Request Multipart Form-Data Name","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Response Cache Size":{"name":"Response Cache Size","displayName":"Response Cache Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Response Body Ignored":{"name":"Response Body Ignored","displayName":"Response Body Ignored","identifiesControllerService":false,"sensitive":false,"dynamic":false}},"style":{},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["No Retry","Retry","Original","Failure"],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"b9e37c97-75a3-3ac8-a086-475b7642302f"},{"identifier":"40b6e496-e86c-3d5e-9cd7-1ab2fbc44c21","instanceIdentifier":"8ddae29b-db04-39b6-3729-2f89a1d6ed46","name":"ExecuteSQL","comments":"Faz a inclusão dos logs do fluxo no banco Postgres.","position":{"x":-344.0,"y":1352.0},"type":"org.apache.nifi.processors.standard.ExecuteSQL","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"2.0.0-M4"},"properties":{"esql-max-rows":"0","dbf-default-precision":"10","Max Wait Time":"120 seconds","Database Connection Pooling Service":"b01f5adc-e105-38a6-b878-eef024a1d25c","sql-post-query":null,"esql-auto-commit":"true","dbf-user-logical-types":"false","dbf-default-scale":"0","sql-pre-query":null,"compression-format":"NONE","esql-output-batch-size":"0","esql-fetch-size":"0","SQL select query":"insert into mass.logs \n(\"file\",\n\"start\",\n\"end\",\n\"totalDuration\",\n\"durationAfterDownload\",\n\"volumeMB\"\n) \nvalues \n('${filename}',\n'${start:format(\"yyyy-MM-dd'T'HH:mm:ss'Z'\", \"America/Sao_Paulo\")}',\n'${end}',\n'${totalDuration}',\n'${durationAfterDownload}',\n'${volumeMB}'\n)","dbf-normalize":"false"},"propertyDescriptors":{"esql-max-rows":{"name":"esql-max-rows","displayName":"Max Rows Per Flow File","identifiesControllerService":false,"sensitive":false,"dynamic":false},"dbf-default-precision":{"name":"dbf-default-precision","displayName":"Default Decimal Precision","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Max Wait Time":{"name":"Max Wait Time","displayName":"Max Wait Time","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Database Connection Pooling Service":{"name":"Database Connection Pooling Service","displayName":"Database Connection Pooling Service","identifiesControllerService":true,"sensitive":false,"dynamic":false},"sql-post-query":{"name":"sql-post-query","displayName":"SQL Post-Query","identifiesControllerService":false,"sensitive":false,"dynamic":false},"esql-auto-commit":{"name":"esql-auto-commit","displayName":"Set Auto Commit","identifiesControllerService":false,"sensitive":false,"dynamic":false},"dbf-user-logical-types":{"name":"dbf-user-logical-types","displayName":"Use Avro Logical Types","identifiesControllerService":false,"sensitive":false,"dynamic":false},"dbf-default-scale":{"name":"dbf-default-scale","displayName":"Default Decimal Scale","identifiesControllerService":false,"sensitive":false,"dynamic":false},"sql-pre-query":{"name":"sql-pre-query","displayName":"SQL Pre-Query","identifiesControllerService":false,"sensitive":false,"dynamic":false},"compression-format":{"name":"compression-format","displayName":"Compression Format","identifiesControllerService":false,"sensitive":false,"dynamic":false},"esql-output-batch-size":{"name":"esql-output-batch-size","displayName":"Output Batch Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"esql-fetch-size":{"name":"esql-fetch-size","displayName":"Fetch Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"SQL select query":{"name":"SQL select query","displayName":"SQL select query","identifiesControllerService":false,"sensitive":false,"dynamic":false},"dbf-normalize":{"name":"dbf-normalize","displayName":"Normalize Table/Column Names","identifiesControllerService":false,"sensitive":false,"dynamic":false}},"style":{},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["failure"],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"b9e37c97-75a3-3ac8-a086-475b7642302f"},{"identifier":"927046ce-921a-3f82-8dcc-04248192fd97","instanceIdentifier":"f0e7ee02-f564-33e6-d3c0-4d3684fa26b6","name":"ExecuteSQL","comments":"Faz o COPY do arquivo para o banco twomass_psc.","position":{"x":56.0,"y":888.0},"type":"org.apache.nifi.processors.standard.ExecuteSQL","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"2.0.0-M4"},"properties":{"esql-max-rows":"0","dbf-default-precision":"10","Max Wait Time":"0 seconds","Database Connection Pooling Service":"b01f5adc-e105-38a6-b878-eef024a1d25c","sql-post-query":null,"esql-auto-commit":"true","dbf-user-logical-types":"false","dbf-default-scale":"0","sql-pre-query":null,"compression-format":"NONE","esql-output-batch-size":"0","esql-fetch-size":"0","SQL select query":"COPY mass.twomass_psc\nFROM PROGRAM 'zcat /var/lib/postgresql/files/input/${filename}'\nWITH CSV DELIMITER '|' NULL '\\N';","dbf-normalize":"false"},"propertyDescriptors":{"esql-max-rows":{"name":"esql-max-rows","displayName":"Max Rows Per Flow File","identifiesControllerService":false,"sensitive":false,"dynamic":false},"dbf-default-precision":{"name":"dbf-default-precision","displayName":"Default Decimal Precision","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Max Wait Time":{"name":"Max Wait Time","displayName":"Max Wait Time","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Database Connection Pooling Service":{"name":"Database Connection Pooling Service","displayName":"Database Connection Pooling Service","identifiesControllerService":true,"sensitive":false,"dynamic":false},"sql-post-query":{"name":"sql-post-query","displayName":"SQL Post-Query","identifiesControllerService":false,"sensitive":false,"dynamic":false},"esql-auto-commit":{"name":"esql-auto-commit","displayName":"Set Auto Commit","identifiesControllerService":false,"sensitive":false,"dynamic":false},"dbf-user-logical-types":{"name":"dbf-user-logical-types","displayName":"Use Avro Logical Types","identifiesControllerService":false,"sensitive":false,"dynamic":false},"dbf-default-scale":{"name":"dbf-default-scale","displayName":"Default Decimal Scale","identifiesControllerService":false,"sensitive":false,"dynamic":false},"sql-pre-query":{"name":"sql-pre-query","displayName":"SQL Pre-Query","identifiesControllerService":false,"sensitive":false,"dynamic":false},"compression-format":{"name":"compression-format","displayName":"Compression Format","identifiesControllerService":false,"sensitive":false,"dynamic":false},"esql-output-batch-size":{"name":"esql-output-batch-size","displayName":"Output Batch Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"esql-fetch-size":{"name":"esql-fetch-size","displayName":"Fetch Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"SQL select query":{"name":"SQL select query","displayName":"SQL select query","identifiesControllerService":false,"sensitive":false,"dynamic":false},"dbf-normalize":{"name":"dbf-normalize","displayName":"Normalize Table/Column Names","identifiesControllerService":false,"sensitive":false,"dynamic":false}},"style":{},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["failure"],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"b9e37c97-75a3-3ac8-a086-475b7642302f"},{"identifier":"667d536e-2444-3dd9-ab42-fb5f59a9ea4b","instanceIdentifier":"6703bef0-c6f4-3788-62d7-89d174f285af","name":"DistributeLoad","comments":"Faz a distribuição de flowfile (paralelismo).","position":{"x":-344.0,"y":120.0},"type":"org.apache.nifi.processors.standard.DistributeLoad","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"2.0.0-M4"},"properties":{"Number of Relationships":"3","Distribution Strategy":"round robin"},"propertyDescriptors":{"Number of Relationships":{"name":"Number of Relationships","displayName":"Number of Relationships","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Distribution Strategy":{"name":"Distribution Strategy","displayName":"Distribution Strategy","identifiesControllerService":false,"sensitive":false,"dynamic":false}},"style":{},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":25,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":[],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"b9e37c97-75a3-3ac8-a086-475b7642302f"},{"identifier":"559d15c8-44f8-3f70-b85b-f58437fb3c43","instanceIdentifier":"d91c4867-47f7-338b-d6c4-746c6eb4d41d","name":"GenerateFlowFile","comments":"Inicia o processo","position":{"x":-1088.0,"y":-560.0},"type":"org.apache.nifi.processors.standard.GenerateFlowFile","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"2.0.0-M4"},"properties":{"character-set":"UTF-8","File Size":"0B","mime-type":null,"generate-ff-custom-text":null,"Batch Size":"1","Unique FlowFiles":"false","Data Format":"Text"},"propertyDescriptors":{"character-set":{"name":"character-set","displayName":"Character Set","identifiesControllerService":false,"sensitive":false,"dynamic":false},"File Size":{"name":"File Size","displayName":"File Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"mime-type":{"name":"mime-type","displayName":"Mime Type","identifiesControllerService":false,"sensitive":false,"dynamic":false},"generate-ff-custom-text":{"name":"generate-ff-custom-text","displayName":"Custom Text","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Batch Size":{"name":"Batch Size","displayName":"Batch Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Unique FlowFiles":{"name":"Unique FlowFiles","displayName":"Unique FlowFiles","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Data Format":{"name":"Data Format","displayName":"Data Format","identifiesControllerService":false,"sensitive":false,"dynamic":false}},"style":{},"schedulingPeriod":"1 hour","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":[],"scheduledState":"DISABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"b9e37c97-75a3-3ac8-a086-475b7642302f"},{"identifier":"d479a1df-463a-3c29-9c53-b8f134b288b8","instanceIdentifier":"5c8d9d7a-be35-3289-ae50-3578f0aa3e98","name":"PutFile","comments":"Faz o Input do arquivo no diretório especificado.","position":{"x":-344.0,"y":696.0},"type":"org.apache.nifi.processors.standard.PutFile","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"2.0.0-M4"},"properties":{"Group":null,"Owner":null,"Create Missing Directories":"true","Permissions":null,"Maximum File Count":null,"Last Modified Time":null,"Directory":"/opt/nifi/nifi-current/files/output/2MASS/","Conflict Resolution Strategy":"replace"},"propertyDescriptors":{"Group":{"name":"Group","displayName":"Group","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Owner":{"name":"Owner","displayName":"Owner","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Create Missing Directories":{"name":"Create Missing Directories","displayName":"Create Missing Directories","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Permissions":{"name":"Permissions","displayName":"Permissions","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Maximum File Count":{"name":"Maximum File Count","displayName":"Maximum File Count","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Last Modified Time":{"name":"Last Modified Time","displayName":"Last Modified Time","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Directory":{"name":"Directory","displayName":"Directory","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Conflict Resolution Strategy":{"name":"Conflict Resolution Strategy","displayName":"Conflict Resolution Strategy","identifiesControllerService":false,"sensitive":false,"dynamic":false}},"style":{},"schedulingPeriod":"10 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["failure"],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"b9e37c97-75a3-3ac8-a086-475b7642302f"},{"identifier":"107516ec-8928-3e9a-809b-d107ad05b92a","instanceIdentifier":"e844ae81-47f6-34a5-adee-871964a19cd1","name":"ExecuteSQL","comments":"Cria os esquemas e tabelas do banco de dados","position":{"x":-1088.0,"y":-352.0},"type":"org.apache.nifi.processors.standard.ExecuteSQL","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"2.0.0-M4"},"properties":{"esql-max-rows":"0","dbf-default-precision":"10","Max Wait Time":"0 seconds","Database Connection Pooling Service":"b01f5adc-e105-38a6-b878-eef024a1d25c","sql-post-query":"CREATE TABLE IF NOT EXISTS mass.logs (\n    \"file\" varchar,\n    \"start\" timestamp,\n    \"end\" timestamp,\n    \"totalDuration\" interval,\n\t\"durationAfterDownload\" interval,\n    \"volumeMB\" decimal(18,3)\n);","esql-auto-commit":"true","dbf-user-logical-types":"false","dbf-default-scale":"0","sql-pre-query":"CREATE SCHEMA IF NOT EXISTS mass;","compression-format":"NONE","esql-output-batch-size":"0","esql-fetch-size":"0","SQL select query":"CREATE TABLE IF NOT EXISTS mass.twomass_psc (\n    ra double precision,\n    decl double precision,\n    err_maj real,\n    err_min real,\n    err_ang smallint,\n    designation character(17),\n    j_m real,\n    j_cmsig real,\n    j_msigcom real,\n    j_snr real,\n    h_m real,\n    h_cmsig real,\n    h_msigcom real,\n    h_snr real,\n    k_m real,\n    k_cmsig real,\n    k_msigcom real,\n    k_snr real,\n    ph_qual character(3),\n    rd_flg character(3),\n    bl_flg character(3),\n    cc_flg character(3),\n    ndet character(6),\n    prox real,\n    pxpa smallint,\n    pxcntr integer,\n    gal_contam smallint,\n    mp_flg smallint,\n    pts_key integer,\n    hemis character(1),\n    date date,\n    scan smallint,\n    glon real,\n    glat real,\n    x_scan real,\n    jdate double precision,\n    j_psfchi real,\n    h_psfchi real,\n    k_psfchi real,\n    j_m_stdap real,\n    j_msig_stdap real,\n    h_m_stdap real,\n    h_msig_stdap real,\n    k_m_stdap real,\n    k_msig_stdap real,\n    dist_edge_ns integer,\n    dist_edge_ew integer,\n    dist_edge_flg character(2),\n    dup_src smallint,\n    use_src smallint,\n    a character(1),\n    dist_opt real,\n    phi_opt smallint,\n    b_m_opt real,\n    vr_m_opt real,\n    nopt_mchs smallint,\n    ext_key integer,\n    scan_key integer,\n    coadd_key integer,\n    coadd smallint\n) WITHOUT OIDS;","dbf-normalize":"false"},"propertyDescriptors":{"esql-max-rows":{"name":"esql-max-rows","displayName":"Max Rows Per Flow File","identifiesControllerService":false,"sensitive":false,"dynamic":false},"dbf-default-precision":{"name":"dbf-default-precision","displayName":"Default Decimal Precision","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Max Wait Time":{"name":"Max Wait Time","displayName":"Max Wait Time","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Database Connection Pooling Service":{"name":"Database Connection Pooling Service","displayName":"Database Connection Pooling Service","identifiesControllerService":true,"sensitive":false,"dynamic":false},"sql-post-query":{"name":"sql-post-query","displayName":"SQL Post-Query","identifiesControllerService":false,"sensitive":false,"dynamic":false},"esql-auto-commit":{"name":"esql-auto-commit","displayName":"Set Auto Commit","identifiesControllerService":false,"sensitive":false,"dynamic":false},"dbf-user-logical-types":{"name":"dbf-user-logical-types","displayName":"Use Avro Logical Types","identifiesControllerService":false,"sensitive":false,"dynamic":false},"dbf-default-scale":{"name":"dbf-default-scale","displayName":"Default Decimal Scale","identifiesControllerService":false,"sensitive":false,"dynamic":false},"sql-pre-query":{"name":"sql-pre-query","displayName":"SQL Pre-Query","identifiesControllerService":false,"sensitive":false,"dynamic":false},"compression-format":{"name":"compression-format","displayName":"Compression Format","identifiesControllerService":false,"sensitive":false,"dynamic":false},"esql-output-batch-size":{"name":"esql-output-batch-size","displayName":"Output Batch Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"esql-fetch-size":{"name":"esql-fetch-size","displayName":"Fetch Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"SQL select query":{"name":"SQL select query","displayName":"SQL select query","identifiesControllerService":false,"sensitive":false,"dynamic":false},"dbf-normalize":{"name":"dbf-normalize","displayName":"Normalize Table/Column Names","identifiesControllerService":false,"sensitive":false,"dynamic":false}},"style":{},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["success","failure"],"scheduledState":"DISABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"b9e37c97-75a3-3ac8-a086-475b7642302f"},{"identifier":"c65dd281-b217-34ad-b21a-21082b41cc72","instanceIdentifier":"b7589d68-0ed3-3927-3717-730753d48c9a","name":"InvokeHTTP","comments":"Faz a requisição para baixar o arquivo, conforme conteúdo da variável file.","position":{"x":-744.0,"y":312.0},"type":"org.apache.nifi.processors.standard.InvokeHTTP","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"2.0.0-M4"},"properties":{"Request Content-Encoding":"DISABLED","proxy-configuration-service":null,"Request Multipart Form-Data Filename Enabled":"true","Request Chunked Transfer-Encoding Enabled":"false","HTTP/2 Disabled":"False","Connection Timeout":"600 secs","Response Cookie Strategy":"DISABLED","Socket Read Timeout":"600 secs","Socket Idle Connections":"5","Request Body Enabled":"true","HTTP URL":"${url2MASS}${file.0}","Request OAuth2 Access Token Provider":null,"Socket Idle Timeout":"5 mins","Response Redirects Enabled":"True","Socket Write Timeout":"60 secs","Request Header Attributes Pattern":null,"Response FlowFile Naming Strategy":"RANDOM","Response Cache Enabled":"false","Request Date Header Enabled":"False","Request Failure Penalization Enabled":"false","Response Body Attribute Size":"256","SSL Context Service":null,"Response Generation Required":"false","Request User-Agent":null,"Response Header Request Attributes Enabled":"false","HTTP Method":"GET","Request Username":null,"Request Content-Type":"${mime.type}","Response Body Attribute Name":null,"Request Digest Authentication Enabled":"false","Request Multipart Form-Data Name":null,"Response Cache Size":"10MB","Response Body Ignored":"false"},"propertyDescriptors":{"Request Content-Encoding":{"name":"Request Content-Encoding","displayName":"Request Content-Encoding","identifiesControllerService":false,"sensitive":false,"dynamic":false},"proxy-configuration-service":{"name":"proxy-configuration-service","displayName":"Proxy Configuration Service","identifiesControllerService":true,"sensitive":false,"dynamic":false},"Request Multipart Form-Data Filename Enabled":{"name":"Request Multipart Form-Data Filename Enabled","displayName":"Request Multipart Form-Data Filename Enabled","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request Chunked Transfer-Encoding Enabled":{"name":"Request Chunked Transfer-Encoding Enabled","displayName":"Request Chunked Transfer-Encoding Enabled","identifiesControllerService":false,"sensitive":false,"dynamic":false},"HTTP/2 Disabled":{"name":"HTTP/2 Disabled","displayName":"HTTP/2 Disabled","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Connection Timeout":{"name":"Connection Timeout","displayName":"Connection Timeout","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Response Cookie Strategy":{"name":"Response Cookie Strategy","displayName":"Response Cookie Strategy","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request Password":{"name":"Request Password","displayName":"Request Password","identifiesControllerService":false,"sensitive":true,"dynamic":false},"Socket Read Timeout":{"name":"Socket Read Timeout","displayName":"Socket Read Timeout","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Socket Idle Connections":{"name":"Socket Idle Connections","displayName":"Socket Idle Connections","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request Body Enabled":{"name":"Request Body Enabled","displayName":"Request Body Enabled","identifiesControllerService":false,"sensitive":false,"dynamic":false},"HTTP URL":{"name":"HTTP URL","displayName":"HTTP URL","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request OAuth2 Access Token Provider":{"name":"Request OAuth2 Access Token Provider","displayName":"Request OAuth2 Access Token Provider","identifiesControllerService":true,"sensitive":false,"dynamic":false},"Socket Idle Timeout":{"name":"Socket Idle Timeout","displayName":"Socket Idle Timeout","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Response Redirects Enabled":{"name":"Response Redirects Enabled","displayName":"Response Redirects Enabled","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Socket Write Timeout":{"name":"Socket Write Timeout","displayName":"Socket Write Timeout","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request Header Attributes Pattern":{"name":"Request Header Attributes Pattern","displayName":"Request Header Attributes Pattern","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Response FlowFile Naming Strategy":{"name":"Response FlowFile Naming Strategy","displayName":"Response FlowFile Naming Strategy","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Response Cache Enabled":{"name":"Response Cache Enabled","displayName":"Response Cache Enabled","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request Date Header Enabled":{"name":"Request Date Header Enabled","displayName":"Request Date Header Enabled","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request Failure Penalization Enabled":{"name":"Request Failure Penalization Enabled","displayName":"Request Failure Penalization Enabled","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Response Body Attribute Size":{"name":"Response Body Attribute Size","displayName":"Response Body Attribute Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"SSL Context Service":{"name":"SSL Context Service","displayName":"SSL Context Service","identifiesControllerService":true,"sensitive":false,"dynamic":false},"Response Generation Required":{"name":"Response Generation Required","displayName":"Response Generation Required","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request User-Agent":{"name":"Request User-Agent","displayName":"Request User-Agent","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Response Header Request Attributes Enabled":{"name":"Response Header Request Attributes Enabled","displayName":"Response Header Request Attributes Enabled","identifiesControllerService":false,"sensitive":false,"dynamic":false},"HTTP Method":{"name":"HTTP Method","displayName":"HTTP Method","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request Username":{"name":"Request Username","displayName":"Request Username","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request Content-Type":{"name":"Request Content-Type","displayName":"Request Content-Type","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Response Body Attribute Name":{"name":"Response Body Attribute Name","displayName":"Response Body Attribute Name","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request Digest Authentication Enabled":{"name":"Request Digest Authentication Enabled","displayName":"Request Digest Authentication Enabled","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request Multipart Form-Data Name":{"name":"Request Multipart Form-Data Name","displayName":"Request Multipart Form-Data Name","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Response Cache Size":{"name":"Response Cache Size","displayName":"Response Cache Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Response Body Ignored":{"name":"Response Body Ignored","displayName":"Response Body Ignored","identifiesControllerService":false,"sensitive":false,"dynamic":false}},"style":{},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["No Retry","Retry","Original","Failure"],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"b9e37c97-75a3-3ac8-a086-475b7642302f"},{"identifier":"a102e862-3fd2-368d-81f1-7d708bf9891d","instanceIdentifier":"d7a26ea3-a0aa-3ed7-9926-bf34057b45d4","name":"ExecuteSQL","comments":"Faz o COPY do arquivo para o banco twomass_psc.","position":{"x":-344.0,"y":888.0},"type":"org.apache.nifi.processors.standard.ExecuteSQL","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"2.0.0-M4"},"properties":{"esql-max-rows":"0","dbf-default-precision":"10","Max Wait Time":"0 seconds","Database Connection Pooling Service":"b01f5adc-e105-38a6-b878-eef024a1d25c","sql-post-query":null,"esql-auto-commit":"true","dbf-user-logical-types":"false","dbf-default-scale":"0","sql-pre-query":null,"compression-format":"NONE","esql-output-batch-size":"0","esql-fetch-size":"0","SQL select query":"COPY mass.twomass_psc\nFROM PROGRAM 'zcat /var/lib/postgresql/files/input/${filename}'\nWITH CSV DELIMITER '|' NULL '\\N';","dbf-normalize":"false"},"propertyDescriptors":{"esql-max-rows":{"name":"esql-max-rows","displayName":"Max Rows Per Flow File","identifiesControllerService":false,"sensitive":false,"dynamic":false},"dbf-default-precision":{"name":"dbf-default-precision","displayName":"Default Decimal Precision","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Max Wait Time":{"name":"Max Wait Time","displayName":"Max Wait Time","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Database Connection Pooling Service":{"name":"Database Connection Pooling Service","displayName":"Database Connection Pooling Service","identifiesControllerService":true,"sensitive":false,"dynamic":false},"sql-post-query":{"name":"sql-post-query","displayName":"SQL Post-Query","identifiesControllerService":false,"sensitive":false,"dynamic":false},"esql-auto-commit":{"name":"esql-auto-commit","displayName":"Set Auto Commit","identifiesControllerService":false,"sensitive":false,"dynamic":false},"dbf-user-logical-types":{"name":"dbf-user-logical-types","displayName":"Use Avro Logical Types","identifiesControllerService":false,"sensitive":false,"dynamic":false},"dbf-default-scale":{"name":"dbf-default-scale","displayName":"Default Decimal Scale","identifiesControllerService":false,"sensitive":false,"dynamic":false},"sql-pre-query":{"name":"sql-pre-query","displayName":"SQL Pre-Query","identifiesControllerService":false,"sensitive":false,"dynamic":false},"compression-format":{"name":"compression-format","displayName":"Compression Format","identifiesControllerService":false,"sensitive":false,"dynamic":false},"esql-output-batch-size":{"name":"esql-output-batch-size","displayName":"Output Batch Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"esql-fetch-size":{"name":"esql-fetch-size","displayName":"Fetch Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"SQL select query":{"name":"SQL select query","displayName":"SQL select query","identifiesControllerService":false,"sensitive":false,"dynamic":false},"dbf-normalize":{"name":"dbf-normalize","displayName":"Normalize Table/Column Names","identifiesControllerService":false,"sensitive":false,"dynamic":false}},"style":{},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["failure"],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"b9e37c97-75a3-3ac8-a086-475b7642302f"},{"identifier":"072f3931-cd58-34c0-8720-a3219325051c","instanceIdentifier":"46d3eaf7-f688-3fae-ba09-d69499dff1a7","name":"UpdateAttribute","comments":"Armazenada o nome do arquivo na variável \"filename\".","position":{"x":-744.0,"y":504.0},"type":"org.apache.nifi.processors.attributes.UpdateAttribute","bundle":{"group":"org.apache.nifi","artifact":"nifi-update-attribute-nar","version":"2.0.0-M4"},"properties":{"startAfterDownload":"${now():toNumber()}","volumeMB":"${fileSize:divide(1024):divide(1024)}","Delete Attributes Expression":null,"filename":"${file.0}","Store State":"Do not store state","canonical-value-lookup-cache-size":"100","Stateful Variables Initial Value":null},"propertyDescriptors":{"startAfterDownload":{"name":"startAfterDownload","displayName":"startAfterDownload","identifiesControllerService":false,"sensitive":false,"dynamic":true},"volumeMB":{"name":"volumeMB","displayName":"volumeMB","identifiesControllerService":false,"sensitive":false,"dynamic":true},"Delete Attributes Expression":{"name":"Delete Attributes Expression","displayName":"Delete Attributes Expression","identifiesControllerService":false,"sensitive":false,"dynamic":false},"filename":{"name":"filename","displayName":"filename","identifiesControllerService":false,"sensitive":false,"dynamic":true},"Store State":{"name":"Store State","displayName":"Store State","identifiesControllerService":false,"sensitive":false,"dynamic":false},"canonical-value-lookup-cache-size":{"name":"canonical-value-lookup-cache-size","displayName":"Cache Value Lookup Cache Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Stateful Variables Initial Value":{"name":"Stateful Variables Initial Value","displayName":"Stateful Variables Initial Value","identifiesControllerService":false,"sensitive":false,"dynamic":false}},"style":{},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":25,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":[],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"b9e37c97-75a3-3ac8-a086-475b7642302f"},{"identifier":"82315c9b-618a-3deb-82b5-5013594387fa","instanceIdentifier":"4e15410e-e101-3e41-f57e-f023d36c5ef1","name":"ExtractText","comments":"Faz a extração (em REGEX) de arquivos com início \"psc\" , extensão \".gz\" e armazena na variável \"file\".","position":{"x":-344.0,"y":-16.0},"type":"org.apache.nifi.processors.standard.ExtractText","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"2.0.0-M4"},"properties":{"Enable Unicode Predefined Character Classes":"false","Permit Whitespace and Comments in Pattern":"false","Enable Unicode-aware Case Folding":"false","Enable named group support":"false","Enable DOTALL Mode":"false","Enable Unix Lines Mode":"false","Maximum Buffer Size":"1 MB","Enable Canonical Equivalence":"false","Enable Case-insensitive Matching":"false","Enable Multiline Mode":"false","file":"psc\\w*\\.gz","Enable repeating capture group":"false","Maximum Capture Group Length":"1024","Enable Literal Parsing of the Pattern":"false","Character Set":"UTF-8","Include Capture Group 0":"true"},"propertyDescriptors":{"Enable Unicode Predefined Character Classes":{"name":"Enable Unicode Predefined Character Classes","displayName":"Enable Unicode Predefined Character Classes","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Permit Whitespace and Comments in Pattern":{"name":"Permit Whitespace and Comments in Pattern","displayName":"Permit Whitespace and Comments in Pattern","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Enable Unicode-aware Case Folding":{"name":"Enable Unicode-aware Case Folding","displayName":"Enable Unicode-aware Case Folding","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Enable named group support":{"name":"Enable named group support","displayName":"Enable named group support","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Enable DOTALL Mode":{"name":"Enable DOTALL Mode","displayName":"Enable DOTALL Mode","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Enable Unix Lines Mode":{"name":"Enable Unix Lines Mode","displayName":"Enable Unix Lines Mode","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Maximum Buffer Size":{"name":"Maximum Buffer Size","displayName":"Maximum Buffer Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Enable Canonical Equivalence":{"name":"Enable Canonical Equivalence","displayName":"Enable Canonical Equivalence","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Enable Case-insensitive Matching":{"name":"Enable Case-insensitive Matching","displayName":"Enable Case-insensitive Matching","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Enable Multiline Mode":{"name":"Enable Multiline Mode","displayName":"Enable Multiline Mode","identifiesControllerService":false,"sensitive":false,"dynamic":false},"file":{"name":"file","displayName":"file","identifiesControllerService":false,"sensitive":false,"dynamic":true},"Enable repeating capture group":{"name":"Enable repeating capture group","displayName":"Enable repeating capture group","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Maximum Capture Group Length":{"name":"Maximum Capture Group Length","displayName":"Maximum Capture Group Length","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Enable Literal Parsing of the Pattern":{"name":"Enable Literal Parsing of the Pattern","displayName":"Enable Literal Parsing of the Pattern","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Character Set":{"name":"Character Set","displayName":"Character Set","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Include Capture Group 0":{"name":"Include Capture Group 0","displayName":"Include Capture Group 0","identifiesControllerService":false,"sensitive":false,"dynamic":false}},"style":{},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":20,"autoTerminatedRelationships":["unmatched"],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"b9e37c97-75a3-3ac8-a086-475b7642302f"},{"identifier":"e81383c4-195c-3bea-bb51-47cc4c5ecbda","instanceIdentifier":"e24c9085-1b05-3ee1-95c4-a6b0729f93a7","name":"SplitText","comments":"Divide o html linha a linha.","position":{"x":-344.0,"y":-152.0},"type":"org.apache.nifi.processors.standard.SplitText","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"2.0.0-M4"},"properties":{"Remove Trailing Newlines":"true","Maximum Fragment Size":null,"Header Line Marker Characters":null,"Header Line Count":"0","Line Split Count":"1"},"propertyDescriptors":{"Remove Trailing Newlines":{"name":"Remove Trailing Newlines","displayName":"Remove Trailing Newlines","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Maximum Fragment Size":{"name":"Maximum Fragment Size","displayName":"Maximum Fragment Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Header Line Marker Characters":{"name":"Header Line Marker Characters","displayName":"Header Line Marker Characters","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Header Line Count":{"name":"Header Line Count","displayName":"Header Line Count","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Line Split Count":{"name":"Line Split Count","displayName":"Line Split Count","identifiesControllerService":false,"sensitive":false,"dynamic":false}},"style":{},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["original","failure"],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"b9e37c97-75a3-3ac8-a086-475b7642302f"},{"identifier":"b48340a0-2c3f-365a-9555-d3ca4dbf4f41","instanceIdentifier":"3586eafa-5fb6-347f-8955-c18848d80350","name":"InvokeHTTP","comments":"Faz a requisição para baixar o arquivo, conforme conteúdo da variável file.","position":{"x":-344.0,"y":312.0},"type":"org.apache.nifi.processors.standard.InvokeHTTP","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"2.0.0-M4"},"properties":{"Request Content-Encoding":"DISABLED","proxy-configuration-service":null,"Request Multipart Form-Data Filename Enabled":"true","Request Chunked Transfer-Encoding Enabled":"false","HTTP/2 Disabled":"False","Connection Timeout":"600 secs","Response Cookie Strategy":"DISABLED","Socket Read Timeout":"600 secs","Socket Idle Connections":"5","Request Body Enabled":"true","HTTP URL":"${url2MASS}${file.0}","Request OAuth2 Access Token Provider":null,"Socket Idle Timeout":"5 mins","Response Redirects Enabled":"True","Socket Write Timeout":"60 secs","Request Header Attributes Pattern":null,"Response FlowFile Naming Strategy":"RANDOM","Response Cache Enabled":"false","Request Date Header Enabled":"False","Request Failure Penalization Enabled":"false","Response Body Attribute Size":"256","SSL Context Service":null,"Response Generation Required":"false","Request User-Agent":null,"Response Header Request Attributes Enabled":"false","HTTP Method":"GET","Request Username":null,"Request Content-Type":"${mime.type}","Response Body Attribute Name":null,"Request Digest Authentication Enabled":"false","Request Multipart Form-Data Name":null,"Response Cache Size":"10MB","Response Body Ignored":"false"},"propertyDescriptors":{"Request Content-Encoding":{"name":"Request Content-Encoding","displayName":"Request Content-Encoding","identifiesControllerService":false,"sensitive":false,"dynamic":false},"proxy-configuration-service":{"name":"proxy-configuration-service","displayName":"Proxy Configuration Service","identifiesControllerService":true,"sensitive":false,"dynamic":false},"Request Multipart Form-Data Filename Enabled":{"name":"Request Multipart Form-Data Filename Enabled","displayName":"Request Multipart Form-Data Filename Enabled","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request Chunked Transfer-Encoding Enabled":{"name":"Request Chunked Transfer-Encoding Enabled","displayName":"Request Chunked Transfer-Encoding Enabled","identifiesControllerService":false,"sensitive":false,"dynamic":false},"HTTP/2 Disabled":{"name":"HTTP/2 Disabled","displayName":"HTTP/2 Disabled","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Connection Timeout":{"name":"Connection Timeout","displayName":"Connection Timeout","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Response Cookie Strategy":{"name":"Response Cookie Strategy","displayName":"Response Cookie Strategy","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request Password":{"name":"Request Password","displayName":"Request Password","identifiesControllerService":false,"sensitive":true,"dynamic":false},"Socket Read Timeout":{"name":"Socket Read Timeout","displayName":"Socket Read Timeout","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Socket Idle Connections":{"name":"Socket Idle Connections","displayName":"Socket Idle Connections","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request Body Enabled":{"name":"Request Body Enabled","displayName":"Request Body Enabled","identifiesControllerService":false,"sensitive":false,"dynamic":false},"HTTP URL":{"name":"HTTP URL","displayName":"HTTP URL","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request OAuth2 Access Token Provider":{"name":"Request OAuth2 Access Token Provider","displayName":"Request OAuth2 Access Token Provider","identifiesControllerService":true,"sensitive":false,"dynamic":false},"Socket Idle Timeout":{"name":"Socket Idle Timeout","displayName":"Socket Idle Timeout","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Response Redirects Enabled":{"name":"Response Redirects Enabled","displayName":"Response Redirects Enabled","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Socket Write Timeout":{"name":"Socket Write Timeout","displayName":"Socket Write Timeout","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request Header Attributes Pattern":{"name":"Request Header Attributes Pattern","displayName":"Request Header Attributes Pattern","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Response FlowFile Naming Strategy":{"name":"Response FlowFile Naming Strategy","displayName":"Response FlowFile Naming Strategy","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Response Cache Enabled":{"name":"Response Cache Enabled","displayName":"Response Cache Enabled","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request Date Header Enabled":{"name":"Request Date Header Enabled","displayName":"Request Date Header Enabled","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request Failure Penalization Enabled":{"name":"Request Failure Penalization Enabled","displayName":"Request Failure Penalization Enabled","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Response Body Attribute Size":{"name":"Response Body Attribute Size","displayName":"Response Body Attribute Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"SSL Context Service":{"name":"SSL Context Service","displayName":"SSL Context Service","identifiesControllerService":true,"sensitive":false,"dynamic":false},"Response Generation Required":{"name":"Response Generation Required","displayName":"Response Generation Required","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request User-Agent":{"name":"Request User-Agent","displayName":"Request User-Agent","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Response Header Request Attributes Enabled":{"name":"Response Header Request Attributes Enabled","displayName":"Response Header Request Attributes Enabled","identifiesControllerService":false,"sensitive":false,"dynamic":false},"HTTP Method":{"name":"HTTP Method","displayName":"HTTP Method","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request Username":{"name":"Request Username","displayName":"Request Username","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request Content-Type":{"name":"Request Content-Type","displayName":"Request Content-Type","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Response Body Attribute Name":{"name":"Response Body Attribute Name","displayName":"Response Body Attribute Name","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request Digest Authentication Enabled":{"name":"Request Digest Authentication Enabled","displayName":"Request Digest Authentication Enabled","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request Multipart Form-Data Name":{"name":"Request Multipart Form-Data Name","displayName":"Request Multipart Form-Data Name","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Response Cache Size":{"name":"Response Cache Size","displayName":"Response Cache Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Response Body Ignored":{"name":"Response Body Ignored","displayName":"Response Body Ignored","identifiesControllerService":false,"sensitive":false,"dynamic":false}},"style":{},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["No Retry","Retry","Original","Failure"],"scheduledState":"DISABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"b9e37c97-75a3-3ac8-a086-475b7642302f"},{"identifier":"5150737e-e386-3072-9c73-26ab990baa12","instanceIdentifier":"7420ffd8-a544-3cf6-8490-b6d4666b751e","name":"PutFile","comments":"Faz o Input do arquivo no diretório especificado.","position":{"x":-744.0,"y":696.0},"type":"org.apache.nifi.processors.standard.PutFile","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"2.0.0-M4"},"properties":{"Group":null,"Owner":null,"Create Missing Directories":"true","Permissions":null,"Maximum File Count":null,"Last Modified Time":null,"Directory":"/opt/nifi/nifi-current/files/output/2MASS/","Conflict Resolution Strategy":"replace"},"propertyDescriptors":{"Group":{"name":"Group","displayName":"Group","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Owner":{"name":"Owner","displayName":"Owner","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Create Missing Directories":{"name":"Create Missing Directories","displayName":"Create Missing Directories","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Permissions":{"name":"Permissions","displayName":"Permissions","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Maximum File Count":{"name":"Maximum File Count","displayName":"Maximum File Count","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Last Modified Time":{"name":"Last Modified Time","displayName":"Last Modified Time","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Directory":{"name":"Directory","displayName":"Directory","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Conflict Resolution Strategy":{"name":"Conflict Resolution Strategy","displayName":"Conflict Resolution Strategy","identifiesControllerService":false,"sensitive":false,"dynamic":false}},"style":{},"schedulingPeriod":"10 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["failure"],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"b9e37c97-75a3-3ac8-a086-475b7642302f"},{"identifier":"e167a478-7c61-3108-bfcb-3b147d4638a1","instanceIdentifier":"a1f9dca3-7e85-3cee-fc73-a203f65b3b3d","name":"GenerateFlowFile","comments":"Inicia o processo","position":{"x":-344.0,"y":-560.0},"type":"org.apache.nifi.processors.standard.GenerateFlowFile","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"2.0.0-M4"},"properties":{"character-set":"UTF-8","File Size":"0B","mime-type":null,"generate-ff-custom-text":null,"Batch Size":"1","Unique FlowFiles":"false","url2MASS":"https://irsa.ipac.caltech.edu/2MASS/download/allsky/","Data Format":"Text"},"propertyDescriptors":{"character-set":{"name":"character-set","displayName":"Character Set","identifiesControllerService":false,"sensitive":false,"dynamic":false},"File Size":{"name":"File Size","displayName":"File Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"mime-type":{"name":"mime-type","displayName":"Mime Type","identifiesControllerService":false,"sensitive":false,"dynamic":false},"generate-ff-custom-text":{"name":"generate-ff-custom-text","displayName":"Custom Text","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Batch Size":{"name":"Batch Size","displayName":"Batch Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Unique FlowFiles":{"name":"Unique FlowFiles","displayName":"Unique FlowFiles","identifiesControllerService":false,"sensitive":false,"dynamic":false},"url2MASS":{"name":"url2MASS","displayName":"url2MASS","identifiesControllerService":false,"sensitive":false,"dynamic":true},"Data Format":{"name":"Data Format","displayName":"Data Format","identifiesControllerService":false,"sensitive":false,"dynamic":false}},"style":{},"schedulingPeriod":"1 hour","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":[],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"b9e37c97-75a3-3ac8-a086-475b7642302f"},{"identifier":"64736766-04ae-31c7-9f7b-73bf4168ee77","instanceIdentifier":"6de08e90-76e5-3318-d6fc-7cba386d0b64","name":"UpdateAttribute","comments":"Armazenada o nome do arquivo na variável \"filename\".","position":{"x":-344.0,"y":504.0},"type":"org.apache.nifi.processors.attributes.UpdateAttribute","bundle":{"group":"org.apache.nifi","artifact":"nifi-update-attribute-nar","version":"2.0.0-M4"},"properties":{"volumeMB":"${fileSize:divide(1024):divide(1024)}","startAfterDownload":"${now():toNumber()}","Delete Attributes Expression":null,"filename":"${file.0}","Store State":"Do not store state","canonical-value-lookup-cache-size":"100","Stateful Variables Initial Value":null},"propertyDescriptors":{"volumeMB":{"name":"volumeMB","displayName":"volumeMB","identifiesControllerService":false,"sensitive":false,"dynamic":true},"startAfterDownload":{"name":"startAfterDownload","displayName":"startAfterDownload","identifiesControllerService":false,"sensitive":false,"dynamic":true},"Delete Attributes Expression":{"name":"Delete Attributes Expression","displayName":"Delete Attributes Expression","identifiesControllerService":false,"sensitive":false,"dynamic":false},"filename":{"name":"filename","displayName":"filename","identifiesControllerService":false,"sensitive":false,"dynamic":true},"Store State":{"name":"Store State","displayName":"Store State","identifiesControllerService":false,"sensitive":false,"dynamic":false},"canonical-value-lookup-cache-size":{"name":"canonical-value-lookup-cache-size","displayName":"Cache Value Lookup Cache Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Stateful Variables Initial Value":{"name":"Stateful Variables Initial Value","displayName":"Stateful Variables Initial Value","identifiesControllerService":false,"sensitive":false,"dynamic":false}},"style":{},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":25,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":[],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"b9e37c97-75a3-3ac8-a086-475b7642302f"}],"inputPorts":[],"outputPorts":[],"connections":[{"identifier":"48315a7f-49ff-37ef-879d-690e25002272","instanceIdentifier":"b72d9be8-f9d8-31a6-85f3-7f57a620cdac","name":"","source":{"id":"d479a1df-463a-3c29-9c53-b8f134b288b8","type":"PROCESSOR","groupId":"b9e37c97-75a3-3ac8-a086-475b7642302f","name":"PutFile","comments":"Faz o Input do arquivo no diretório especificado.","instanceIdentifier":"5c8d9d7a-be35-3289-ae50-3578f0aa3e98"},"destination":{"id":"a102e862-3fd2-368d-81f1-7d708bf9891d","type":"PROCESSOR","groupId":"b9e37c97-75a3-3ac8-a086-475b7642302f","name":"ExecuteSQL","comments":"Faz o COPY do arquivo para o banco twomass_psc.","instanceIdentifier":"d7a26ea3-a0aa-3ed7-9926-bf34057b45d4"},"labelIndex":0,"zIndex":0,"selectedRelationships":["success"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"10 GB","flowFileExpiration":"0 sec","prioritizers":["org.apache.nifi.prioritizer.FirstInFirstOutPrioritizer"],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"b9e37c97-75a3-3ac8-a086-475b7642302f"},{"identifier":"fa145d0d-6314-3344-878e-cce13c908234","instanceIdentifier":"e4744eb2-39c2-3968-e42a-257ef62c4279","name":"","source":{"id":"3cbfb771-9c60-3c73-b123-1f0ee8456384","type":"PROCESSOR","groupId":"b9e37c97-75a3-3ac8-a086-475b7642302f","name":"InvokeHTTP","comments":"Faz a requisição para baixar o arquivo, conforme conteúdo da variável file.","instanceIdentifier":"2b581dbc-324f-3076-1349-1879762a1a2b"},"destination":{"id":"5591c247-3cfc-3664-b36f-ba601bcd3167","type":"PROCESSOR","groupId":"b9e37c97-75a3-3ac8-a086-475b7642302f","name":"UpdateAttribute","comments":"Armazenada o nome do arquivo na variável \"filename\".","instanceIdentifier":"222b0051-9832-3515-0256-92bb170be9df"},"labelIndex":1,"zIndex":0,"selectedRelationships":["Response"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"10 GB","flowFileExpiration":"0 sec","prioritizers":["org.apache.nifi.prioritizer.FirstInFirstOutPrioritizer"],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"b9e37c97-75a3-3ac8-a086-475b7642302f"},{"identifier":"19d96d06-55c4-300a-8ab2-54643a8794e6","instanceIdentifier":"b8a48805-45df-3033-4450-4e7fff690440","name":"","source":{"id":"a102e862-3fd2-368d-81f1-7d708bf9891d","type":"PROCESSOR","groupId":"b9e37c97-75a3-3ac8-a086-475b7642302f","name":"ExecuteSQL","comments":"Faz o COPY do arquivo para o banco twomass_psc.","instanceIdentifier":"d7a26ea3-a0aa-3ed7-9926-bf34057b45d4"},"destination":{"id":"230dca7a-0119-3635-90cf-4f7357c9c211","type":"FUNNEL","groupId":"b9e37c97-75a3-3ac8-a086-475b7642302f","name":"Funnel","comments":"","instanceIdentifier":"4d412f88-c1f0-325c-623c-ff7b5aa69d72"},"labelIndex":0,"zIndex":0,"selectedRelationships":["success"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"10 GB","flowFileExpiration":"0 sec","prioritizers":["org.apache.nifi.prioritizer.FirstInFirstOutPrioritizer"],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"b9e37c97-75a3-3ac8-a086-475b7642302f"},{"identifier":"a0583540-5f2d-3370-b595-698d51b00888","instanceIdentifier":"7fb6f07c-3689-30c5-204b-c8ad97e29e70","name":"","source":{"id":"5591c247-3cfc-3664-b36f-ba601bcd3167","type":"PROCESSOR","groupId":"b9e37c97-75a3-3ac8-a086-475b7642302f","name":"UpdateAttribute","comments":"Armazenada o nome do arquivo na variável \"filename\".","instanceIdentifier":"222b0051-9832-3515-0256-92bb170be9df"},"destination":{"id":"d571c70f-01af-377f-8c4c-aa60f75502d3","type":"PROCESSOR","groupId":"b9e37c97-75a3-3ac8-a086-475b7642302f","name":"PutFile","comments":"Faz o Input do arquivo no diretório especificado.","instanceIdentifier":"92d1e152-e6ea-374f-692f-7dff1bdf422e"},"labelIndex":1,"zIndex":0,"selectedRelationships":["success"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"10 GB","flowFileExpiration":"0 sec","prioritizers":["org.apache.nifi.prioritizer.FirstInFirstOutPrioritizer"],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"b9e37c97-75a3-3ac8-a086-475b7642302f"},{"identifier":"d9644c1f-847d-3978-835f-595f7e5d8c1c","instanceIdentifier":"274b09a7-68ab-3a42-3ea6-874a7048010c","name":"","source":{"id":"667d536e-2444-3dd9-ab42-fb5f59a9ea4b","type":"PROCESSOR","groupId":"b9e37c97-75a3-3ac8-a086-475b7642302f","name":"DistributeLoad","comments":"Faz a distribuição de flowfile (paralelismo).","instanceIdentifier":"6703bef0-c6f4-3788-62d7-89d174f285af"},"destination":{"id":"b48340a0-2c3f-365a-9555-d3ca4dbf4f41","type":"PROCESSOR","groupId":"b9e37c97-75a3-3ac8-a086-475b7642302f","name":"InvokeHTTP","comments":"Faz a requisição para baixar o arquivo, conforme conteúdo da variável file.","instanceIdentifier":"3586eafa-5fb6-347f-8955-c18848d80350"},"labelIndex":0,"zIndex":0,"selectedRelationships":["2"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":["org.apache.nifi.prioritizer.FirstInFirstOutPrioritizer"],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"b9e37c97-75a3-3ac8-a086-475b7642302f"},{"identifier":"f18399b0-0a07-3a76-8bb6-e888a9d41b10","instanceIdentifier":"9d61a8f0-b97b-3eb7-1086-7a2a8ce291f8","name":"","source":{"id":"40b6e496-e86c-3d5e-9cd7-1ab2fbc44c21","type":"PROCESSOR","groupId":"b9e37c97-75a3-3ac8-a086-475b7642302f","name":"ExecuteSQL","comments":"Faz a inclusão dos logs do fluxo no banco Postgres.","instanceIdentifier":"8ddae29b-db04-39b6-3729-2f89a1d6ed46"},"destination":{"id":"ee62d94b-efd1-3e11-a4d1-aae7303c7d6e","type":"PROCESSOR","groupId":"b9e37c97-75a3-3ac8-a086-475b7642302f","name":"PublishSlack","comments":"Dispara uma mensagem no SLACK com informações do fluxo.","instanceIdentifier":"d68acfd3-027f-37c1-805d-4054fda16b26"},"labelIndex":1,"zIndex":0,"selectedRelationships":["success"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"10 GB","flowFileExpiration":"0 sec","prioritizers":["org.apache.nifi.prioritizer.FirstInFirstOutPrioritizer"],"bends":[{"x":134.48428344726562,"y":1476.8870849609375}],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"b9e37c97-75a3-3ac8-a086-475b7642302f"},{"identifier":"b818b03b-80bf-3a2d-ad79-66b1bed37a6d","instanceIdentifier":"587ffe51-f4ba-3e45-e627-d00ca76c3381","name":"","source":{"id":"e167a478-7c61-3108-bfcb-3b147d4638a1","type":"PROCESSOR","groupId":"b9e37c97-75a3-3ac8-a086-475b7642302f","name":"GenerateFlowFile","comments":"Inicia o processo","instanceIdentifier":"a1f9dca3-7e85-3cee-fc73-a203f65b3b3d"},"destination":{"id":"a904f67b-c300-3d3c-b73c-281463568947","type":"PROCESSOR","groupId":"b9e37c97-75a3-3ac8-a086-475b7642302f","name":"UpdateAttribute","comments":"Cria variável para armazenar o início da coleta.","instanceIdentifier":"f72a80cf-9808-3009-02fc-2adc97b4c5c6"},"labelIndex":1,"zIndex":0,"selectedRelationships":["success"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":["org.apache.nifi.prioritizer.FirstInFirstOutPrioritizer"],"bends":[{"x":136.0,"y":-432.0}],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"b9e37c97-75a3-3ac8-a086-475b7642302f"},{"identifier":"02229f12-37fa-3742-b625-f9c6d6ae3736","instanceIdentifier":"e586a46b-e936-31a0-8d24-d7f4216cc96f","name":"","source":{"id":"927046ce-921a-3f82-8dcc-04248192fd97","type":"PROCESSOR","groupId":"b9e37c97-75a3-3ac8-a086-475b7642302f","name":"ExecuteSQL","comments":"Faz o COPY do arquivo para o banco twomass_psc.","instanceIdentifier":"f0e7ee02-f564-33e6-d3c0-4d3684fa26b6"},"destination":{"id":"230dca7a-0119-3635-90cf-4f7357c9c211","type":"FUNNEL","groupId":"b9e37c97-75a3-3ac8-a086-475b7642302f","name":"Funnel","comments":"","instanceIdentifier":"4d412f88-c1f0-325c-623c-ff7b5aa69d72"},"labelIndex":0,"zIndex":0,"selectedRelationships":["success"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"10 GB","flowFileExpiration":"0 sec","prioritizers":["org.apache.nifi.prioritizer.FirstInFirstOutPrioritizer"],"bends":[{"x":232.0,"y":1128.0}],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"b9e37c97-75a3-3ac8-a086-475b7642302f"},{"identifier":"bae152da-04db-345d-917e-2c677bbac57e","instanceIdentifier":"969712dc-57a0-3ebe-0e34-b2f04bb5996b","name":"","source":{"id":"383d2b30-58c4-3060-88cc-5e9ab9222019","type":"PROCESSOR","groupId":"b9e37c97-75a3-3ac8-a086-475b7642302f","name":"UpdateAttribute","comments":"Cria variáveis para o controle de duração do pipeline.","instanceIdentifier":"4fdac891-b99b-3f22-90f9-458adc1a46bc"},"destination":{"id":"40b6e496-e86c-3d5e-9cd7-1ab2fbc44c21","type":"PROCESSOR","groupId":"b9e37c97-75a3-3ac8-a086-475b7642302f","name":"ExecuteSQL","comments":"Faz a inclusão dos logs do fluxo no banco Postgres.","instanceIdentifier":"8ddae29b-db04-39b6-3729-2f89a1d6ed46"},"labelIndex":1,"zIndex":0,"selectedRelationships":["success"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"10 GB","flowFileExpiration":"0 sec","prioritizers":["org.apache.nifi.prioritizer.FirstInFirstOutPrioritizer"],"bends":[{"x":134.48428344726562,"y":1340.8870849609375}],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"b9e37c97-75a3-3ac8-a086-475b7642302f"},{"identifier":"c1166008-31dd-3a9f-b422-5eb8ffbdad9b","instanceIdentifier":"1ae45437-45e1-3694-6d39-6c37a8432ff8","name":"","source":{"id":"e81383c4-195c-3bea-bb51-47cc4c5ecbda","type":"PROCESSOR","groupId":"b9e37c97-75a3-3ac8-a086-475b7642302f","name":"SplitText","comments":"Divide o html linha a linha.","instanceIdentifier":"e24c9085-1b05-3ee1-95c4-a6b0729f93a7"},"destination":{"id":"82315c9b-618a-3deb-82b5-5013594387fa","type":"PROCESSOR","groupId":"b9e37c97-75a3-3ac8-a086-475b7642302f","name":"ExtractText","comments":"Faz a extração (em REGEX) de arquivos com início \"psc\" , extensão \".gz\" e armazena na variável \"file\".","instanceIdentifier":"4e15410e-e101-3e41-f57e-f023d36c5ef1"},"labelIndex":1,"zIndex":0,"selectedRelationships":["splits"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":["org.apache.nifi.prioritizer.FirstInFirstOutPrioritizer"],"bends":[{"x":136.0,"y":-24.0}],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"b9e37c97-75a3-3ac8-a086-475b7642302f"},{"identifier":"c9b0dc02-86b5-3133-b399-379a3d4b995f","instanceIdentifier":"0581dd23-511b-3e96-008f-7911dfee7cd8","name":"","source":{"id":"667d536e-2444-3dd9-ab42-fb5f59a9ea4b","type":"PROCESSOR","groupId":"b9e37c97-75a3-3ac8-a086-475b7642302f","name":"DistributeLoad","comments":"Faz a distribuição de flowfile (paralelismo).","instanceIdentifier":"6703bef0-c6f4-3788-62d7-89d174f285af"},"destination":{"id":"c65dd281-b217-34ad-b21a-21082b41cc72","type":"PROCESSOR","groupId":"b9e37c97-75a3-3ac8-a086-475b7642302f","name":"InvokeHTTP","comments":"Faz a requisição para baixar o arquivo, conforme conteúdo da variável file.","instanceIdentifier":"b7589d68-0ed3-3927-3717-730753d48c9a"},"labelIndex":0,"zIndex":0,"selectedRelationships":["1"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":["org.apache.nifi.prioritizer.FirstInFirstOutPrioritizer"],"bends":[{"x":-568.0,"y":184.0}],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"b9e37c97-75a3-3ac8-a086-475b7642302f"},{"identifier":"7f86b6d6-5fa7-36d7-b7b7-11320eb18992","instanceIdentifier":"54214996-4031-3fe0-173d-5493218c42cb","name":"","source":{"id":"c65dd281-b217-34ad-b21a-21082b41cc72","type":"PROCESSOR","groupId":"b9e37c97-75a3-3ac8-a086-475b7642302f","name":"InvokeHTTP","comments":"Faz a requisição para baixar o arquivo, conforme conteúdo da variável file.","instanceIdentifier":"b7589d68-0ed3-3927-3717-730753d48c9a"},"destination":{"id":"072f3931-cd58-34c0-8720-a3219325051c","type":"PROCESSOR","groupId":"b9e37c97-75a3-3ac8-a086-475b7642302f","name":"UpdateAttribute","comments":"Armazenada o nome do arquivo na variável \"filename\".","instanceIdentifier":"46d3eaf7-f688-3fae-ba09-d69499dff1a7"},"labelIndex":0,"zIndex":0,"selectedRelationships":["Response"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":["org.apache.nifi.prioritizer.FirstInFirstOutPrioritizer"],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"b9e37c97-75a3-3ac8-a086-475b7642302f"},{"identifier":"d68331cb-0ddb-308c-87ee-29b057fbb77b","instanceIdentifier":"36637222-95c7-3340-9a28-f91307f360c0","name":"","source":{"id":"a904f67b-c300-3d3c-b73c-281463568947","type":"PROCESSOR","groupId":"b9e37c97-75a3-3ac8-a086-475b7642302f","name":"UpdateAttribute","comments":"Cria variável para armazenar o início da coleta.","instanceIdentifier":"f72a80cf-9808-3009-02fc-2adc97b4c5c6"},"destination":{"id":"873a9be5-fbf3-3d22-9553-aded611b069c","type":"PROCESSOR","groupId":"b9e37c97-75a3-3ac8-a086-475b7642302f","name":"InvokeHTTP","comments":"Acessa a URL do 2MASS e coleta o html da página.","instanceIdentifier":"2c5b53d5-5d62-3d17-f6fc-b64c7d4a355a"},"labelIndex":0,"zIndex":0,"selectedRelationships":["success"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[{"x":136.0,"y":-304.0}],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"b9e37c97-75a3-3ac8-a086-475b7642302f"},{"identifier":"5cae611c-2811-3e46-91d5-6d126b838c70","instanceIdentifier":"19ddb061-661c-3a35-4d80-b577d88e1972","name":"","source":{"id":"072f3931-cd58-34c0-8720-a3219325051c","type":"PROCESSOR","groupId":"b9e37c97-75a3-3ac8-a086-475b7642302f","name":"UpdateAttribute","comments":"Armazenada o nome do arquivo na variável \"filename\".","instanceIdentifier":"46d3eaf7-f688-3fae-ba09-d69499dff1a7"},"destination":{"id":"5150737e-e386-3072-9c73-26ab990baa12","type":"PROCESSOR","groupId":"b9e37c97-75a3-3ac8-a086-475b7642302f","name":"PutFile","comments":"Faz o Input do arquivo no diretório especificado.","instanceIdentifier":"7420ffd8-a544-3cf6-8490-b6d4666b751e"},"labelIndex":0,"zIndex":0,"selectedRelationships":["success"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"10 GB","flowFileExpiration":"0 sec","prioritizers":["org.apache.nifi.prioritizer.FirstInFirstOutPrioritizer"],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"b9e37c97-75a3-3ac8-a086-475b7642302f"},{"identifier":"a07f16bd-a5df-3233-bd71-2d163f28286e","instanceIdentifier":"9b8188ba-0c99-37a4-c0a4-ddcb16657f39","name":"","source":{"id":"b48340a0-2c3f-365a-9555-d3ca4dbf4f41","type":"PROCESSOR","groupId":"b9e37c97-75a3-3ac8-a086-475b7642302f","name":"InvokeHTTP","comments":"Faz a requisição para baixar o arquivo, conforme conteúdo da variável file.","instanceIdentifier":"3586eafa-5fb6-347f-8955-c18848d80350"},"destination":{"id":"64736766-04ae-31c7-9f7b-73bf4168ee77","type":"PROCESSOR","groupId":"b9e37c97-75a3-3ac8-a086-475b7642302f","name":"UpdateAttribute","comments":"Armazenada o nome do arquivo na variável \"filename\".","instanceIdentifier":"6de08e90-76e5-3318-d6fc-7cba386d0b64"},"labelIndex":0,"zIndex":0,"selectedRelationships":["Response"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"10 GB","flowFileExpiration":"0 sec","prioritizers":["org.apache.nifi.prioritizer.FirstInFirstOutPrioritizer"],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"b9e37c97-75a3-3ac8-a086-475b7642302f"},{"identifier":"85613dab-7de2-310a-9e75-99fd3e34a7cb","instanceIdentifier":"8fcd6355-2952-3830-7df4-7a957b7e484a","name":"","source":{"id":"64736766-04ae-31c7-9f7b-73bf4168ee77","type":"PROCESSOR","groupId":"b9e37c97-75a3-3ac8-a086-475b7642302f","name":"UpdateAttribute","comments":"Armazenada o nome do arquivo na variável \"filename\".","instanceIdentifier":"6de08e90-76e5-3318-d6fc-7cba386d0b64"},"destination":{"id":"d479a1df-463a-3c29-9c53-b8f134b288b8","type":"PROCESSOR","groupId":"b9e37c97-75a3-3ac8-a086-475b7642302f","name":"PutFile","comments":"Faz o Input do arquivo no diretório especificado.","instanceIdentifier":"5c8d9d7a-be35-3289-ae50-3578f0aa3e98"},"labelIndex":0,"zIndex":0,"selectedRelationships":["success"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"10 GB","flowFileExpiration":"0 sec","prioritizers":["org.apache.nifi.prioritizer.FirstInFirstOutPrioritizer"],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"b9e37c97-75a3-3ac8-a086-475b7642302f"},{"identifier":"7c5f5aa0-fcc0-3c72-9e2b-ecb03a5e5f40","instanceIdentifier":"a8103054-d864-3fc3-19db-bcf2e61e892f","name":"","source":{"id":"82315c9b-618a-3deb-82b5-5013594387fa","type":"PROCESSOR","groupId":"b9e37c97-75a3-3ac8-a086-475b7642302f","name":"ExtractText","comments":"Faz a extração (em REGEX) de arquivos com início \"psc\" , extensão \".gz\" e armazena na variável \"file\".","instanceIdentifier":"4e15410e-e101-3e41-f57e-f023d36c5ef1"},"destination":{"id":"667d536e-2444-3dd9-ab42-fb5f59a9ea4b","type":"PROCESSOR","groupId":"b9e37c97-75a3-3ac8-a086-475b7642302f","name":"DistributeLoad","comments":"Faz a distribuição de flowfile (paralelismo).","instanceIdentifier":"6703bef0-c6f4-3788-62d7-89d174f285af"},"labelIndex":1,"zIndex":0,"selectedRelationships":["matched"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":["org.apache.nifi.prioritizer.FirstInFirstOutPrioritizer"],"bends":[{"x":136.0,"y":112.0}],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"b9e37c97-75a3-3ac8-a086-475b7642302f"},{"identifier":"7f2eb214-8f6b-3ad1-affe-1e2e8b09e361","instanceIdentifier":"8299feae-ab41-3da1-e41d-b2a7fcc0a47a","name":"","source":{"id":"230dca7a-0119-3635-90cf-4f7357c9c211","type":"FUNNEL","groupId":"b9e37c97-75a3-3ac8-a086-475b7642302f","name":"Funnel","comments":"","instanceIdentifier":"4d412f88-c1f0-325c-623c-ff7b5aa69d72"},"destination":{"id":"383d2b30-58c4-3060-88cc-5e9ab9222019","type":"PROCESSOR","groupId":"b9e37c97-75a3-3ac8-a086-475b7642302f","name":"UpdateAttribute","comments":"Cria variáveis para o controle de duração do pipeline.","instanceIdentifier":"4fdac891-b99b-3f22-90f9-458adc1a46bc"},"labelIndex":0,"zIndex":0,"selectedRelationships":[""],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"10 GB","flowFileExpiration":"0 sec","prioritizers":["org.apache.nifi.prioritizer.FirstInFirstOutPrioritizer"],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"b9e37c97-75a3-3ac8-a086-475b7642302f"},{"identifier":"6d7ba16f-74ec-3fc5-ba20-831ff70a2554","instanceIdentifier":"2cec41cf-b4b9-3d50-584e-c012d62b6963","name":"","source":{"id":"f7def34a-cee1-341c-98b8-6bd5054d867f","type":"PROCESSOR","groupId":"b9e37c97-75a3-3ac8-a086-475b7642302f","name":"ExecuteSQL","comments":"Faz o COPY do arquivo para o banco twomass_psc.","instanceIdentifier":"6d12f44c-44c1-3246-0bfd-48b38a2c9478"},"destination":{"id":"230dca7a-0119-3635-90cf-4f7357c9c211","type":"FUNNEL","groupId":"b9e37c97-75a3-3ac8-a086-475b7642302f","name":"Funnel","comments":"","instanceIdentifier":"4d412f88-c1f0-325c-623c-ff7b5aa69d72"},"labelIndex":0,"zIndex":0,"selectedRelationships":["success"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"10 GB","flowFileExpiration":"0 sec","prioritizers":["org.apache.nifi.prioritizer.FirstInFirstOutPrioritizer"],"bends":[{"x":-568.0,"y":1128.0}],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"b9e37c97-75a3-3ac8-a086-475b7642302f"},{"identifier":"72a6d9be-4ca6-3e0a-a953-b0936b814759","instanceIdentifier":"cb234aaf-d62f-36a8-629a-ef3da865cecd","name":"","source":{"id":"667d536e-2444-3dd9-ab42-fb5f59a9ea4b","type":"PROCESSOR","groupId":"b9e37c97-75a3-3ac8-a086-475b7642302f","name":"DistributeLoad","comments":"Faz a distribuição de flowfile (paralelismo).","instanceIdentifier":"6703bef0-c6f4-3788-62d7-89d174f285af"},"destination":{"id":"3cbfb771-9c60-3c73-b123-1f0ee8456384","type":"PROCESSOR","groupId":"b9e37c97-75a3-3ac8-a086-475b7642302f","name":"InvokeHTTP","comments":"Faz a requisição para baixar o arquivo, conforme conteúdo da variável file.","instanceIdentifier":"2b581dbc-324f-3076-1349-1879762a1a2b"},"labelIndex":0,"zIndex":0,"selectedRelationships":["3"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[{"x":232.0,"y":184.0}],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"b9e37c97-75a3-3ac8-a086-475b7642302f"},{"identifier":"fe5c578a-d868-3b2d-8937-4d3a03368962","instanceIdentifier":"442b8e7e-28b5-3b66-fe7b-1446af88bd0e","name":"","source":{"id":"873a9be5-fbf3-3d22-9553-aded611b069c","type":"PROCESSOR","groupId":"b9e37c97-75a3-3ac8-a086-475b7642302f","name":"InvokeHTTP","comments":"Acessa a URL do 2MASS e coleta o html da página.","instanceIdentifier":"2c5b53d5-5d62-3d17-f6fc-b64c7d4a355a"},"destination":{"id":"e81383c4-195c-3bea-bb51-47cc4c5ecbda","type":"PROCESSOR","groupId":"b9e37c97-75a3-3ac8-a086-475b7642302f","name":"SplitText","comments":"Divide o html linha a linha.","instanceIdentifier":"e24c9085-1b05-3ee1-95c4-a6b0729f93a7"},"labelIndex":1,"zIndex":0,"selectedRelationships":["Response"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":["org.apache.nifi.prioritizer.FirstInFirstOutPrioritizer"],"bends":[{"x":136.0,"y":-160.0}],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"b9e37c97-75a3-3ac8-a086-475b7642302f"},{"identifier":"16983837-6124-30f3-aad3-d6dff7fd4178","instanceIdentifier":"1153b7e1-42c1-3a49-6fce-d1949f6573bc","name":"","source":{"id":"559d15c8-44f8-3f70-b85b-f58437fb3c43","type":"PROCESSOR","groupId":"b9e37c97-75a3-3ac8-a086-475b7642302f","name":"GenerateFlowFile","comments":"Inicia o processo","instanceIdentifier":"d91c4867-47f7-338b-d6c4-746c6eb4d41d"},"destination":{"id":"107516ec-8928-3e9a-809b-d107ad05b92a","type":"PROCESSOR","groupId":"b9e37c97-75a3-3ac8-a086-475b7642302f","name":"ExecuteSQL","comments":"Cria os esquemas e tabelas do banco de dados","instanceIdentifier":"e844ae81-47f6-34a5-adee-871964a19cd1"},"labelIndex":0,"zIndex":0,"selectedRelationships":["success"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"b9e37c97-75a3-3ac8-a086-475b7642302f"},{"identifier":"857f5b3b-75b3-31f7-931a-2adbce5ee26b","instanceIdentifier":"ac5eaaca-c31e-39a9-f189-349f996e36db","name":"","source":{"id":"5150737e-e386-3072-9c73-26ab990baa12","type":"PROCESSOR","groupId":"b9e37c97-75a3-3ac8-a086-475b7642302f","name":"PutFile","comments":"Faz o Input do arquivo no diretório especificado.","instanceIdentifier":"7420ffd8-a544-3cf6-8490-b6d4666b751e"},"destination":{"id":"f7def34a-cee1-341c-98b8-6bd5054d867f","type":"PROCESSOR","groupId":"b9e37c97-75a3-3ac8-a086-475b7642302f","name":"ExecuteSQL","comments":"Faz o COPY do arquivo para o banco twomass_psc.","instanceIdentifier":"6d12f44c-44c1-3246-0bfd-48b38a2c9478"},"labelIndex":0,"zIndex":0,"selectedRelationships":["success"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"10 GB","flowFileExpiration":"0 sec","prioritizers":["org.apache.nifi.prioritizer.FirstInFirstOutPrioritizer"],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"b9e37c97-75a3-3ac8-a086-475b7642302f"},{"identifier":"7a179f34-0427-3ab0-9111-69e65b2904e4","instanceIdentifier":"878d64f7-20e8-3181-929d-3be33dffb387","name":"","source":{"id":"d571c70f-01af-377f-8c4c-aa60f75502d3","type":"PROCESSOR","groupId":"b9e37c97-75a3-3ac8-a086-475b7642302f","name":"PutFile","comments":"Faz o Input do arquivo no diretório especificado.","instanceIdentifier":"92d1e152-e6ea-374f-692f-7dff1bdf422e"},"destination":{"id":"927046ce-921a-3f82-8dcc-04248192fd97","type":"PROCESSOR","groupId":"b9e37c97-75a3-3ac8-a086-475b7642302f","name":"ExecuteSQL","comments":"Faz o COPY do arquivo para o banco twomass_psc.","instanceIdentifier":"f0e7ee02-f564-33e6-d3c0-4d3684fa26b6"},"labelIndex":1,"zIndex":0,"selectedRelationships":["success"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"10 GB","flowFileExpiration":"0 sec","prioritizers":["org.apache.nifi.prioritizer.FirstInFirstOutPrioritizer"],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"b9e37c97-75a3-3ac8-a086-475b7642302f"}],"labels":[{"identifier":"ed794de9-a0d1-343d-86cf-1ef49bacd75e","instanceIdentifier":"ceb4e657-e40b-3d7a-9cdb-15e4ac596667","position":{"x":-344.0,"y":-616.0},"label":"Inicia a coleta dos dados.","zIndex":0,"width":352.0,"height":40.0,"style":{"background-color":"#052beb","font-size":"14px"},"componentType":"LABEL","groupIdentifier":"b9e37c97-75a3-3ac8-a086-475b7642302f"},{"identifier":"a32e3897-4b48-3f2a-b847-fbd347df151b","instanceIdentifier":"985bf91c-f59d-3dda-86ea-73d250e52ce5","position":{"x":-1088.0,"y":-616.0},"label":"Cria os schemas e tabelas","zIndex":0,"width":352.0,"height":40.0,"style":{"background-color":"#052beb","font-size":"14px"},"componentType":"LABEL","groupIdentifier":"b9e37c97-75a3-3ac8-a086-475b7642302f"}],"funnels":[{"identifier":"230dca7a-0119-3635-90cf-4f7357c9c211","instanceIdentifier":"4d412f88-c1f0-325c-623c-ff7b5aa69d72","position":{"x":-192.0,"y":1104.0},"componentType":"FUNNEL","groupIdentifier":"b9e37c97-75a3-3ac8-a086-475b7642302f"}],"controllerServices":[{"identifier":"65465cf9-6a16-3c86-8548-f681414816c1","instanceIdentifier":"637300ca-a8e7-3587-a796-d0a51c1c2046","name":"CSVReader","comments":"","type":"org.apache.nifi.csv.CSVReader","bundle":{"group":"org.apache.nifi","artifact":"nifi-record-serialization-services-nar","version":"2.0.0-M4"},"properties":{"schema-reference-reader":null,"ignore-csv-header":"false","schema-branch":null,"Trim double quote":"true","CSV Format":"custom","Quote Character":"\"","csvutils-allow-duplicate-header-names":"true","Value Separator":",","Record Separator":"\\n","Timestamp Format":null,"Escape Character":"\\","Date Format":null,"Null String":null,"Skip Header Line":"false","Trim Fields":"true","schema-name":"${schema.name}","schema-registry":null,"csv-reader-csv-parser":"commons-csv","Time Format":null,"Comment Marker":null,"schema-access-strategy":"infer-schema","schema-version":null,"csvutils-character-set":"UTF-8","schema-text":"${avro.schema}"},"propertyDescriptors":{"schema-reference-reader":{"name":"schema-reference-reader","displayName":"Schema Reference Reader","identifiesControllerService":true,"sensitive":false,"dynamic":false},"ignore-csv-header":{"name":"ignore-csv-header","displayName":"Ignore CSV Header Column Names","identifiesControllerService":false,"sensitive":false,"dynamic":false},"schema-branch":{"name":"schema-branch","displayName":"Schema Branch","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Trim double quote":{"name":"Trim double quote","displayName":"Trim double quote","identifiesControllerService":false,"sensitive":false,"dynamic":false},"CSV Format":{"name":"CSV Format","displayName":"CSV Format","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Quote Character":{"name":"Quote Character","displayName":"Quote Character","identifiesControllerService":false,"sensitive":false,"dynamic":false},"csvutils-allow-duplicate-header-names":{"name":"csvutils-allow-duplicate-header-names","displayName":"Allow Duplicate Header Names","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Value Separator":{"name":"Value Separator","displayName":"Value Separator","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Record Separator":{"name":"Record Separator","displayName":"Record Separator","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Timestamp Format":{"name":"Timestamp Format","displayName":"Timestamp Format","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Escape Character":{"name":"Escape Character","displayName":"Escape Character","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Date Format":{"name":"Date Format","displayName":"Date Format","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Null String":{"name":"Null String","displayName":"Null String","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Skip Header Line":{"name":"Skip Header Line","displayName":"Treat First Line as Header","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Trim Fields":{"name":"Trim Fields","displayName":"Trim Fields","identifiesControllerService":false,"sensitive":false,"dynamic":false},"schema-name":{"name":"schema-name","displayName":"Schema Name","identifiesControllerService":false,"sensitive":false,"dynamic":false},"schema-registry":{"name":"schema-registry","displayName":"Schema Registry","identifiesControllerService":true,"sensitive":false,"dynamic":false},"csv-reader-csv-parser":{"name":"csv-reader-csv-parser","displayName":"CSV Parser","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Time Format":{"name":"Time Format","displayName":"Time Format","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Comment Marker":{"name":"Comment Marker","displayName":"Comment Marker","identifiesControllerService":false,"sensitive":false,"dynamic":false},"schema-access-strategy":{"name":"schema-access-strategy","displayName":"Schema Access Strategy","identifiesControllerService":false,"sensitive":false,"dynamic":false},"schema-version":{"name":"schema-version","displayName":"Schema Version","identifiesControllerService":false,"sensitive":false,"dynamic":false},"csvutils-character-set":{"name":"csvutils-character-set","displayName":"Character Set","identifiesControllerService":false,"sensitive":false,"dynamic":false},"schema-text":{"name":"schema-text","displayName":"Schema Text","identifiesControllerService":false,"sensitive":false,"dynamic":false}},"controllerServiceApis":[{"type":"org.apache.nifi.serialization.RecordReaderFactory","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-services-api-nar","version":"2.0.0-M4"}}],"scheduledState":"DISABLED","bulletinLevel":"WARN","componentType":"CONTROLLER_SERVICE","groupIdentifier":"b9e37c97-75a3-3ac8-a086-475b7642302f"}],"parameterContextName":"Workshop 2","defaultFlowFileExpiration":"0 sec","defaultBackPressureObjectThreshold":10000,"defaultBackPressureDataSizeThreshold":"1 GB","scheduledState":"ENABLED","executionEngine":"INHERITED","maxConcurrentTasks":1,"statelessFlowTimeout":"1 min","flowFileConcurrency":"UNBOUNDED","flowFileOutboundPolicy":"STREAM_WHEN_AVAILABLE","componentType":"PROCESS_GROUP","groupIdentifier":"6694ab51-dc3d-3850-80e6-48a52b28418d"},{"identifier":"fa708b60-7972-370a-9d7c-b67804acdb88","instanceIdentifier":"7db2c034-0d0c-3eed-5e71-caeb27164123","name":"Nifi Expression Language","comments":"","position":{"x":-176.0,"y":80.0},"processGroups":[{"identifier":"59c651be-55cf-38b5-a2fb-8cbded54e08a","instanceIdentifier":"a820a5a5-feb9-3a82-280d-2cc0b1aafe21","name":"Weather API","comments":"","position":{"x":128.0,"y":-672.0},"processGroups":[],"remoteProcessGroups":[],"processors":[{"identifier":"e4218253-e413-35ab-a03c-e84b2f08174c","instanceIdentifier":"c77abd68-0f8a-3569-e7d6-bc554b923702","name":"InvokeHTTP","comments":"Processor para consumir a API passando variável e parâmetros no endpoint","position":{"x":1248.0,"y":-560.0},"type":"org.apache.nifi.processors.standard.InvokeHTTP","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"2.0.0-M4"},"properties":{"Request Content-Encoding":"DISABLED","proxy-configuration-service":null,"Request Multipart Form-Data Filename Enabled":"true","Request Chunked Transfer-Encoding Enabled":"false","HTTP/2 Disabled":"False","Connection Timeout":"600 secs","Response Cookie Strategy":"DISABLED","Socket Read Timeout":"600 secs","Socket Idle Connections":"5","Request Body Enabled":"true","HTTP URL":"#{weather_url}key=#{weather_key}&q=${weather_cidade}&aqi=no","Request OAuth2 Access Token Provider":null,"Socket Idle Timeout":"5 mins","Response Redirects Enabled":"True","Socket Write Timeout":"60 secs","Request Header Attributes Pattern":null,"Response FlowFile Naming Strategy":"RANDOM","Response Cache Enabled":"false","Request Date Header Enabled":"False","Request Failure Penalization Enabled":"false","Response Body Attribute Size":"256","SSL Context Service":null,"Response Generation Required":"false","Request User-Agent":null,"Response Header Request Attributes Enabled":"false","HTTP Method":"GET","Request Username":null,"Request Content-Type":"${mime.type}","Response Body Attribute Name":null,"Request Digest Authentication Enabled":"false","Request Multipart Form-Data Name":null,"Response Cache Size":"10MB","Response Body Ignored":"false"},"propertyDescriptors":{"Request Content-Encoding":{"name":"Request Content-Encoding","displayName":"Request Content-Encoding","identifiesControllerService":false,"sensitive":false,"dynamic":false},"proxy-configuration-service":{"name":"proxy-configuration-service","displayName":"Proxy Configuration Service","identifiesControllerService":true,"sensitive":false,"dynamic":false},"Request Multipart Form-Data Filename Enabled":{"name":"Request Multipart Form-Data Filename Enabled","displayName":"Request Multipart Form-Data Filename Enabled","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request Chunked Transfer-Encoding Enabled":{"name":"Request Chunked Transfer-Encoding Enabled","displayName":"Request Chunked Transfer-Encoding Enabled","identifiesControllerService":false,"sensitive":false,"dynamic":false},"HTTP/2 Disabled":{"name":"HTTP/2 Disabled","displayName":"HTTP/2 Disabled","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Connection Timeout":{"name":"Connection Timeout","displayName":"Connection Timeout","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Response Cookie Strategy":{"name":"Response Cookie Strategy","displayName":"Response Cookie Strategy","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request Password":{"name":"Request Password","displayName":"Request Password","identifiesControllerService":false,"sensitive":true,"dynamic":false},"Socket Read Timeout":{"name":"Socket Read Timeout","displayName":"Socket Read Timeout","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Socket Idle Connections":{"name":"Socket Idle Connections","displayName":"Socket Idle Connections","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request Body Enabled":{"name":"Request Body Enabled","displayName":"Request Body Enabled","identifiesControllerService":false,"sensitive":false,"dynamic":false},"HTTP URL":{"name":"HTTP URL","displayName":"HTTP URL","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request OAuth2 Access Token Provider":{"name":"Request OAuth2 Access Token Provider","displayName":"Request OAuth2 Access Token Provider","identifiesControllerService":true,"sensitive":false,"dynamic":false},"Socket Idle Timeout":{"name":"Socket Idle Timeout","displayName":"Socket Idle Timeout","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Response Redirects Enabled":{"name":"Response Redirects Enabled","displayName":"Response Redirects Enabled","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Socket Write Timeout":{"name":"Socket Write Timeout","displayName":"Socket Write Timeout","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request Header Attributes Pattern":{"name":"Request Header Attributes Pattern","displayName":"Request Header Attributes Pattern","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Response FlowFile Naming Strategy":{"name":"Response FlowFile Naming Strategy","displayName":"Response FlowFile Naming Strategy","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Response Cache Enabled":{"name":"Response Cache Enabled","displayName":"Response Cache Enabled","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request Date Header Enabled":{"name":"Request Date Header Enabled","displayName":"Request Date Header Enabled","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request Failure Penalization Enabled":{"name":"Request Failure Penalization Enabled","displayName":"Request Failure Penalization Enabled","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Response Body Attribute Size":{"name":"Response Body Attribute Size","displayName":"Response Body Attribute Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"SSL Context Service":{"name":"SSL Context Service","displayName":"SSL Context Service","identifiesControllerService":true,"sensitive":false,"dynamic":false},"Response Generation Required":{"name":"Response Generation Required","displayName":"Response Generation Required","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request User-Agent":{"name":"Request User-Agent","displayName":"Request User-Agent","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Response Header Request Attributes Enabled":{"name":"Response Header Request Attributes Enabled","displayName":"Response Header Request Attributes Enabled","identifiesControllerService":false,"sensitive":false,"dynamic":false},"HTTP Method":{"name":"HTTP Method","displayName":"HTTP Method","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request Username":{"name":"Request Username","displayName":"Request Username","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request Content-Type":{"name":"Request Content-Type","displayName":"Request Content-Type","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Response Body Attribute Name":{"name":"Response Body Attribute Name","displayName":"Response Body Attribute Name","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request Digest Authentication Enabled":{"name":"Request Digest Authentication Enabled","displayName":"Request Digest Authentication Enabled","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Request Multipart Form-Data Name":{"name":"Request Multipart Form-Data Name","displayName":"Request Multipart Form-Data Name","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Response Cache Size":{"name":"Response Cache Size","displayName":"Response Cache Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Response Body Ignored":{"name":"Response Body Ignored","displayName":"Response Body Ignored","identifiesControllerService":false,"sensitive":false,"dynamic":false}},"style":{},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["No Retry","Retry","Original","Failure"],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"59c651be-55cf-38b5-a2fb-8cbded54e08a"},{"identifier":"29d5c69d-5f0e-38fd-9993-102b003493aa","instanceIdentifier":"b21ca84b-ec94-3ce1-4e6e-00da5fd5c1a4","name":"UpdateAttribute","comments":"NiFi Expression Language","position":{"x":1248.0,"y":-288.0},"type":"org.apache.nifi.processors.attributes.UpdateAttribute","bundle":{"group":"org.apache.nifi","artifact":"nifi-update-attribute-nar","version":"2.0.0-M4"},"properties":{"cidade":"${cidade:toUpper()}","Delete Attributes Expression":null,"país":"${país:equals('Brazil'):ifElse('Brasil',${país})}","Store State":"Do not store state","canonical-value-lookup-cache-size":"100","ultima_atualização":"${ultima_atualização:toDate('yyyy-MM-dd HH:mm'):format('dd/MM/yyyy HH:mm')}","Stateful Variables Initial Value":null},"propertyDescriptors":{"cidade":{"name":"cidade","displayName":"cidade","identifiesControllerService":false,"sensitive":false,"dynamic":true},"Delete Attributes Expression":{"name":"Delete Attributes Expression","displayName":"Delete Attributes Expression","identifiesControllerService":false,"sensitive":false,"dynamic":false},"país":{"name":"país","displayName":"país","identifiesControllerService":false,"sensitive":false,"dynamic":true},"Store State":{"name":"Store State","displayName":"Store State","identifiesControllerService":false,"sensitive":false,"dynamic":false},"canonical-value-lookup-cache-size":{"name":"canonical-value-lookup-cache-size","displayName":"Cache Value Lookup Cache Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"ultima_atualização":{"name":"ultima_atualização","displayName":"ultima_atualização","identifiesControllerService":false,"sensitive":false,"dynamic":true},"Stateful Variables Initial Value":{"name":"Stateful Variables Initial Value","displayName":"Stateful Variables Initial Value","identifiesControllerService":false,"sensitive":false,"dynamic":false}},"style":{"background-color":"#ed0707"},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":25,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":[],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"59c651be-55cf-38b5-a2fb-8cbded54e08a"},{"identifier":"634d02c2-fb14-3708-802f-d4806e3c68c0","instanceIdentifier":"85fb00c1-a58f-3061-1381-4b92ba647809","name":"PutEmail","comments":"Disparo de e-mail em HMTL com as informações do clima da cidade pesquisada","position":{"x":1248.0,"y":-152.0},"type":"org.apache.nifi.processors.standard.PutEmail","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"2.0.0-M4"},"properties":{"CC":null,"SMTP Socket Factory":"javax.net.ssl.SSLSocketFactory","BCC":null,"Message":"<p><img src=\"http://cdn.weatherapi.com/weather/64x64/day/116.png\" alt=\"Condição\">\n<br>\n${condição}</p>\n<h2>Temperatura: ${temperatura}°C</h2>\n<h3>Humidade: ${humidade}%</h3>\n<h3>${cidade} - ${país}</h3>\n<p>Atualização: ${ultima_atualização}h</p>","Attach File":"false","attribute-name-regex":null,"input-character-set":"UTF-8","SMTP Port":"#{smtp_port}","SMTP Auth":"true","From":"#{smtp_username}","Include All Attributes In Message":"false","SMTP Hostname":"#{smtp_hostname}","Subject":"\uD83C\uDF21️ Clima na cidade: ${cidade}","SMTP X-Mailer Header":"NiFi","oauth2-access-token-provider":null,"Content Type":"text/html; charset=\"utf-8\"","SMTP Username":"#{smtp_username}","To":"alecssanderm@gmail.com","SMTP Password":"#{smtp_password}","email-ff-content-as-message":"false","authorization-mode":"password-based-authorization-mode","SMTP TLS":"true"},"propertyDescriptors":{"CC":{"name":"CC","displayName":"CC","identifiesControllerService":false,"sensitive":false,"dynamic":false},"SMTP Socket Factory":{"name":"SMTP Socket Factory","displayName":"SMTP Socket Factory","identifiesControllerService":false,"sensitive":false,"dynamic":false},"BCC":{"name":"BCC","displayName":"BCC","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Message":{"name":"Message","displayName":"Message","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Attach File":{"name":"Attach File","displayName":"Attach File","identifiesControllerService":false,"sensitive":false,"dynamic":false},"attribute-name-regex":{"name":"attribute-name-regex","displayName":"Attributes to Send as Headers (Regex)","identifiesControllerService":false,"sensitive":false,"dynamic":false},"input-character-set":{"name":"input-character-set","displayName":"Input Character Set","identifiesControllerService":false,"sensitive":false,"dynamic":false},"SMTP Port":{"name":"SMTP Port","displayName":"SMTP Port","identifiesControllerService":false,"sensitive":false,"dynamic":false},"SMTP Auth":{"name":"SMTP Auth","displayName":"SMTP Auth","identifiesControllerService":false,"sensitive":false,"dynamic":false},"From":{"name":"From","displayName":"From","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Include All Attributes In Message":{"name":"Include All Attributes In Message","displayName":"Include All Attributes In Message","identifiesControllerService":false,"sensitive":false,"dynamic":false},"SMTP Hostname":{"name":"SMTP Hostname","displayName":"SMTP Hostname","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Subject":{"name":"Subject","displayName":"Subject","identifiesControllerService":false,"sensitive":false,"dynamic":false},"SMTP X-Mailer Header":{"name":"SMTP X-Mailer Header","displayName":"SMTP X-Mailer Header","identifiesControllerService":false,"sensitive":false,"dynamic":false},"oauth2-access-token-provider":{"name":"oauth2-access-token-provider","displayName":"OAuth2 Access Token Provider","identifiesControllerService":true,"sensitive":false,"dynamic":false},"Content Type":{"name":"Content Type","displayName":"Content Type","identifiesControllerService":false,"sensitive":false,"dynamic":false},"SMTP Username":{"name":"SMTP Username","displayName":"SMTP Username","identifiesControllerService":false,"sensitive":false,"dynamic":false},"To":{"name":"To","displayName":"To","identifiesControllerService":false,"sensitive":false,"dynamic":false},"SMTP Password":{"name":"SMTP Password","displayName":"SMTP Password","identifiesControllerService":false,"sensitive":true,"dynamic":false},"email-ff-content-as-message":{"name":"email-ff-content-as-message","displayName":"Flow file content as message","identifiesControllerService":false,"sensitive":false,"dynamic":false},"authorization-mode":{"name":"authorization-mode","displayName":"Authorization Mode","identifiesControllerService":false,"sensitive":false,"dynamic":false},"SMTP TLS":{"name":"SMTP TLS","displayName":"SMTP STARTTLS","identifiesControllerService":false,"sensitive":false,"dynamic":false}},"style":{},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["success","failure"],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"59c651be-55cf-38b5-a2fb-8cbded54e08a"},{"identifier":"09b74300-2b42-33dc-b81e-0574130f4d02","instanceIdentifier":"b1ab7295-6c43-39f0-8f5c-b869e0cebc40","name":"EvaluateJsonPath","comments":"Armazena em variáveis as principais informações retornadas no JSON","position":{"x":1248.0,"y":-424.0},"type":"org.apache.nifi.processors.standard.EvaluateJsonPath","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"2.0.0-M4"},"properties":{"Destination":"flowfile-attribute","cidade":"$.location.name","país":"$.location.country","Max String Length":"20 MB","condição_imagem":"$.current.condition.icon","Return Type":"auto-detect","Null Value Representation":"empty string","ultima_atualização":"$.current.last_updated","temperatura":"$.current.temp_c","condição":"$.current.condition.text","humidade":"$.current.humidity","Path Not Found Behavior":"ignore"},"propertyDescriptors":{"Destination":{"name":"Destination","displayName":"Destination","identifiesControllerService":false,"sensitive":false,"dynamic":false},"cidade":{"name":"cidade","displayName":"cidade","identifiesControllerService":false,"sensitive":false,"dynamic":true},"país":{"name":"país","displayName":"país","identifiesControllerService":false,"sensitive":false,"dynamic":true},"Max String Length":{"name":"Max String Length","displayName":"Max String Length","identifiesControllerService":false,"sensitive":false,"dynamic":false},"condição_imagem":{"name":"condição_imagem","displayName":"condição_imagem","identifiesControllerService":false,"sensitive":false,"dynamic":true},"Return Type":{"name":"Return Type","displayName":"Return Type","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Null Value Representation":{"name":"Null Value Representation","displayName":"Null Value Representation","identifiesControllerService":false,"sensitive":false,"dynamic":false},"ultima_atualização":{"name":"ultima_atualização","displayName":"ultima_atualização","identifiesControllerService":false,"sensitive":false,"dynamic":true},"temperatura":{"name":"temperatura","displayName":"temperatura","identifiesControllerService":false,"sensitive":false,"dynamic":true},"condição":{"name":"condição","displayName":"condição","identifiesControllerService":false,"sensitive":false,"dynamic":true},"humidade":{"name":"humidade","displayName":"humidade","identifiesControllerService":false,"sensitive":false,"dynamic":true},"Path Not Found Behavior":{"name":"Path Not Found Behavior","displayName":"Path Not Found Behavior","identifiesControllerService":false,"sensitive":false,"dynamic":false}},"style":{},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["failure","unmatched"],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"59c651be-55cf-38b5-a2fb-8cbded54e08a"},{"identifier":"4ea98f83-7fa1-3890-a1bb-e8e7d7d47672","instanceIdentifier":"defe8b69-f4ef-3740-da23-f26f05cd9538","name":"GenerateFlowFile","comments":"Processor para iniciar o fluxo.\nDefine a cidade que será pesquisada através da variável: weather_cidade","position":{"x":1248.0,"y":-696.0},"type":"org.apache.nifi.processors.standard.GenerateFlowFile","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"2.0.0-M4"},"properties":{"character-set":"UTF-8","weather_cidade":"Rio de Janeiro","File Size":"0B","mime-type":null,"generate-ff-custom-text":null,"Batch Size":"1","Unique FlowFiles":"false","Data Format":"Text"},"propertyDescriptors":{"character-set":{"name":"character-set","displayName":"Character Set","identifiesControllerService":false,"sensitive":false,"dynamic":false},"weather_cidade":{"name":"weather_cidade","displayName":"weather_cidade","identifiesControllerService":false,"sensitive":false,"dynamic":true},"File Size":{"name":"File Size","displayName":"File Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"mime-type":{"name":"mime-type","displayName":"Mime Type","identifiesControllerService":false,"sensitive":false,"dynamic":false},"generate-ff-custom-text":{"name":"generate-ff-custom-text","displayName":"Custom Text","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Batch Size":{"name":"Batch Size","displayName":"Batch Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Unique FlowFiles":{"name":"Unique FlowFiles","displayName":"Unique FlowFiles","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Data Format":{"name":"Data Format","displayName":"Data Format","identifiesControllerService":false,"sensitive":false,"dynamic":false}},"style":{},"schedulingPeriod":"1 hour","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":[],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"59c651be-55cf-38b5-a2fb-8cbded54e08a"}],"inputPorts":[],"outputPorts":[],"connections":[{"identifier":"435cf788-ad56-3cc0-9eba-43766708e38a","instanceIdentifier":"5edb802b-04a2-304f-ce2f-8960f2631b52","name":"","source":{"id":"e4218253-e413-35ab-a03c-e84b2f08174c","type":"PROCESSOR","groupId":"59c651be-55cf-38b5-a2fb-8cbded54e08a","name":"InvokeHTTP","comments":"Processor para consumir a API passando variável e parâmetros no endpoint","instanceIdentifier":"c77abd68-0f8a-3569-e7d6-bc554b923702"},"destination":{"id":"09b74300-2b42-33dc-b81e-0574130f4d02","type":"PROCESSOR","groupId":"59c651be-55cf-38b5-a2fb-8cbded54e08a","name":"EvaluateJsonPath","comments":"Armazena em variáveis as principais informações retornadas no JSON","instanceIdentifier":"b1ab7295-6c43-39f0-8f5c-b869e0cebc40"},"labelIndex":1,"zIndex":0,"selectedRelationships":["Response"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[{"x":1128.246826171875,"y":-432.0}],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"59c651be-55cf-38b5-a2fb-8cbded54e08a"},{"identifier":"eb0cce6c-0b63-392c-9dfc-f8bf3f691e18","instanceIdentifier":"7c2e4317-ff5a-3cd7-a0e3-c555aa7917cb","name":"","source":{"id":"09b74300-2b42-33dc-b81e-0574130f4d02","type":"PROCESSOR","groupId":"59c651be-55cf-38b5-a2fb-8cbded54e08a","name":"EvaluateJsonPath","comments":"Armazena em variáveis as principais informações retornadas no JSON","instanceIdentifier":"b1ab7295-6c43-39f0-8f5c-b869e0cebc40"},"destination":{"id":"29d5c69d-5f0e-38fd-9993-102b003493aa","type":"PROCESSOR","groupId":"59c651be-55cf-38b5-a2fb-8cbded54e08a","name":"UpdateAttribute","comments":"NiFi Expression Language","instanceIdentifier":"b21ca84b-ec94-3ce1-4e6e-00da5fd5c1a4"},"labelIndex":1,"zIndex":0,"selectedRelationships":["matched"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[{"x":1120.246826171875,"y":-288.0}],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"59c651be-55cf-38b5-a2fb-8cbded54e08a"},{"identifier":"598d4f3e-eb6e-3113-b7e4-5085eb602f8f","instanceIdentifier":"4997b81a-f0fb-3440-9a19-a63672b6ccc3","name":"","source":{"id":"4ea98f83-7fa1-3890-a1bb-e8e7d7d47672","type":"PROCESSOR","groupId":"59c651be-55cf-38b5-a2fb-8cbded54e08a","name":"GenerateFlowFile","comments":"Processor para iniciar o fluxo.\nDefine a cidade que será pesquisada através da variável: weather_cidade","instanceIdentifier":"defe8b69-f4ef-3740-da23-f26f05cd9538"},"destination":{"id":"e4218253-e413-35ab-a03c-e84b2f08174c","type":"PROCESSOR","groupId":"59c651be-55cf-38b5-a2fb-8cbded54e08a","name":"InvokeHTTP","comments":"Processor para consumir a API passando variável e parâmetros no endpoint","instanceIdentifier":"c77abd68-0f8a-3569-e7d6-bc554b923702"},"labelIndex":1,"zIndex":0,"selectedRelationships":["success"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[{"x":1128.246826171875,"y":-568.0}],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"59c651be-55cf-38b5-a2fb-8cbded54e08a"},{"identifier":"8c17ab98-6136-35a9-bbd3-2235364a942c","instanceIdentifier":"75924fa4-7336-3ba8-f01d-ee2848a9dc24","name":"","source":{"id":"29d5c69d-5f0e-38fd-9993-102b003493aa","type":"PROCESSOR","groupId":"59c651be-55cf-38b5-a2fb-8cbded54e08a","name":"UpdateAttribute","comments":"NiFi Expression Language","instanceIdentifier":"b21ca84b-ec94-3ce1-4e6e-00da5fd5c1a4"},"destination":{"id":"634d02c2-fb14-3708-802f-d4806e3c68c0","type":"PROCESSOR","groupId":"59c651be-55cf-38b5-a2fb-8cbded54e08a","name":"PutEmail","comments":"Disparo de e-mail em HMTL com as informações do clima da cidade pesquisada","instanceIdentifier":"85fb00c1-a58f-3061-1381-4b92ba647809"},"labelIndex":0,"zIndex":0,"selectedRelationships":["success"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[{"x":1120.0,"y":-160.0}],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"59c651be-55cf-38b5-a2fb-8cbded54e08a"}],"labels":[{"identifier":"375bf2a6-bd1d-3527-9d7c-709aa1cee9db","instanceIdentifier":"28fd5dc6-f8da-3b84-4d39-810cdeea3714","position":{"x":1248.0,"y":-744.0},"label":"Início Fluxo","zIndex":0,"width":352.0,"height":40.0,"style":{"background-color":"#052beb","font-size":"14px"},"componentType":"LABEL","groupIdentifier":"59c651be-55cf-38b5-a2fb-8cbded54e08a"}],"funnels":[],"controllerServices":[],"parameterContextName":"Workshop 2","defaultFlowFileExpiration":"0 sec","defaultBackPressureObjectThreshold":10000,"defaultBackPressureDataSizeThreshold":"1 GB","scheduledState":"ENABLED","executionEngine":"INHERITED","maxConcurrentTasks":1,"statelessFlowTimeout":"1 min","flowFileConcurrency":"UNBOUNDED","flowFileOutboundPolicy":"STREAM_WHEN_AVAILABLE","componentType":"PROCESS_GROUP","groupIdentifier":"fa708b60-7972-370a-9d7c-b67804acdb88"},{"identifier":"216a0ae1-e7f5-336e-a53a-c9a820dfa51c","instanceIdentifier":"e8f428eb-2d6a-3a58-8e63-7eabba8e1d0b","name":"Laço Repetição com Datas","comments":"","position":{"x":552.0,"y":-672.0},"processGroups":[],"remoteProcessGroups":[],"processors":[{"identifier":"ccee2110-2fac-3856-bdbc-5cca248121a1","instanceIdentifier":"545a9c67-4af1-362f-4243-d63d19ae0fa4","name":"GenerateFlowFile","comments":"Inicia a carga.\nSendo:\n - Data inicial: retroagindo 05 dias\n- Data final: data atual","position":{"x":-214.99999247519418,"y":-112.50002587753409},"type":"org.apache.nifi.processors.standard.GenerateFlowFile","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"2.0.0-M4"},"properties":{"character-set":"UTF-8","File Size":"0B","mime-type":null,"generate-ff-custom-text":null,"Batch Size":"1","Unique FlowFiles":"false","data_inicial":"${now():toNumber():minus(432000000):format(\"yyyy-MM-dd\"):toString()}","Data Format":"Text","data_final":"${now():format(\"yyyy-MM-dd\"):toString()}"},"propertyDescriptors":{"character-set":{"name":"character-set","displayName":"Character Set","identifiesControllerService":false,"sensitive":false,"dynamic":false},"File Size":{"name":"File Size","displayName":"File Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"mime-type":{"name":"mime-type","displayName":"Mime Type","identifiesControllerService":false,"sensitive":false,"dynamic":false},"generate-ff-custom-text":{"name":"generate-ff-custom-text","displayName":"Custom Text","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Batch Size":{"name":"Batch Size","displayName":"Batch Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Unique FlowFiles":{"name":"Unique FlowFiles","displayName":"Unique FlowFiles","identifiesControllerService":false,"sensitive":false,"dynamic":false},"data_inicial":{"name":"data_inicial","displayName":"data_inicial","identifiesControllerService":false,"sensitive":false,"dynamic":true},"Data Format":{"name":"Data Format","displayName":"Data Format","identifiesControllerService":false,"sensitive":false,"dynamic":false},"data_final":{"name":"data_final","displayName":"data_final","identifiesControllerService":false,"sensitive":false,"dynamic":true}},"style":{},"schedulingPeriod":"1 hour","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":[],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"216a0ae1-e7f5-336e-a53a-c9a820dfa51c"},{"identifier":"191f01e7-d912-3b74-88a8-dc32cbe6d7b0","instanceIdentifier":"4240bffa-569f-3734-50a1-a03676a29e8b","name":"UpdateAttribute","comments":"Armazena o valor do atributo data_inicial no atributo data_coleta","position":{"x":-216.0,"y":280.0},"type":"org.apache.nifi.processors.attributes.UpdateAttribute","bundle":{"group":"org.apache.nifi","artifact":"nifi-update-attribute-nar","version":"2.0.0-M4"},"properties":{"Delete Attributes Expression":null,"Store State":"Do not store state","canonical-value-lookup-cache-size":"100","data_coleta":"${data_inicial}","Stateful Variables Initial Value":null},"propertyDescriptors":{"Delete Attributes Expression":{"name":"Delete Attributes Expression","displayName":"Delete Attributes Expression","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Store State":{"name":"Store State","displayName":"Store State","identifiesControllerService":false,"sensitive":false,"dynamic":false},"canonical-value-lookup-cache-size":{"name":"canonical-value-lookup-cache-size","displayName":"Cache Value Lookup Cache Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"data_coleta":{"name":"data_coleta","displayName":"data_coleta","identifiesControllerService":false,"sensitive":false,"dynamic":true},"Stateful Variables Initial Value":{"name":"Stateful Variables Initial Value","displayName":"Stateful Variables Initial Value","identifiesControllerService":false,"sensitive":false,"dynamic":false}},"style":{},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":25,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":[],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"216a0ae1-e7f5-336e-a53a-c9a820dfa51c"},{"identifier":"8861902a-4476-359a-a778-839d456463e6","instanceIdentifier":"fc1d35f5-c3d0-3b69-03d8-aa979bb3da3f","name":"RouteOnAttribute","comments":"Rota para verificar se o atributo data_final é maior ou igual ao atributo data_inicial, caso positivo segue o fluxo \"continua\"","position":{"x":-216.0,"y":80.0},"type":"org.apache.nifi.processors.standard.RouteOnAttribute","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"2.0.0-M4"},"properties":{"continua":"${data_final:toDate('yyyy-MM-dd'):toNumber():ge(${data_inicial:toDate('yyyy-MM-dd'):toNumber()})}","Routing Strategy":"Route to Property name"},"propertyDescriptors":{"continua":{"name":"continua","displayName":"continua","identifiesControllerService":false,"sensitive":false,"dynamic":true},"Routing Strategy":{"name":"Routing Strategy","displayName":"Routing Strategy","identifiesControllerService":false,"sensitive":false,"dynamic":false}},"style":{},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":25,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["unmatched"],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"216a0ae1-e7f5-336e-a53a-c9a820dfa51c"},{"identifier":"73f6d4f2-7a54-3760-9f53-f819f454fe1e","instanceIdentifier":"f1284724-3a09-3136-8634-23bac641b14c","name":"UpdateAttribute","comments":"Acrescenta um dia no atributo data_inicial","position":{"x":328.0,"y":80.0},"type":"org.apache.nifi.processors.attributes.UpdateAttribute","bundle":{"group":"org.apache.nifi","artifact":"nifi-update-attribute-nar","version":"2.0.0-M4"},"properties":{"Delete Attributes Expression":null,"Store State":"Do not store state","canonical-value-lookup-cache-size":"100","data_inicial":"${data_inicial:toDate('yyyy-MM-dd'):toNumber():plus(86400000):format('yyyy-MM-dd'):toString()}","Stateful Variables Initial Value":null},"propertyDescriptors":{"Delete Attributes Expression":{"name":"Delete Attributes Expression","displayName":"Delete Attributes Expression","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Store State":{"name":"Store State","displayName":"Store State","identifiesControllerService":false,"sensitive":false,"dynamic":false},"canonical-value-lookup-cache-size":{"name":"canonical-value-lookup-cache-size","displayName":"Cache Value Lookup Cache Size","identifiesControllerService":false,"sensitive":false,"dynamic":false},"data_inicial":{"name":"data_inicial","displayName":"data_inicial","identifiesControllerService":false,"sensitive":false,"dynamic":true},"Stateful Variables Initial Value":{"name":"Stateful Variables Initial Value","displayName":"Stateful Variables Initial Value","identifiesControllerService":false,"sensitive":false,"dynamic":false}},"style":{},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":25,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":[],"scheduledState":"ENABLED","retryCount":10,"retriedRelationships":[],"backoffMechanism":"PENALIZE_FLOWFILE","maxBackoffPeriod":"10 mins","componentType":"PROCESSOR","groupIdentifier":"216a0ae1-e7f5-336e-a53a-c9a820dfa51c"}],"inputPorts":[],"outputPorts":[],"connections":[{"identifier":"48ce15da-58e0-3539-8b9f-52ba7e55ee52","instanceIdentifier":"98101c0d-c3be-3cbe-3d49-20c1196afb66","name":"","source":{"id":"8861902a-4476-359a-a778-839d456463e6","type":"PROCESSOR","groupId":"216a0ae1-e7f5-336e-a53a-c9a820dfa51c","name":"RouteOnAttribute","comments":"Rota para verificar se o atributo data_final é maior ou igual ao atributo data_inicial, caso positivo segue o fluxo \"continua\"","instanceIdentifier":"fc1d35f5-c3d0-3b69-03d8-aa979bb3da3f"},"destination":{"id":"73f6d4f2-7a54-3760-9f53-f819f454fe1e","type":"PROCESSOR","groupId":"216a0ae1-e7f5-336e-a53a-c9a820dfa51c","name":"UpdateAttribute","comments":"Acrescenta um dia no atributo data_inicial","instanceIdentifier":"f1284724-3a09-3136-8634-23bac641b14c"},"labelIndex":1,"zIndex":0,"selectedRelationships":["continua"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[{"x":504.0,"y":264.0}],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"216a0ae1-e7f5-336e-a53a-c9a820dfa51c"},{"identifier":"06ed09f6-d38d-3f5b-89b1-fb9c23dbe80a","instanceIdentifier":"bee63eb6-3194-3fa1-e007-1dd1a609d4d3","name":"","source":{"id":"191f01e7-d912-3b74-88a8-dc32cbe6d7b0","type":"PROCESSOR","groupId":"216a0ae1-e7f5-336e-a53a-c9a820dfa51c","name":"UpdateAttribute","comments":"Armazena o valor do atributo data_inicial no atributo data_coleta","instanceIdentifier":"4240bffa-569f-3734-50a1-a03676a29e8b"},"destination":{"id":"c70c735d-ae4e-393d-9916-9d1c0cb8dd24","type":"FUNNEL","groupId":"216a0ae1-e7f5-336e-a53a-c9a820dfa51c","name":"Funnel","comments":"","instanceIdentifier":"8cfac7cb-f8c2-3f72-5ce2-cdeb40c0b101"},"labelIndex":1,"zIndex":0,"selectedRelationships":["success"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":["org.apache.nifi.prioritizer.FirstInFirstOutPrioritizer"],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"216a0ae1-e7f5-336e-a53a-c9a820dfa51c"},{"identifier":"b9ad9852-817a-38d2-b09b-2118923f92a6","instanceIdentifier":"dfd11456-156d-30e9-0f89-9350cc68eac2","name":"","source":{"id":"73f6d4f2-7a54-3760-9f53-f819f454fe1e","type":"PROCESSOR","groupId":"216a0ae1-e7f5-336e-a53a-c9a820dfa51c","name":"UpdateAttribute","comments":"Acrescenta um dia no atributo data_inicial","instanceIdentifier":"f1284724-3a09-3136-8634-23bac641b14c"},"destination":{"id":"8861902a-4476-359a-a778-839d456463e6","type":"PROCESSOR","groupId":"216a0ae1-e7f5-336e-a53a-c9a820dfa51c","name":"RouteOnAttribute","comments":"Rota para verificar se o atributo data_final é maior ou igual ao atributo data_inicial, caso positivo segue o fluxo \"continua\"","instanceIdentifier":"fc1d35f5-c3d0-3b69-03d8-aa979bb3da3f"},"labelIndex":1,"zIndex":0,"selectedRelationships":["success"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[{"x":504.0,"y":24.0}],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"216a0ae1-e7f5-336e-a53a-c9a820dfa51c"},{"identifier":"15f03f44-77ef-3659-9220-a733b1faa2d7","instanceIdentifier":"1c91df07-0be1-3d00-c823-ec8e941fdcdd","name":"","source":{"id":"ccee2110-2fac-3856-bdbc-5cca248121a1","type":"PROCESSOR","groupId":"216a0ae1-e7f5-336e-a53a-c9a820dfa51c","name":"GenerateFlowFile","comments":"Inicia a carga.\nSendo:\n - Data inicial: retroagindo 05 dias\n- Data final: data atual","instanceIdentifier":"545a9c67-4af1-362f-4243-d63d19ae0fa4"},"destination":{"id":"8861902a-4476-359a-a778-839d456463e6","type":"PROCESSOR","groupId":"216a0ae1-e7f5-336e-a53a-c9a820dfa51c","name":"RouteOnAttribute","comments":"Rota para verificar se o atributo data_final é maior ou igual ao atributo data_inicial, caso positivo segue o fluxo \"continua\"","instanceIdentifier":"fc1d35f5-c3d0-3b69-03d8-aa979bb3da3f"},"labelIndex":1,"zIndex":0,"selectedRelationships":["success"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"216a0ae1-e7f5-336e-a53a-c9a820dfa51c"},{"identifier":"80d3ec29-533c-3cbd-8500-d84ae0d04c0c","instanceIdentifier":"0438c973-dfda-345e-01d7-4b6d9275bc75","name":"","source":{"id":"8861902a-4476-359a-a778-839d456463e6","type":"PROCESSOR","groupId":"216a0ae1-e7f5-336e-a53a-c9a820dfa51c","name":"RouteOnAttribute","comments":"Rota para verificar se o atributo data_final é maior ou igual ao atributo data_inicial, caso positivo segue o fluxo \"continua\"","instanceIdentifier":"fc1d35f5-c3d0-3b69-03d8-aa979bb3da3f"},"destination":{"id":"191f01e7-d912-3b74-88a8-dc32cbe6d7b0","type":"PROCESSOR","groupId":"216a0ae1-e7f5-336e-a53a-c9a820dfa51c","name":"UpdateAttribute","comments":"Armazena o valor do atributo data_inicial no atributo data_coleta","instanceIdentifier":"4240bffa-569f-3734-50a1-a03676a29e8b"},"labelIndex":1,"zIndex":0,"selectedRelationships":["continua"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":["org.apache.nifi.prioritizer.FirstInFirstOutPrioritizer"],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"216a0ae1-e7f5-336e-a53a-c9a820dfa51c"}],"labels":[],"funnels":[{"identifier":"c70c735d-ae4e-393d-9916-9d1c0cb8dd24","instanceIdentifier":"8cfac7cb-f8c2-3f72-5ce2-cdeb40c0b101","position":{"x":-64.0,"y":528.0},"componentType":"FUNNEL","groupIdentifier":"216a0ae1-e7f5-336e-a53a-c9a820dfa51c"}],"controllerServices":[],"parameterContextName":"Workshop 2","defaultFlowFileExpiration":"0 sec","defaultBackPressureObjectThreshold":10000,"defaultBackPressureDataSizeThreshold":"1 GB","scheduledState":"ENABLED","executionEngine":"INHERITED","maxConcurrentTasks":1,"statelessFlowTimeout":"1 min","flowFileConcurrency":"UNBOUNDED","flowFileOutboundPolicy":"STREAM_WHEN_AVAILABLE","componentType":"PROCESS_GROUP","groupIdentifier":"fa708b60-7972-370a-9d7c-b67804acdb88"}],"remoteProcessGroups":[],"processors":[],"inputPorts":[],"outputPorts":[],"connections":[],"labels":[],"funnels":[],"controllerServices":[],"parameterContextName":"Workshop 2","defaultFlowFileExpiration":"0 sec","defaultBackPressureObjectThreshold":10000,"defaultBackPressureDataSizeThreshold":"1 GB","scheduledState":"ENABLED","executionEngine":"INHERITED","maxConcurrentTasks":1,"statelessFlowTimeout":"1 min","flowFileConcurrency":"UNBOUNDED","flowFileOutboundPolicy":"STREAM_WHEN_AVAILABLE","componentType":"PROCESS_GROUP","groupIdentifier":"6694ab51-dc3d-3850-80e6-48a52b28418d"}],"remoteProcessGroups":[],"processors":[],"inputPorts":[],"outputPorts":[],"connections":[],"labels":[],"funnels":[],"controllerServices":[{"identifier":"b01f5adc-e105-38a6-b878-eef024a1d25c","instanceIdentifier":"b94f11cc-0488-3eb2-4b8b-0917021c96f6","name":"BancoPostgres ","comments":"","type":"org.apache.nifi.dbcp.DBCPConnectionPool","bundle":{"group":"org.apache.nifi","artifact":"nifi-dbcp-service-nar","version":"2.0.0-M4"},"properties":{"dbcp-min-idle-conns":"0","Max Wait Time":"500 millis","Database Driver Class Name":"org.postgresql.Driver","dbcp-min-evictable-idle-time":"30 mins","kerberos-principal":null,"Max Total Connections":"8","kerberos-credentials-service":null,"dbcp-max-conn-lifetime":"-1","Validation-query":null,"Database Connection URL":"jdbc:postgresql://workshop-nifi-dia2-postgres:5432/workshop2","dbcp-time-between-eviction-runs":"-1","Database User":"#{postgres_user}","kerberos-user-service":null,"dbcp-soft-min-evictable-idle-time":"-1","database-driver-locations":"/opt/nifi/nifi-current/jdbc/postgresql-42.7.4.jar","dbcp-max-idle-conns":"8","Password":"#{postgres_password}"},"propertyDescriptors":{"kerberos-password":{"name":"kerberos-password","displayName":"Kerberos Password","identifiesControllerService":false,"sensitive":true,"dynamic":false},"dbcp-min-idle-conns":{"name":"dbcp-min-idle-conns","displayName":"Minimum Idle Connections","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Max Wait Time":{"name":"Max Wait Time","displayName":"Max Wait Time","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Database Driver Class Name":{"name":"Database Driver Class Name","displayName":"Database Driver Class Name","identifiesControllerService":false,"sensitive":false,"dynamic":false},"dbcp-min-evictable-idle-time":{"name":"dbcp-min-evictable-idle-time","displayName":"Minimum Evictable Idle Time","identifiesControllerService":false,"sensitive":false,"dynamic":false},"kerberos-principal":{"name":"kerberos-principal","displayName":"Kerberos Principal","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Max Total Connections":{"name":"Max Total Connections","displayName":"Max Total Connections","identifiesControllerService":false,"sensitive":false,"dynamic":false},"kerberos-credentials-service":{"name":"kerberos-credentials-service","displayName":"Kerberos Credentials Service","identifiesControllerService":true,"sensitive":false,"dynamic":false},"dbcp-max-conn-lifetime":{"name":"dbcp-max-conn-lifetime","displayName":"Max Connection Lifetime","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Validation-query":{"name":"Validation-query","displayName":"Validation query","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Database Connection URL":{"name":"Database Connection URL","displayName":"Database Connection URL","identifiesControllerService":false,"sensitive":false,"dynamic":false},"dbcp-time-between-eviction-runs":{"name":"dbcp-time-between-eviction-runs","displayName":"Time Between Eviction Runs","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Database User":{"name":"Database User","displayName":"Database User","identifiesControllerService":false,"sensitive":false,"dynamic":false},"kerberos-user-service":{"name":"kerberos-user-service","displayName":"Kerberos User Service","identifiesControllerService":true,"sensitive":false,"dynamic":false},"dbcp-soft-min-evictable-idle-time":{"name":"dbcp-soft-min-evictable-idle-time","displayName":"Soft Minimum Evictable Idle Time","identifiesControllerService":false,"sensitive":false,"dynamic":false},"database-driver-locations":{"name":"database-driver-locations","displayName":"Database Driver Location(s)","identifiesControllerService":false,"sensitive":false,"dynamic":false,"resourceDefinition":{"cardinality":"MULTIPLE","resourceTypes":["DIRECTORY","FILE","URL"]}},"dbcp-max-idle-conns":{"name":"dbcp-max-idle-conns","displayName":"Max Idle Connections","identifiesControllerService":false,"sensitive":false,"dynamic":false},"Password":{"name":"Password","displayName":"Password","identifiesControllerService":false,"sensitive":true,"dynamic":false}},"controllerServiceApis":[{"type":"org.apache.nifi.dbcp.DBCPService","bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-services-api-nar","version":"2.0.0-M4"}}],"scheduledState":"DISABLED","bulletinLevel":"WARN","componentType":"CONTROLLER_SERVICE","groupIdentifier":"6694ab51-dc3d-3850-80e6-48a52b28418d"}],"parameterContextName":"Workshop 2","defaultFlowFileExpiration":"0 sec","defaultBackPressureObjectThreshold":10000,"defaultBackPressureDataSizeThreshold":"1 GB","scheduledState":"ENABLED","executionEngine":"INHERITED","maxConcurrentTasks":1,"statelessFlowTimeout":"1 min","flowFileConcurrency":"UNBOUNDED","flowFileOutboundPolicy":"STREAM_WHEN_AVAILABLE","componentType":"PROCESS_GROUP"},"externalControllerServices":{},"parameterContexts":{"Workshop 2":{"name":"Workshop 2","parameters":[{"name":"postgres_user","description":"Usuário para acessar o banco de dados Postgres","sensitive":false,"provided":false,"value":"workshop-nifi-2-postgres"},{"name":"weather_key","description":"Chave para acessar a API do Weather","sensitive":false,"provided":false},{"name":"smtp_hostname","description":"SMTP Hostname utilizado para disparo de e-mails","sensitive":false,"provided":false,"value":"smtp.gmail.com"},{"name":"smtp_password","description":"Senha utilizada para disparo de e-mails","sensitive":true,"provided":false},{"name":"weather_url","description":"Endpoint da API do Weather","sensitive":false,"provided":false,"value":"http://api.weatherapi.com/v1/current.json?"},{"name":"smtp_port","description":"Porta SMTP utilizada para disparo de e-mails","sensitive":false,"provided":false,"value":"587"},{"name":"postgres_password","description":"Senha para acessar o banco de dados Postgres","sensitive":true,"provided":false},{"name":"slack_access_token","description":"Access Token","sensitive":true,"provided":false},{"name":"smtp_username","description":"Endereço de e-mail para disparo dos e-mails dos pipelines","sensitive":false,"provided":false}],"inheritedParameterContexts":[],"componentType":"PARAMETER_CONTEXT"}},"flowEncodingVersion":"1.0","parameterProviders":{},"latest":false}